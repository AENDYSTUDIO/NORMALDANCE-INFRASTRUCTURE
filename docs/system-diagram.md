# üèóÔ∏è –î–∏–∞–≥—Ä–∞–º–º–∞ —Å–∏—Å—Ç–µ–º—ã NORMALDANCE

## –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

NORMALDANCE - —ç—Ç–æ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è Web3 –º—É–∑—ã–∫–∞–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∞—è —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π —Å—Ç—Ä–∏–º–∏–Ω–≥ —Å –¥–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è–º–∏ –±–ª–æ–∫—á–µ–π–Ω –∏ IPFS.

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Frontend Layer

- **Next.js**: 15.5.6 - React —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è SSR/SSG
- **React**: 18.0.0 - UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- **TypeScript**: 5.9.3 - –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JavaScript
- **Tailwind CSS**: 4.1.13 - CSS —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **shadcn/ui**: @radix-ui –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è UI
- **Three.js**: 0.160.0 - 3D –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ (@react-three/fiber, @react-three/drei)
- **Socket.IO Client**: 4.8.1 - Real-time –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏

### Backend Services

- **Next.js API Routes**: –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ API —Ä–æ—É—Ç—ã
- **Prisma**: 5.0.0 - ORM –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **Socket.IO**: 4.8.1 - WebSocket —Å–µ—Ä–≤–µ—Ä
- **Winston**: 3.17.0 - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Redis**: ioredis 5.3.2 - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–µ—Å—Å–∏–∏
- **JWT**: jsonwebtoken 9.0.0 - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### Blockchain Layer

- **Solana Web3.js**: 1.98.4 - Solana –±–ª–æ–∫—á–µ–π–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **@solana/wallet-adapter**: 0.15.39 - Wallet –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **@solana/spl-token**: 0.4.14 - SPL —Ç–æ–∫–µ–Ω—ã
- **TON Core**: @ton/core 0.62.0 - TON –±–ª–æ–∫—á–µ–π–Ω
- **TON Connect**: @tonconnect/sdk 3.3.1 - TON wallet –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **Ethers**: 6.15.0 - Ethereum/Web3 utilities

### Storage Layer

- **SQLite**: –ß–µ—Ä–µ–∑ Prisma (dev), PostgreSQL (prod)
- **IPFS/Helia**: @helia/unixfs 6.0.1 - –î–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ
- **Filecoin**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ IPFS
- **Redis**: 7-alpine (demo) - –ö—ç—à –∏ —Å–µ—Å—Å–∏–∏

### AI/ML Layer

- **AI SDK**: ai 5.0.76 - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π AI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **Qdrant**: @qdrant/js-client-rest 1.15.1 - –í–µ–∫—Ç–æ—Ä–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Upstash Vector**: 1.2.2 - –í–µ–∫—Ç–æ—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

### DevOps & Infrastructure

- **Docker**: Multi-stage builds (Node 20-alpine)
- **PostgreSQL**: 15-alpine (demo/prod)
- **Redis**: 7-alpine
- **Prometheus**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **Grafana**: –î–∞—à–±–æ—Ä–¥—ã
- **Traefik**: Reverse proxy (–∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö docs)

### Testing & Quality

- **Jest**: 29.0.0 - Unit/Integration —Ç–µ—Å—Ç—ã
- **Playwright**: 1.55.0 - E2E —Ç–µ—Å—Ç—ã
- **Testing Library**: React testing utilities
- **Husky**: 9.0.0 - Git hooks
- **ESLint**: 8.0.0 - –õ–∏–Ω—Ç–∏–Ω–≥ (–æ—Ç–∫–ª—é—á–µ–Ω –ø–æ –ø—Ä–∞–≤–∏–ª–∞–º)

### Security & Monitoring

- **Helmet**: 8.0.0 - Security headers
- **Sentry**: @sentry/nextjs 10.11.0 - Error tracking
- **bcryptjs**: 3.0.2 - Password hashing
- **Mixpanel**: 2.48.0 - Analytics

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞

```mermaid
graph TB
    subgraph "Client Layer"
        WEB[Web Browser<br/>Next.js 15.5.6 + React 18]
        MOBILE[Mobile App<br/>React Native + Expo]
        TELEGRAM[Telegram Mini App<br/>TWA SDK 8.0.2]
    end

    subgraph "API Gateway Layer"
        NEXT_API[Next.js API Routes<br/>TypeScript 5.9.3]
        SOCKET_IO[Socket.IO Server<br/>4.8.1]
        MCP[MCP Server<br/>@modelcontextprotocol/sdk 1.20.1]
    end

    subgraph "Business Logic Layer"
        AUTH[Authentication<br/>NextAuth 4.24.11 + JWT]
        TRACKS[Track Management<br/>Prisma 5.0.0]
        NFT[NFT Operations<br/>Solana Web3.js 1.98.4]
        DEX[DEX Integration<br/>@solana/spl-token 0.4.14]
        AI[AI Recommendations<br/>AI SDK 5.0.76 + Qdrant]
    end

    subgraph "Data Layer"
        POSTGRES[(PostgreSQL 15<br/>Primary Database)]
        REDIS[(Redis 7<br/>Cache & Sessions)]
        QDRANT[(Qdrant<br/>Vector Database)]
        IPFS[(IPFS/Filecoin<br/>Decentralized Storage)]
    end

    subgraph "Blockchain Layer"
        SOLANA[Solana Network<br/>Web3.js 1.98.4]
        TON[TON Network<br/>@ton/core 0.62.0]
        ETHEREUM[Ethereum/Web3<br/>Ethers 6.15.0]
    end

    subgraph "Infrastructure Layer"
        DOCKER[Docker Containers<br/>Multi-stage builds]
        KUBERNETES[Kubernetes<br/>Helm Charts]
        MONITORING[Monitoring Stack<br/>Prometheus + Grafana]
        CDN[CDN<br/>Cloudflare]
    end

    WEB --> NEXT_API
    MOBILE --> NEXT_API
    TELEGRAM --> NEXT_API

    NEXT_API --> AUTH
    NEXT_API --> TRACKS
    NEXT_API --> NFT
    NEXT_API --> DEX
    NEXT_API --> AI

    AUTH --> POSTGRES
    TRACKS --> POSTGRES
    NFT --> SOLANA
    DEX --> SOLANA
    AI --> QDRANT

    TRACKS --> IPFS
    NFT --> IPFS

    NEXT_API --> REDIS
    AI --> REDIS

    NFT --> TON
    DEX --> TON

    BUSINESS_LOGIC --> ETHEREUM

    ALL --> DOCKER
    DOCKER --> KUBERNETES
    KUBERNETES --> MONITORING
    STATIC --> CDN
```

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

### 1. Frontend Applications

- **Web App**: Next.js SPA —Å SSR –¥–ª—è SEO –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **Mobile App**: React Native —Å Expo –¥–ª—è –∫—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç–∏
- **Telegram Mini App**: –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ

### 2. API Services

- **REST API**: Next.js API routes –¥–ª—è CRUD –æ–ø–µ—Ä–∞—Ü–∏–π
- **WebSocket**: Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Socket.IO
- **MCP Server**: Model Context Protocol –¥–ª—è AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

### 3. Core Services

- **Authentication**: JWT + wallet-based auth
- **Track Management**: Upload, storage, streaming
- **NFT Operations**: Minting, trading, royalties
- **DEX Integration**: Token swaps, liquidity
- **AI Engine**: Recommendations, content analysis

### 4. Data Storage

- **Primary DB**: PostgreSQL –¥–ª—è —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **Cache**: Redis –¥–ª—è —Å–µ—Å—Å–∏–π –∏ —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- **Vector DB**: Qdrant –¥–ª—è AI embeddings
- **Decentralized Storage**: IPFS/Filecoin –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### 5. Blockchain Networks

- **Solana**: –û—Å–Ω–æ–≤–Ω–∞—è —Å–µ—Ç—å –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- **TON**: –î–ª—è Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ –ø–ª–∞—Ç–µ–∂–µ–π
- **Ethereum**: –î–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å DeFi –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º–∏

### 6. Infrastructure

- **Containerization**: Docker –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
- **Orchestration**: Kubernetes –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
- **Monitoring**: Prometheus/Grafana –¥–ª—è observability
- **CDN**: Cloudflare –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

## Data Flow

```mermaid
sequenceDiagram
    participant User
    participant Frontend
    participant API
    participant Database
    participant IPFS
    participant Blockchain

    User->>Frontend: Upload Track
    Frontend->>API: POST /api/tracks
    API->>IPFS: Store Audio File
    IPFS-->>API: IPFS Hash
    API->>Database: Save Metadata
    API->>Blockchain: Mint NFT
    Blockchain-->>API: Transaction Hash
    API->>Database: Update NFT Info
    API-->>Frontend: Success Response
    Frontend-->>User: Track Published
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **Multi-layer Security**: Input validation, rate limiting, encryption
- **Wallet Authentication**: Cryptographic signatures –¥–ª—è Web3
- **API Security**: JWT tokens, CORS, Helmet headers
- **Blockchain Security**: Smart contract audits, secure key management

## –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å

- **Horizontal Scaling**: Stateless services, container orchestration
- **CDN Integration**: Global content distribution
- **Database Sharding**: –î–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- **Microservices**: –ù–µ–∑–∞–≤–∏—Å–∏–º–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ Observability

- **Application Metrics**: Response times, error rates
- **Infrastructure Monitoring**: CPU, memory, disk usage
- **Blockchain Monitoring**: Transaction confirmations, gas usage
- **User Analytics**: Mixpanel –¥–ª—è behavioral insights

---

_–î–∏–∞–≥—Ä–∞–º–º–∞ –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ –∞–Ω–∞–ª–∏–∑–µ package.json, Prisma —Å—Ö–µ–º—ã, Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –∏ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞ NORMALDANCE._
