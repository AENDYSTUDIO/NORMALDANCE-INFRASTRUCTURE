# üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ –≤–µ—Ä—Å–∏—é 0.0.0

## –û–±–∑–æ—Ä

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –æ–±–Ω–æ–≤–∏—Ç—å NORMAL DANCE —Å –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏–π –¥–æ –≤–µ—Ä—Å–∏–∏ 0.0.0. –í–µ—Ä—Å–∏—è 0.0.0 –≤–∫–ª—é—á–∞–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –≤ AI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ç–µ–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ, —Å–∏—Å—Ç–µ–º–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ —Å—Ç–µ–π–∫–∏–Ω–≥–∞ –∏ NFT —Ä—ã–Ω–∫–µ.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

1. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –º–∏–≥—Ä–∞—Ü–∏–∏](#–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-–∫-–º–∏–≥—Ä–∞—Ü–∏–∏)
2. [–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è](#–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ-–∏–∑–º–µ–Ω–µ–Ω–∏—è)
3. [–ò–∑–º–µ–Ω–µ–Ω–∏—è API](#–∏–∑–º–µ–Ω–µ–Ω–∏—è-api)
4. [–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö](#–∏–∑–º–µ–Ω–µ–Ω–∏—è-–≤-–±–∞–∑–µ-–¥–∞–Ω–Ω—ã—Ö)
5. [–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö](#–∏–∑–º–µ–Ω–µ–Ω–∏—è-–≤-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö)
6. [–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏](#–∏–∑–º–µ–Ω–µ–Ω–∏—è-–≤-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
7. [–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏](#—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏-–ø–æ-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
8. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
9. [–û—Ç–∫–∞—Ç](#–æ—Ç–∫–∞—Ç)

## üõ†Ô∏è –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –º–∏–≥—Ä–∞—Ü–∏–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
- **Node.js**: v18.x –∏–ª–∏ –≤—ã—à–µ
- **npm**: v8.x –∏–ª–∏ –≤—ã—à–µ
- **PostgreSQL**: v14 –∏–ª–∏ –≤—ã—à–µ
- **Redis**: v6.x –∏–ª–∏ –≤—ã—à–µ
- **Solana CLI**: v1.14 –∏–ª–∏ –≤—ã—à–µ

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
pg_dump -h localhost -U normaldance -d normaldance > backup_v0.0.0.sql

# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ —Ñ–∞–π–ª–æ–≤
tar -czf backup_v0.0.0_files.tar.gz src/ components/ docs/ package.json

# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cp prisma/schema.prisma prisma/schema.backup.v0.0.0.prisma
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏
```bash
npm list normaldance
# –∏–ª–∏
git describe --tags
```

## ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ API —Ä–æ—É—Ç–∞—Ö

#### –£–¥–∞–ª–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- `GET /api/recommendations/old` - –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ –Ω–æ–≤—ã–π API
- `POST /api/achievements/simple` - –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É

#### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
```typescript
// –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç
GET /api/recommendations
{
  "tracks": [...],
  "type": "basic"
}

// –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç (v0.0.0)
GET /api/recommendations
{
  "personal": [...],
  "collaborative": [...],
  "trending": [...],
  "metadata": {
    "algorithm": "hybrid",
    "version": "2.0"
  }
}
```

#### –ù–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
```typescript
// –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
GET /api/achievements/categories
GET /api/achievements/progress
POST /api/achievements/unlock

// –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å—Ç–µ–π–∫–∏–Ω–≥–∞
GET /api/staking/pools
POST /api/staking/stake
POST /api/staking/compound
GET /api/staking/analytics

// NFT —Ä—ã–Ω–æ–∫
GET /api/nft/marketplace/stats
GET /api/nft/marketplace/filters
POST /api/nft/marketplace/bid
```

### 2. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

#### –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã
```sql
-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
CREATE TABLE achievements (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name VARCHAR(255) NOT NULL,
  description TEXT,
  icon VARCHAR(10),
  category VARCHAR(50) NOT NULL,
  rarity VARCHAR(20) NOT NULL DEFAULT 'common',
  type VARCHAR(20) NOT NULL DEFAULT 'single',
  progress_max INTEGER DEFAULT 1,
  reward_type VARCHAR(20),
  reward_amount DECIMAL(18,8),
  created_at TIMESTAMP DEFAULT NOW()
);

-- –ü—Ä–æ–≥—Ä–µ—Å—Å –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
CREATE TABLE user_achievements (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id),
  achievement_id UUID REFERENCES achievements(id),
  progress INTEGER DEFAULT 0,
  unlocked BOOLEAN DEFAULT FALSE,
  unlocked_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW()
);

-- –°—Ç–µ–π–∫–∏–Ω–≥
CREATE TABLE staking_pools (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name VARCHAR(100) NOT NULL,
  type VARCHAR(20) NOT NULL,
  apy DECIMAL(10,4) NOT NULL,
  min_amount DECIMAL(18,8) NOT NULL,
  max_amount DECIMAL(18,8),
  duration_days INTEGER,
  total_staked DECIMAL(18,8) DEFAULT 0,
  total_stakers INTEGER DEFAULT 0,
  created_at TIMESTAMP DEFAULT NOW()
);

-- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å—Ç–µ–π–∫–∏–Ω–≥–∞
CREATE TABLE staking_transactions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id),
  pool_id UUID REFERENCES staking_pools(id),
  amount DECIMAL(18,8) NOT NULL,
  type VARCHAR(20) NOT NULL,
  start_date TIMESTAMP NOT NULL,
  end_date TIMESTAMP,
  rewards DECIMAL(18,8) DEFAULT 0,
  compound_frequency VARCHAR(20),
  created_at TIMESTAMP DEFAULT NOW()
);

-- NFT –∫–æ–ª–ª–µ–∫—Ü–∏–∏
CREATE TABLE nft_collections (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name VARCHAR(255) NOT NULL,
  description TEXT,
  image_url VARCHAR(500),
  total_supply INTEGER,
  minted INTEGER DEFAULT 0,
  floor_price DECIMAL(18,8),
  total_volume DECIMAL(18,8) DEFAULT 0,
  category VARCHAR(50),
  created_at TIMESTAMP DEFAULT NOW()
);

-- NFT
CREATE TABLE nfts (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  collection_id UUID REFERENCES nft_collections(id),
  token_id VARCHAR(100) UNIQUE NOT NULL,
  name VARCHAR(255) NOT NULL,
  description TEXT,
  image_url VARCHAR(500),
  audio_url VARCHAR(500),
  video_url VARCHAR(500),
  price DECIMAL(18,8),
  currency VARCHAR(10) DEFAULT 'SOL',
  owner_id UUID REFERENCES users(id),
  creator_id UUID REFERENCES users(id),
  category VARCHAR(20),
  rarity VARCHAR(20) DEFAULT 'common',
  sale_type VARCHAR(20) DEFAULT 'buy-now',
  royalties DECIMAL(5,2) DEFAULT 10,
  total_sales INTEGER DEFAULT 0,
  views INTEGER DEFAULT 0,
  likes INTEGER DEFAULT 0,
  metadata JSONB,
  is_listed BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

#### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
```sql
-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –ø–æ–ª—è)
ALTER TABLE users ADD COLUMN level INTEGER DEFAULT 1;
ALTER TABLE users ADD COLUMN experience INTEGER DEFAULT 0;
ALTER TABLE users ADD COLUMN next_level_exp INTEGER DEFAULT 100;
ALTER TABLE users ADD COLUMN total_tokens DECIMAL(18,8) DEFAULT 0;
ALTER TABLE users ADD COLUMN streak_days INTEGER DEFAULT 0;
ALTER TABLE users ADD COLUMN longest_streak INTEGER DEFAULT 0;
ALTER TABLE users ADD COLUMN seasonal_points INTEGER DEFAULT 0;
ALTER TABLE users ADD COLUMN nft_collected INTEGER DEFAULT 0;
ALTER TABLE users ADD COLUMN multiplier_active DECIMAL(5,2) DEFAULT 1.0;
ALTER TABLE users ADD COLUMN last_activity TIMESTAMP;

-- –¢–∞–±–ª–∏—Ü–∞ —Ç—Ä–µ–∫–æ–≤ (–¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –ø–æ–ª—è)
ALTER TABLE tracks ADD COLUMN bpm INTEGER;
ALTER TABLE tracks ADD COLUMN energy DECIMAL(3,2);
ALTER TABLE tracks ADD COLUMN danceability DECIMAL(3,2);
ALTER TABLE tracks ADD COLUMN valence DECIMAL(3,2);
ALTER TABLE tracks ADD COLUMN acousticness DECIMAL(3,2);
ALTER TABLE tracks ADD COLUMN instrumentalness DECIMAL(3,2);
ALTER TABLE tracks ADD COLUMN liveness DECIMAL(3,2);
ALTER TABLE tracks ADD COLUMN speechiness DECIMAL(3,2);
```

### 3. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

#### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ç–µ–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
```typescript
// –°—Ç–∞—Ä—ã–π –∏–º–ø–æ—Ä—Ç
import { RecommendationEngine } from '@/components/recommendations'

// –ù–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç
import { RecommendationEngine, useRecommendations } from '@/components/recommendations'
import { RecommendationProvider } from '@/contexts/recommendation-context'

// –°—Ç–∞—Ä—ã–µ –ø—Ä–æ–ø—Å—ã
<RecommendationEngine userId="user123" />

// –ù–æ–≤—ã–µ –ø—Ä–æ–ø—Å—ã
<RecommendationEngine
  userId="user123"
  onTrackSelect={handleTrackSelect}
  refreshInterval={300000}
  showAnalytics={true}
/>
```

#### –°–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
```typescript
// –°—Ç–∞—Ä—ã–π –∏–º–ø–æ—Ä—Ç
import { Achievements } from '@/components/achievements'

// –ù–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç
import { AchievementsSystem, useAchievements } from '@/components/rewards/achievements-system'
import { AchievementProvider } from '@/contexts/achievement-context'

// –°—Ç–∞—Ä—ã–µ –ø—Ä–æ–ø—Å—ã
<Achievements userId="user123" />

// –ù–æ–≤—ã–µ –ø—Ä–æ–ø—Å—ã
<AchievementsSystem
  userId="user123"
  showProgress={true}
  compact={false}
  onAchievementUnlock={handleUnlock}
/>
```

#### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å—Ç–µ–π–∫–∏–Ω–≥–∞
```typescript
// –°—Ç–∞—Ä—ã–π –∏–º–ø–æ—Ä—Ç
import { Staking } from '@/components/staking'

// –ù–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç
import { StakingInterface, useStakingCalculator } from '@/components/staking/staking-interface'
import { StakingProvider } from '@/contexts/staking-context'

// –°—Ç–∞—Ä—ã–µ –ø—Ä–æ–ø—Å—ã
<Staking userId="user123" />

// –ù–æ–≤—ã–µ –ø—Ä–æ–ø—Å—ã
<StakingInterface
  userId="user123"
  defaultTab="fixed"
  showAnalytics={true}
  onStake={handleStake}
  onUnstake={handleUnstake}
/>
```

#### NFT —Ä—ã–Ω–æ–∫
```typescript
// –°—Ç–∞—Ä—ã–π –∏–º–ø–æ—Ä—Ç
import { NFTMarket } from '@/components/nft'

// –ù–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç
import { NFTMarketplace, useNFTFilters } from '@/components/nft/nft-marketplace'
import { NFTProvider } from '@/contexts/nft-context'

// –°—Ç–∞—Ä—ã–µ –ø—Ä–æ–ø—Å—ã
<NFTMarket userId="user123" />

// –ù–æ–≤—ã–µ –ø—Ä–æ–ø—Å—ã
<NFTMarketplace
  userId="user123"
  defaultView="grid"
  showFilters={true}
  showAnalytics={true}
  onNFTSelect={handleSelect}
  onPurchase={handlePurchase}
/>
```

## üîß –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### package.json
```json
{
  "dependencies": {
    "normaldance": "^0.0.0",
    "@solana/web3.js": "^1.78.0",
    "@solana/wallet-adapter-base": "^0.9.23",
    "@solana/wallet-adapter-react": "^0.15.35",
    "framer-motion": "^10.16.4",
    "recharts": "^2.8.0",
    "zustand": "^4.4.7"
  },
  "scripts": {
    "dev": "tsx watch src/server.ts",
    "build": "tsx build",
    "start": "tsx start",
    "test": "jest",
    "test:mobile": "cd mobile-app && npm test",
    "lint": "eslint . --ext .ts,.tsx",
    "type-check": "tsc --noEmit",
    "db:migrate": "prisma migrate dev",
    "db:seed": "tsx prisma/seed.ts",
    "db:studio": "prisma studio"
  }
}
```

### prisma/schema.pris–º–∞
```prisma
// –ù–æ–≤—ã–µ –º–æ–¥–µ–ª–∏
model Achievement {
  id          String   @id @default(cuid())
  name        String
  description String?
  icon        String?
  category    String
  rarity      String   @default("common")
  type        String   @default("single")
  progressMax Int      @default(1)
  rewardType  String?
  rewardAmount Decimal?
  createdAt   DateTime @default(now())
  
  userAchievements UserAchievement[]
}

model UserAchievement {
  id           String   @id @default(cuid())
  userId       String
  achievementId String
  progress     Int      @default(0)
  unlocked     Boolean  @default(false)
  unlockedAt   DateTime?
  createdAt    DateTime @default(now())
  
  user       User       @relation(fields: [userId], references: [id], onDelete: Cascade)
  achievement Achievement @relation(fields: [achievementId], references: [id], onDelete: Cascade)
  
  @@unique([userId, achievementId])
}

model StakingPool {
  id            String   @id @default(cuid())
  name          String
  type          String
  apy           Decimal
  minAmount     Decimal
  maxAmount     Decimal?
  durationDays  Int?
  totalStaked   Decimal  @default(0)
  totalStakers  Int      @default(0)
  createdAt     DateTime @default(now())
  
  stakingTransactions StakingTransaction[]
}

model StakingTransaction {
  id               String   @id @default(cuid())
  userId           String
  poolId           String
  amount           Decimal
  type             String
  startDate        DateTime
  endDate          DateTime?
  rewards          Decimal  @default(0)
  compoundFrequency String?
  createdAt        DateTime @default(now())
  
  user User        @relation(fields: [userId], references: [id], onDelete: Cascade)
  pool StakingPool @relation(fields: [poolId], references: [id], onDelete: Cascade)
}

model NFTCollection {
  id            String   @id @default(cuid())
  name          String
  description   String?
  imageUrl      String?
  totalSupply   Int?
  minted        Int      @default(0)
  floorPrice    Decimal?
  totalVolume   Decimal  @default(0)
  category      String?
  createdAt     DateTime @default(now())
  
  nfts NFT[]
}

model NFT {
  id            String   @id @default(cuid())
  collectionId  String
  tokenId       String   @unique
  name          String
  description   String?
  imageUrl      String?
  audioUrl      String?
  videoUrl      String?
  price         Decimal?
  currency      String   @default("SOL")
  ownerId       String
  creatorId     String
  category      String
  rarity        String   @default("common")
  saleType      String   @default("buy-now")
  royalties     Decimal  @default(10)
  totalSales    Int      @default(0)
  views         Int      @default(0)
  likes         Int      @default(0)
  metadata      Json?
  isListed      Boolean  @default(true)
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  
  collection NFTCollection @relation(fields: [collectionId], references: [id], onDelete: Cascade)
  owner      User          @relation(fields: [ownerId], references: [id], onDelete: Cascade)
  creator    User          @relation(fields: [creatorId], references: [id], onDelete: Cascade)
}
```

### tsconfig.json
```json
{
  "compilerOptions": {
    "target": "ES2022",
    "lib": ["dom", "dom.iterable", "ES2022"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"],
      "@/components/*": ["./src/components/*"],
      "@/lib/*": ["./src/lib/*"],
      "@/hooks/*": ["./src/hooks/*"],
      "@/types/*": ["./src/types/*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules"]
}
```

## üìä –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ API

### –ù–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
```typescript
// GET /api/recommendations/personal
{
  "tracks": [...],
  "algorithm": "collaborative_filtering",
  "confidence": 0.85
}

// GET /api/recommendations/collaborative
{
  "tracks": [...],
  "similarUsers": 1234,
  "explanation": "Users with similar taste also listened to..."
}

// GET /api/recommendations/trending
{
  "tracks": [...],
  "timeframe": "week",
  "category": "all"
}
```

#### –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è
```typescript
// GET /api/achievements/categories
{
  "categories": ["listening", "social", "uploading", "special", "streak", "milestone", "seasonal"]
}

// GET /api/achievements/progress
{
  "achievements": [...],
  "stats": {
    "total": 50,
    "unlocked": 15,
    "inProgress": 20,
    "locked": 15
  }
}

// POST /api/achievements/unlock
{
  "achievementId": "uuid",
  "progress": 1,
  "unlocked": true
}
```

#### –°—Ç–µ–π–∫–∏–Ω–≥
```typescript
// GET /api/staking/pools
{
  "pools": [
    {
      "id": "uuid",
      "name": "Fixed Staking",
      "type": "fixed",
      "apy": 15,
      "minAmount": 1000,
      "maxAmount": 100000,
      "duration": 30,
      "totalStaked": 500000,
      "totalStakers": 100,
      "myStake": 5000,
      "myRewards": 62.5
    }
  ]
}

// POST /api/staking/stake
{
  "poolId": "uuid",
  "amount": 1000,
  "duration": 30,
  "autoCompound": true
}

// GET /api/staking/analytics
{
  "totalStaked": 1000000,
  "totalRewards": 50000,
  "apyHistory": [...],
  "userRank": 123,
  "totalUsers": 1000
}
```

#### NFT —Ä—ã–Ω–æ–∫
```typescript
// GET /api/nft/marketplace/stats
{
  "totalVolume": 1000000,
  "totalSales": 5000,
  "activeListings": 10000,
  "averagePrice": 200,
  "topCollections": [...]
}

// GET /api/nft/marketplace/filters
{
  "categories": ["audio", "video", "image", "collection", "event"],
  "rarities": ["common", "rare", "epic", "legendary", "mythic"],
  "priceRanges": [[0, 100], [100, 1000], [1000, 10000]]
}

// POST /api/nft/marketplace/bid
{
  "nftId": "uuid",
  "amount": 1.5,
  "message": "Great artwork!"
}
```

### –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
```typescript
// –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç
POST /api/auth/login
{
  "email": "user@example.com",
  "password": "password"
}

// –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç
POST /api/auth/login
{
  "email": "user@example.com",
  "password": "password",
  "2faToken": "optional"
}
```

#### –¢—Ä–µ–∫–∏
```typescript
// –°—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç
GET /api/tracks
{
  "tracks": [...],
  "total": 100
}

// –ù–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç
GET /api/tracks
{
  "tracks": [...],
  "pagination": {
    "page": 1,
    "limit": 20,
    "total": 100,
    "totalPages": 5
  },
  "filters": {
    "genre": "electronic",
    "sortBy": "popularity"
  }
}
```

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### –®–∞–≥ 1: –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
npx prisma migrate dev --name upgrade-to-0.0.0

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
npx prisma migrate deploy

// –ò–ª–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npx prisma migrate dev
```

### –®–∞–≥ 2: –ó–∞–ø—É—Å–∫ —Å–∏–¥–µ—Ä–æ–≤ –¥–ª—è –Ω–∞—á–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```bash
# –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π
npm run db:seed:achievements

# –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü —Å—Ç–µ–π–∫–∏–Ω–≥–∞
npm run db:seed:staking

# –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü NFT
npm run db:seed:nft
```

### –®–∞–≥ 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
```typescript
// –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
async function migrateUserData() {
  const users = await prisma.user.findMany()
  
  for (const user of users) {
    // –†–∞—Å—á–µ—Ç —É—Ä–æ–≤–Ω—è –∏ –æ–ø—ã—Ç–∞
    const level = Math.floor(user.totalTokens / 1000) + 1
    const experience = (user.totalTokens % 1000) * 100
    
    await prisma.user.update({
      where: { id: user.id },
      data: {
        level,
        experience,
        nextLevelExp: level * 1000
      }
    })
  }
}

// –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Ç—Ä–µ–∫–æ–≤
async function migrateTrackData() {
  const tracks = await prisma.track.findMany()
  
  for (const track of tracks) {
    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∞—É–¥–∏–æ
    const audioFeatures = await generateAudioFeatures(track.audioUrl)
    
    await prisma.track.update({
      where: { id: track.id },
      data: {
        bpm: audioFeatures.bpm,
        energy: audioFeatures.energy,
        danceability: audioFeatures.danceability,
        valence: audioFeatures.valence,
        acousticness: audioFeatures.acousticness,
        instrumentalness: audioFeatures.instrumentalness,
        liveness: audioFeatures.liveness,
        speechiness: audioFeatures.speechiness
      }
    })
  }
}
```

## ‚ö° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤
```typescript
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏
const tracks = await prisma.track.findMany({
  skip: (page - 1) * limit,
  take: limit,
  include: {
    artist: true,
    genre: true
  }
})

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
const cachedTracks = await cache.get(`tracks:${page}:${limit}`)
if (cachedTracks) {
  return cachedTracks
}

const tracks = await prisma.track.findMany({...})
await cache.set(`tracks:${page}:${limit}`, tracks, 3600) // 1 —á–∞—Å
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
```typescript
// –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
const RecommendationEngine = dynamic(
  () => import('@/components/recommendations/recommendation-engine'),
  { ssr: false }
)

// Code splitting
const StakingInterface = lazy(() => import('@/components/staking/staking-interface'))
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
```typescript
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Next.js Image –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
import Image from 'next/image'

function NFTCard({ nft }) {
  return (
    <div className="relative">
      <Image
        src={nft.imageUrl}
        alt={nft.name}
        width={300}
        height={300}
        priority={false}
        placeholder="blur"
        blurDataURL="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQ..."
      />
    </div>
  )
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã
```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
npm test

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
npm test -- --testPathPattern="recommendation-engine.test.ts"

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
npm test -- --coverage
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
```bash
# –ó–∞–ø—É—Å–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
npm run test:integration

# –ó–∞–øËØï —Ç–µ—Å—Ç–æ–≤ API
npm run test:api

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
npm run test:database
```

### E2E —Ç–µ—Å—Ç—ã
```bash
# –ó–∞–ø—É—Å–∫ E2E —Ç–µ—Å—Ç–æ–≤
npm run test:e2e

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
npm run test:e2e:browser

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
npm run test:e2e:mobile
```

## üîÑ –û—Ç–∫–∞—Ç

### –ï—Å–ª–∏ –º–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å —Å –æ—à–∏–±–∫–æ–π

#### –®–∞–≥ 1: –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```bash
# –û—Ç–∫–∞—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–π –º–∏–≥—Ä–∞—Ü–∏–∏
npx prisma migrate reset

# –ò–ª–∏ –æ—Ç–∫–∞—Ç –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
npx prisma migrate resolve --applied 20250830120000_initial
```

#### –®–∞–≥ 2: –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
psql -h localhost -U normaldance -d normaldance < backup_v1.0.0.sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
tar -xzf backup_v0.0.0_files.tar.gz
```

#### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
```bash
# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
curl http://localhost:3000/api/health
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–∫–∞—Ç
```typescript
// –°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç–∫–∞—Ç–∞
async function rollbackMigration() {
  try {
    // –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–π
    await exec('npx prisma migrate reset --force')
    
    // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
    await exec('psql -h localhost -U normaldance -d normaldance < backup.sql')
    
    // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    await exec('npm run restart')
    
    console.log('–û—Ç–∫–∞—Ç —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω')
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –æ—Ç–∫–∞—Ç–∞:', error)
    process.exit(1)
  }
}
```

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [FAQ](../faq.md)
2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ [–≤–∏–¥–µ–æ —Ç—É—Ç–æ—Ä–∏–∞–ª—ã](../video-tutorials.md)
3. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ [—á–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏](https://discord.gg/normaldance)
4. –°–æ–∑–¥–∞–π—Ç–µ [issue –Ω–∞ GitHub](https://github.com/normaldance/normaldance/issues)

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ API](../api.md)
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é](../../DEPLOY.md)
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é](../testing.md)
- [–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏](../security-testing.md)

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 0.0.0  
**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-09-01  
**–ê–≤—Ç–æ—Ä:** NormalDance Team