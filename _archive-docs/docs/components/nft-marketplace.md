# üé® NFT –†—ã–Ω–æ–∫ - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

## –û–±–∑–æ—Ä

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `NFTMarketplace` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å –¥–ª—è –ø–æ–∫—É–ø–∫–∏, –ø—Ä–æ–¥–∞–∂–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º—É–∑—ã–∫–∞–ª—å–Ω—ã–º–∏ NFT —Å –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏, –∞—É–∫—Ü–∏–æ–Ω–∞–º–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π.

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- **–ú—É–ª—å—Ç–∏-–º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å** –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (OpenSea, Rarible, Foundation)
- **–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã** –ø–æ —Ü–µ–Ω–µ, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, —Ä–µ–¥–∫–æ—Å—Ç–∏, –¥–∞—Ç–µ
- **–ê—É–∫—Ü–∏–æ–Ω—ã** —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–∞—Å—á–µ—Ç–æ–º –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –ø—Ä–∏—Ä–æ—Å—Ç–∞
- **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä—ã–Ω–∫–∞** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ —Ç—Ä–µ–Ω–¥–æ–≤
- **–ü–æ—Ä—Ç—Ñ–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** —Å –æ–±—â–µ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é –∏ –∏—Å—Ç–æ—Ä–∏–µ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- **–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä NFT** —Å –∞—É–¥–∏–æ –ø–ª–µ–µ—Ä–æ–º
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–æ—à–µ–ª—å–∫–∞–º–∏** –¥–ª—è –ø–æ–∫—É–ø–æ–∫ –∏ –ø—Ä–æ–¥–∞–∂

### –¢–∏–ø—ã NFT
1. **üéµ –ê—É–¥–∏–æ NFT** - –º—É–∑—ã–∫–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–∫–∏ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏
2. **üé¨ –í–∏–¥–µ–æ NFT** - –º—É–∑—ã–∫–∞–ª—å–Ω—ã–µ –≤–∏–¥–µ–æ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
3. **üñºÔ∏è –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è NFT** - –æ–±–ª–æ–∂–∫–∏ –∏ –∞—Ä—Ç –¥–ª—è –º—É–∑—ã–∫–∏
4. **üé≠ –ö–æ–ª–ª–µ–∫—Ü–∏–∏ NFT** - –Ω–∞–±–æ—Ä—ã —Å–≤—è–∑–∞–Ω–Ω—ã—Ö NFT
5. **üé™ –°–æ–±—ã—Ç–∏—è NFT** - –±–∏–ª–µ—Ç—ã –Ω–∞ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è –∏ –∫–æ–Ω—Ü–µ—Ä—Ç—ã

## API –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

### Props
```typescript
interface NFTMarketplaceProps {
  className?: string
  userId?: string
  defaultView?: 'grid' | 'list'
  showFilters?: boolean
  showAnalytics?: boolean
  compact?: boolean
  onNFTSelect?: (nft: NFT) => void
  onPurchase?: (nft: NFT, price: number) => void
  onSale?: (nft: NFT, price: number) => void
}
```

### –°–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
```typescript
interface NFT {
  id: string
  tokenId: string
  name: string
  description: string
  imageUrl: string
  audioUrl?: string
  videoUrl?: string
  price: number
  currency: 'SOL' | 'NDT' | 'USD'
  owner: string
  creator: string
  category: 'audio' | 'video' | 'image' | 'collection' | 'event'
  rarity: 'common' | 'rare' | 'epic' | 'legendary' | 'mythic'
  attributes: Array<{
    trait_type: string
    value: string | number
  }>
  metadata: {
    bpm?: number
    genre?: string
    duration?: number
    releaseDate?: string
    platform?: string
  }
  saleType: 'buy-now' | 'auction' | 'offer'
  auction?: {
    currentBid: number
    endTime: string
    minIncrement: number
    bids: Array<{
      bidder: string
      amount: number
      timestamp: string
    }>
  }
  royalties: number // –ø—Ä–æ—Ü–µ–Ω—Ç —Ä–æ—è–ª—Ç–∏
  totalSales: number
  views: number
  likes: number
  createdAt: string
  updatedAt: string
  isListed: boolean
  collection?: {
    id: string
    name: string
    description: string
    floorPrice: number
  }
}

interface NFTCollection {
  id: string
  name: string
  description: string
  imageUrl: string
  totalSupply: number
  minted: number
  floorPrice: number
  totalVolume: number
  owners: number
  averagePrice: number
  category: string
  rarityDistribution: Record<string, number>
  topHolders: Array<{
    address: string
    amount: number
    percentage: number
  }>
}

interface MarketStats {
  totalVolume: number
  totalSales: number
  activeListings: number
  averagePrice: number
  topCollections: NFTCollection[]
  priceHistory: Array<{
    timestamp: string
    price: number
    volume: number
  }>
  categoryStats: Record<string, {
    volume: number
    sales: number
    averagePrice: number
  }>
}
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
```tsx
import { NFTMarketplace } from '@/components/nft/nft-marketplace'

function MyComponent() {
  return (
    <div className="p-6">
      <h2>NFT –†—ã–Ω–æ–∫</h2>
      <NFTMarketplace />
    </div>
  )
}
```

### –° –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –ø—Ä–æ–ø—Å–∞–º–∏
```tsx
import { NFTMarketplace } from '@/components/nft/nft-marketplace'

function MyComponent() {
  const handleNFTSelect = (nft: NFT) => {
    console.log('–í—ã–±—Ä–∞–Ω NFT:', nft)
    // –ª–æ–≥–∏–∫–∞ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞
  }

  const handlePurchase = async (nft: NFT, price: number) => {
    console.log('–ü–æ–∫—É–ø–∫–∞ NFT:', nft, price)
    // –ª–æ–≥–∏–∫–∞ –ø–æ–∫—É–ø–∫–∏
  }

  return (
    <NFTMarketplace
      userId="user123"
      defaultView="grid"
      showFilters={true}
      showAnalytics={true}
      onNFTSelect={handleNFTSelect}
      onPurchase={handlePurchase}
      className="custom-styling"
    />
  )
}
```

### –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ä–µ–∂–∏–º
```tsx
import { NFTMarketplace } from '@/components/nft/nft-marketplace'

function Sidebar() {
  return (
    <div className="w-80">
      <NFTMarketplace
        compact={true}
        defaultView="list"
        showFilters={false}
      />
    </div>
  )
}
```

## –ú–µ—Ç–æ–¥—ã

### getNFTs()
–ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ NFT —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π.

```typescript
const nfts = await getNFTs(filters)
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
```typescript
interface NFTFilters {
  category?: string
  rarity?: string
  priceRange?: [number, number]
  sortBy?: 'price' | 'date' | 'popularity' | 'rarity'
  sortOrder?: 'asc' | 'desc'
  search?: string
  collectionId?: string
  creator?: string
  owner?: string
  saleType?: 'buy-now' | 'auction' | 'offer'
  limit?: number
  offset?: number
}
```

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Promise<NFT[]>`

### getMarketStats()
–ü–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ä—ã–Ω–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

```typescript
const stats = await getMarketStats()
```

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Promise<MarketStats>`

### placeBid()
–†–∞–∑–º–µ—â–∞–µ—Ç —Å—Ç–∞–≤–∫—É –Ω–∞ –∞—É–∫—Ü–∏–æ–Ω–µ.

```typescript
const result = await placeBid(auctionId, amount, userId)
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `auctionId: string` - ID –∞—É–∫—Ü–∏–æ–Ω–∞
- `amount: number` - –°—É–º–º–∞ —Å—Ç–∞–≤–∫–∏
- `userId: string` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Promise<{ success: boolean; transaction?: string }>`
```

### listNFT()
–†–∞–∑–º–µ—â–∞–µ—Ç NFT –Ω–∞ –ø—Ä–æ–¥–∞–∂—É.

```typescript
const result = await listNFT(nftId, price, saleType, userId)
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `nftId: string` - ID NFT
- `price: number` - –¶–µ–Ω–∞ –ø—Ä–æ–¥–∞–∂–∏
- `saleType: 'buy-now' | 'auction' | 'offer'` - –¢–∏–ø –ø—Ä–æ–¥–∞–∂–∏
- `userId: string` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:** `Promise<{ success: boolean; transaction?: string }>`
```

## –°—Ç–∏–ª–∏

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Tailwind CSS –∫–ª–∞—Å—Å—ã –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏. –û—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã:
- `.nft-marketplace` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- `.nft-card` - –∫–∞—Ä—Ç–æ—á–∫–∞ NFT
- `.nft-filters` - –ø–∞–Ω–µ–ª—å —Ñ–∏–ª—å—Ç—Ä–æ–≤
- `.nft-analytics` - –±–ª–æ–∫ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- `.nft-auction` - –±–ª–æ–∫ –∞—É–∫—Ü–∏–æ–Ω–∞

## –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–æ—à–µ–ª—å–∫–æ–º
```tsx
import { NFTMarketplace } from '@/components/nft/nft-marketplace'
import { useWallet } from '@/components/wallet/wallet-adapter'

function NFTPage() {
  const { connected, balance, publicKey } = useWallet()
  const [userId, setUserId] = useState<string>()

  useEffect(() => {
    if (publicKey) {
      setUserId(publicKey.toString())
    }
  }, [publicKey])

  if (!connected) {
    return (
      <div className="text-center p-8">
        <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –∫–æ—à–µ–ª–µ–∫ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è NFT —Ä—ã–Ω–∫–∞</p>
        <button onClick={connectWallet}>–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫</button>
      </div>
    )
  }

  return (
    <NFTMarketplace
      userId={userId}
      onPurchase={async (nft, price) => {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞
        if (balance < price) {
          throw new Error('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤')
        }

        // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
        const transaction = await preparePurchaseTransaction(nft, price)
        
        // –ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
        const signature = await signTransaction(transaction)
        
        // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
        const result = await sendTransaction(signature)
        
        if (result.success) {
          // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
          updateNFTData(nft.id)
          updateBalance()
        }
      }}
    />
  )
}
```

### –ö–∞—Å—Ç–æ–º–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä NFT
```tsx
import { NFTMarketplace, useNFTFilters } from '@/components/nft/nft-marketplace'

function CustomNFTFilter() {
  const { 
    filters, 
    setFilters, 
    categories, 
    rarities, 
    collections 
  } = useNFTFilters()

  return (
    <div className="space-y-4">
      <div>
        <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
        <select 
          value={filters.category || ''}
          onChange={(e) => setFilters({ ...filters, category: e.target.value })}
        >
          <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
          {categories.map(category => (
            <option key={category} value={category}>{category}</option>
          ))}
        </select>
      </div>

      <div>
        <label>–†–µ–¥–∫–æ—Å—Ç—å</label>
        <select 
          value={filters.rarity || ''}
          onChange={(e) => setFilters({ ...filters, rarity: e.target.value })}
        >
          <option value="">–í—Å–µ —Ä–µ–¥–∫–æ—Å—Ç–∏</option>
          {rarities.map(rarity => (
            <option key={rarity} value={rarity}>{rarity}</option>
          ))}
        </select>
      </div>

      <div>
        <label>–¶–µ–Ω–∞ (SOL)</label>
        <div className="flex gap-2">
          <input
            type="number"
            placeholder="–û—Ç"
            value={filters.priceRange?.[0] || ''}
            onChange={(e) => setFilters({
              ...filters,
              priceRange: [Number(e.target.value), filters.priceRange?.[1] || 0]
            })}
          />
          <input
            type="number"
            placeholder="–î–æ"
            value={filters.priceRange?.[1] || ''}
            onChange={(e) => setFilters({
              ...filters,
              priceRange: [filters.priceRange?.[0] || 0, Number(e.target.value)]
            })}
          />
        </div>
      </div>

      <div>
        <label>–ö–æ–ª–ª–µ–∫—Ü–∏—è</label>
        <select 
          value={filters.collectionId || ''}
          onChange={(e) => setFilters({ ...filters, collectionId: e.target.value })}
        >
          <option value="">–í—Å–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏</option>
          {collections.map(collection => (
            <option key={collection.id} value={collection.id}>
              {collection.name}
            </option>
          ))}
        </select>
      </div>
    </div>
  )
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—É–∫—Ü–∏–æ–Ω–æ–≤
```tsx
import { NFTMarketplace } from '@/components/nft/nft-marketplace'
import { toast } from 'react-hot-toast'

function AuctionPage() {
  const handleBid = async (nft: NFT, amount: number) => {
    try {
      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞
      const balance = await getBalance('SOL')
      if (balance < amount) {
        throw new Error('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ SOL –¥–ª—è —Å—Ç–∞–≤–∫–∏')
      }

      // –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –ø—Ä–∏—Ä–æ—Å—Ç–∞
      if (nft.auction && amount < nft.auction.currentBid + nft.auction.minIncrement) {
        throw new Error(`–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ç–∞–≤–∫–∞: ${nft.auction.currentBid + nft.auction.minIncrement} SOL`)
      }

      // –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
      const transaction = await prepareBidTransaction(nft.id, amount)
      
      // –ü–æ–¥–ø–∏—Å–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
      const signature = await signTransaction(transaction)
      
      // –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
      const result = await sendTransaction(signature)
      
      if (result.success) {
        toast.success(`‚úÖ –°—Ç–∞–≤–∫–∞ ${amount} SOL —É—Å–ø–µ—à–Ω–æ —Ä–∞–∑–º–µ—â–µ–Ω–∞!`)
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
        updateAuctionData(nft.id)
        updateBalance()
      } else {
        throw new Error(result.error)
      }
    } catch (error) {
      toast.error(`‚ùå –û—à–∏–±–∫–∞ —Å—Ç–∞–≤–∫–∏: ${error.message}`)
    }
  }

  return (
    <NFTMarketplace
      onPurchase={handleBid}
      showFilters={true}
      showAnalytics={true}
    />
  )
}
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã
```tsx
import { render, screen, fireEvent, waitFor } from '@testing-library/react'
import { NFTMarketplace } from '@/components/nft/nft-marketplace'

describe('NFTMarketplace', () => {
  const mockNFTs = [
    {
      id: '1',
      tokenId: '123',
      name: 'Neon Nights',
      description: '–°–∏–Ω—Ç–≤–µ–π–≤ —Ç—Ä–µ–∫',
      imageUrl: '/nft1.jpg',
      price: 1.5,
      currency: 'SOL',
      owner: 'user1',
      creator: 'artist1',
      category: 'audio',
      rarity: 'rare',
      saleType: 'buy-now',
      royalties: 10,
      totalSales: 5,
      views: 100,
      likes: 20,
      createdAt: '2025-01-01',
      isListed: true
    }
  ]

  beforeEach(() => {
    jest.spyOn(window, 'fetch').mockImplementationOnce(() =>
      Promise.resolve({
        json: () => Promise.resolve(mockNFTs)
      } as Response)
    )
  })

  it('renders NFT cards', async () => {
    render(<NFTMarketplace />)
    
    await waitFor(() => {
      expect(screen.getByText('Neon Nights')).toBeInTheDocument()
      expect(screen.getByText('1.5 SOL')).toBeInTheDocument()
    })
  })

  it('filters NFT by category', async () => {
    render(<NFTMarketplace />)
    
    await waitFor(() => {
      const categoryFilter = screen.getByLabelText('–ö–∞—Ç–µ–≥–æ—Ä–∏—è')
      fireEvent.change(categoryFilter, { target: { value: 'audio' } })
    })
    
    expect(screen.getByText('Neon Nights')).toBeInTheDocument()
  })

  it('shows NFT preview', async () => {
    render(<NFTMarketplace />)
    
    await waitFor(() => {
      const nftCard = screen.getByText('Neon Nights').closest('.nft-card')
      fireEvent.click(nftCard!)
    })
    
    expect(screen.getByText('–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä NFT')).toBeInTheDocument()
  })

  it('handles purchase flow', async () => {
    render(<NFTMarketplace />)
    
    await waitFor(() => {
      const buyButton = screen.getByRole('button', { name: /–∫—É–ø–∏—Ç—å/i })
      fireEvent.click(buyButton)
    })
    
    expect(screen.getByText('–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–∫—É–ø–∫–∏')).toBeInTheDocument()
  })
})
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
```tsx
import { render, screen, waitFor } from '@testing-library/react'
import { NFTMarketplace } from '@/components/nft/nft-marketplace'
import { mockWallet } from '__mocks__/wallet'

describe('NFTMarketplace Integration', () => {
  beforeEach(() => {
    // –ú–æ–∫ API –≤—ã–∑–æ–≤–æ–≤
    jest.spyOn(window, 'fetch')
      .mockImplementationOnce(() =>
        Promise.resolve({
          json: () => Promise.resolve(mockNFTs)
        } as Response)
      )
      .mockImplementationOnce(() =>
        Promise.resolve({
          json: () => Promise.resolve(mockMarketStats)
        } as Response)
      )
  })

  it('displays market statistics', async () => {
    render(<NFTMarketplace showAnalytics={true} />)
    
    await waitFor(() => {
      expect(screen.getByText('–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä—ã–Ω–∫–∞')).toBeInTheDocument()
      expect(screen.getByText('–û–±—ä–µ–º —Ç–æ—Ä–≥–æ–≤')).toBeInTheDocument()
    })
  })

  it('handles NFT purchase with wallet integration', async () => {
    render(<NFTMarketplace />)
    
    // –°–∏–º—É–ª—è—Ü–∏—è –ø–æ–∫—É–ø–∫–∏
    await waitFor(() => {
      const buyButton = screen.getByRole('button', { name: /–∫—É–ø–∏—Ç—å/i })
      fireEvent.click(buyButton)
    })
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–∑–æ–≤–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞
    expect(mockWallet.signTransaction).toHaveBeenCalled()
  })
})
```

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- **–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** NFT
- **–í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è** —Å–ø–∏—Å–∫–∞ NFT
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–∞–Ω–Ω—ã—Ö –æ –∫–æ–ª–ª–µ–∫—Ü–∏—è—Ö
- **–î–µ–±–∞—É–Ω—Å–∏–Ω–≥** –ø—Ä–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- **Image optimization** –¥–ª—è –ø—Ä–µ–≤—å—é NFT

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `compact` —Ä–µ–∂–∏–º –¥–ª—è –±–æ–∫–æ–≤—ã—Ö –ø–∞–Ω–µ–ª–µ–π
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –ø–∞–≥–∏–Ω–∞—Ü–∏—é –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤ NFT
3. –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è NFT
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `React.memo` –¥–ª—è –¥–æ—á–µ—Ä–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

## –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è
1. **NFT –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ API
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∏–ª—å—Ç—Ä—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

2. **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–∫—É–ø–∫–∏ –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å –∫–æ—à–µ–ª—å–∫–∞
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ç—å –¥–æ—Å—Ç—É–ø–Ω–∞
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–º–∏—Å—Å–∏–∏ –∑–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ NFT

3. **–ê—É–∫—Ü–∏–æ–Ω—ã —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏–∫—É —Ä–∞—Å—á–µ—Ç–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –ø—Ä–∏—Ä–æ—Å—Ç–∞
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Ä–µ–º—è –æ–∫–æ–Ω—á–∞–Ω–∏—è –∞—É–∫—Ü–∏–æ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É —Å—Ç–∞–≤–æ–∫

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–¥–∫–æ—Å—Ç–∏ NFT
```typescript
const rarityConfig = {
  common: {
    color: 'gray',
    borderColor: 'border-gray-300',
    bgColor: 'bg-gray-50',
    multiplier: 1.0
  },
  rare: {
    color: 'blue',
    borderColor: 'border-blue-300',
    bgColor: 'bg-blue-50',
    multiplier: 1.5
  },
  epic: {
    color: 'purple',
    borderColor: 'border-purple-300',
    bgColor: 'bg-purple-50',
    multiplier: 2.0
  },
  legendary: {
    color: 'orange',
    borderColor: 'border-orange-300',
    bgColor: 'bg-orange-50',
    multiplier: 3.0
  },
  mythic: {
    color: 'red',
    borderColor: 'border-red-300',
    bgColor: 'bg-red-50',
    multiplier: 5.0
  }
}
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–∏—Å—Å–∏–π
```typescript
const feeConfig = {
  marketplace: {
    listing: 2.5, // 2.5% –ø—Ä–∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏–∏ –Ω–∞ –ø—Ä–æ–¥–∞–∂—É
    sale: 2.5, // 2.5% –ø—Ä–∏ –ø—Ä–æ–¥–∞–∂–µ
    auction: 1.0 // 1% –ø—Ä–∏ –∞—É–∫—Ü–∏–æ–Ω–µ
  },
  royalties: {
    default: 10, // 10% —Ä–æ—è–ª—Ç–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    creator: 8, // 8% —Å–æ–∑–¥–∞—Ç–µ–ª—é
    platform: 2 // 2% –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ
  },
  gas: {
    standard: 0.0005, // —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –∫–æ–º–∏—Å—Å–∏—è
    priority: 0.001, // –ø–æ–≤—ã—à–µ–Ω–Ω–∞—è –∫–æ–º–∏—Å—Å–∏—è
    auction: 0.002 // –∫–æ–º–∏—Å—Å–∏—è –¥–ª—è –∞—É–∫—Ü–∏–æ–Ω–æ–≤
  }
}
```

## –í–µ—Ä—Å–∏—è

**–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è:** 1.0.1

**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 2025-09-01

## –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –ø—Ä–æ–µ–∫—Ç–∞ NORMAL DANCE –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ MIT License.