# üöÄ –ü–æ—à–∞–≥–æ–≤–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é NORMAL DANCE v1.0.1

## üìã –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

NORMAL DANCE - –¥–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –º—É–∑—ã–∫–∞–ª—å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –Ω–∞ –±–∞–∑–µ Next.js 15 —Å TypeScript, Prisma ORM, WebSocket –∏ Web3 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π (Solana).

### üèóÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- **Next.js 15** - React —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Å App Router
- **TypeScript 5** - –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π JavaScript
- **Prisma** - ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **SQLite** - –õ–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- **PostgreSQL** - –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Socket.IO** - WebSocket –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- **shadcn/ui** - UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **NextAuth.js** - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **Tailwind CSS** - CSS —Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Docker** - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- **Kubernetes** - –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- **Helm** - –ü–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è Kubernetes
- **Prometheus** - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **Grafana** - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫
- **Solana** - –ë–ª–æ–∫—á–µ–π–Ω –¥–ª—è Web3 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
normaldance/
‚îú‚îÄ‚îÄ src/                    # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ app/               # Next.js App Router
‚îÇ   ‚îú‚îÄ‚îÄ components/        # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ lib/               # –£—Ç–∏–ª–∏—Ç—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ hooks/             # Custom hooks
‚îú‚îÄ‚îÄ prisma/                # –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ programs/              # Solana –ø—Ä–æ–≥—Ä–∞–º–º—ã
‚îú‚îÄ‚îÄ docker/                # Docker —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ helm/                  # Helm —á–∞—Ä—Ç—ã
‚îú‚îÄ‚îÄ monitoring/            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
‚îú‚îÄ‚îÄ k8s/                   # Kubernetes manifests
‚îî‚îÄ‚îÄ docs/                  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üîß –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- **CPU**: 4+ —è–¥–µ—Ä
- **RAM**: 8+ GB
- **HDD**: 50+ GB SSD
- **OS**: Ubuntu 20.04+ / CentOS 8+ / macOS 10.15+

### –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- **Docker** v20.10+
- **Docker Compose** v2.0+
- **Kubernetes** v1.20+
- **Helm** v3.0+
- **kubectl** v1.20+
- **Node.js** v18+
- **npm** v8+
- **Git** v2.30+

### Cloud –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
- **AWS** / **GCP** / **Azure** –¥–ª—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- **CloudFlare** / **AWS CloudFront** –¥–ª—è CDN
- **AWS RDS** / **Google Cloud SQL** –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **AWS S3** / **Google Cloud Storage** –¥–ª—è —Ñ–∞–π–ª–æ–≤

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

### –®–∞–≥ 1: –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/normaldance/normaldance.git
cd normaldance

# –°–æ–∑–¥–∞–µ–º –≤–µ—Ç–∫—É –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
git checkout -b feature/v1.0.1-deployment
```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env

# –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
nano .env
```

–°–æ–¥–µ—Ä–∂–∏–º–æ–µ `.env` —Ñ–∞–π–ª–∞:
```env
# Database
DATABASE_URL="postgresql://user:password@localhost:5432/normaldance"

# NextAuth.js
NEXTAUTH_URL="http://localhost:3000"
NEXTAUTH_SECRET="your-secret-key-here"

# Node Environment
NODE_ENV="development"

# WebSocket
SOCKET_PORT=3000

# Web3 (Solana)
SOLANA_NETWORK="devnet"
SOLANA_RPC_URL="https://api.devnet.solana.com"
WALLET_CONNECT_PROJECT_ID="your-wallet-connect-id"

# Redis (–¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è)
REDIS_URL="redis://localhost:6379"

# Filecoin (–¥–ª—è IPFS)
FILELOTUS_API_URL="https://api.filecoin.io"

# Monitoring
SENTRY_DSN="your-sentry-dsn"
GRAFANA_URL="http://localhost:3001"
PROMETHEUS_URL="http://localhost:9090"
```

### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ npm –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install -g @prisma/cli @solana/web3.js

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Prisma –∫–ª–∏–µ–Ω—Ç–∞
npm run db:generate

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
npm run db:push
```

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –ó–∞–ø—É—Å–∫ PostgreSQL —á–µ—Ä–µ–∑ Docker
docker run --name normaldance-postgres \
  -e POSTGRES_USER=normaldance \
  -e POSTGRES_PASSWORD=password \
  -e POSTGRES_DB=normaldance \
  -p 5432:5432 \
  -d postgres:14

# –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
npm run db:migrate

# –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
npm run db:seed
```

### –®–∞–≥ 5: –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev

# –ò–ª–∏ –∑–∞–ø—É—Å–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
npm run build
npm start
```

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ API
curl http://localhost:3000/api/health

# –ü—Ä–æ–≤–µ—Ä–∫–∞ WebSocket
curl -i -N -H "Connection: Upgrade" -H "Upgrade: websocket" -H "Host: localhost:3000" http://localhost:3000/api/socketio

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
npm run db:check
```

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: Docker Compose

#### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ docker-compose.yml

```yaml
version: '3.8'

services:
  app:
    build: .
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
      - DATABASE_URL=postgresql://user:password@postgres:5432/normaldance
      - REDIS_URL=redis://redis:6379
    depends_on:
      - postgres
      - redis
    volumes:
      - ./uploads:/app/uploads
    restart: unless-stopped

  postgres:
    image: postgres:14
    environment:
      - POSTGRES_USER=normaldance
      - POSTGRES_PASSWORD=password
      - POSTGRES_DB=normaldance
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"
    restart: unless-stopped

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    restart: unless-stopped

  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
      - ./ssl:/etc/nginx/ssl
    depends_on:
      - app
    restart: unless-stopped

volumes:
  postgres_data:
  redis_data:
```

#### –®–∞–≥ 2: –ó–∞–ø—É—Å–∫

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤
docker-compose build

# –ó–∞–ø servicios
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose ps
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: Kubernetes

#### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ namespace

```bash
kubectl create namespace normaldance
```

#### –®–∞–≥ 2: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ Helm —á–∞—Ä—Ç–æ–≤

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Helm —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
helm repo add normaldance https://normaldance.github.io/helm-charts
helm repo update

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
helm install normaldance normaldance/normaldance \
  --namespace normaldance \
  --set image.tag=v1.0.1 \
  --set ingress.enabled=true \
  --set ingress.hosts[0].host=api.normaldance.com \
  --set ingress.tls[0].secretName=normaldance-tls \
  --set postgresql.enabled=true \
  --set redis.enabled=true
```

#### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–æ–≤
kubectl get pods -n normaldance

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
kubectl get svc -n normaldance

# –ü—Ä–æ–≤–µ—Ä–∫–∞ ingress
kubectl get ingress -n normaldance
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: AWS ECS

#### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ ECR —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
aws ecr create-repository --repository-name normaldance --region us-east-1

# –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –≤ ECR
aws ecr get-login-password --region us-east-1 | docker login --username AWS --password-stdin 123456789012.dkr.ecr.us-east-1.amazonaws.com

# –°–±–æ—Ä–∫–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -t normaldance .
docker tag normaldance:latest 123456789012.dkr.ecr.us-east-1.amazonaws.com/normaldance:latest
docker push 123456789012.dkr.ecr.us-east-1.amazonaws.com/normaldance:latest
```

#### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ ECS –∑–∞–¥–∞—á–∏

```json
{
  "family": "normaldance",
  "networkMode": "awsvpc",
  "requiresCompatibilities": ["FARGATE"],
  "cpu": "256",
  "memory": "512",
  "executionRoleArn": "arn:aws:iam::123456789012:role/ecsTaskExecutionRole",
  "containerDefinitions": [
    {
      "name": "normaldance",
      "image": "123456789012.dkr.ecr.us-east-1.amazonaws.com/normaldance:latest",
      "portMappings": [
        {
          "containerPort": 3000,
          "protocol": "tcp"
        }
      ],
      "environment": [
        {
          "name": "NODE_ENV",
          "value": "production"
        },
        {
          "name": "DATABASE_URL",
          "value": "postgresql://user:password@rds-endpoint:5432/normaldance"
        }
      ],
      "logConfiguration": {
        "logDriver": "awslogs",
        "options": {
          "awslogs-group": "/ecs/normaldance",
          "awslogs-region": "us-east-1",
          "awslogs-stream-prefix": "ecs"
        }
      }
    }
  ]
}
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Prometheus

```yaml
# monitoring/prometheus.yml
global:
  scrape_interval: 15s

scrape_configs:
  - job_name: 'normaldance'
    static_configs:
      - targets: ['normaldance:3000']
    metrics_path: '/metrics'
    scrape_interval: 15s
    scrape_timeout: 10s
```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Grafana

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Grafana
helm repo add grafana https://grafana.github.io/helm-charts
helm install grafana grafana/grafana --namespace monitoring

# –ò–º–ø–æ—Ä—Ç –¥–∞—à–±–æ—Ä–¥–æ–≤
kubectl create -f monitoring/grafana/dashboards/
```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Alertmanager

```yaml
# monitoring/alertmanager/alertmanager.yml
global:
  smtp_smarthost: 'localhost:587'
  smtp_from: 'alerts@normaldance.com'
  smtp_auth_username: 'alerts@normaldance.com'
  smtp_auth_password: 'password'

route:
  group_by: ['alertname']
  group_wait: 10s
  group_interval: 10s
  repeat_interval: 1h
  receiver: 'web.hook'

receivers:
- name: 'web.hook'
  email_configs:
  - to: 'admin@normaldance.com'
    subject: 'NormalDance Alert: {{ .GroupLabels.alertname }}'
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL/TLS

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
openssl req -x509 -newkey rsa:4096 -keyout key.pem -out cert.pem -days 365 -nodes

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx
server {
    listen 443 ssl;
    server_name api.normaldance.com;

    ssl_certificate /etc/nginx/ssl/cert.pem;
    ssl_certificate_key /etc/nginx/ssl/key.pem;

    location / {
        proxy_pass http://app:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

```dockerfile
# Dockerfile
FROM node:18-alpine

# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–µ–∑ –ø—Ä–∞–≤ root
RUN addgroup -g 1001 -S nodejs
RUN adduser -S nextjs -u 1001

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
COPY package*.json ./
RUN npm ci --only=production

# –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
COPY . .

# –°–º–µ–Ω–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞
USER nextjs

# –≠–∫—Å–ø–æ—Ä—Ç –ø–æ—Ä—Ç–∞
EXPOSE 3000

# –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
CMD ["npm", "start"]
```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–µ–≤–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```yaml
# Kubernetes Network Policy
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: normaldance-network-policy
spec:
  podSelector:
    matchLabels:
      app: normaldance
  policyTypes:
  - Ingress
  - Egress
  ingress:
  - from:
    - namespaceSelector:
        matchLabels:
          name: normaldance
    ports:
    - protocol: TCP
      port: 3000
  egress:
  - to:
    - namespaceSelector:
        matchLabels:
          name: monitoring
    ports:
    - protocol: TCP
      port: 9090
```

## üìä –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

```yaml
# Horizontal Pod Autoscaler
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: normaldance-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: normaldance
  minReplicas: 2
  maxReplicas: 10
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 70
  - type: Resource
    resource:
      name: memory
      target:
        type: Utilization
        averageUtilization: 80
```

### –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

```yaml
# Vertical Pod Autoscaler
apiVersion: autoscaling.k8s.io/v1
kind: VerticalPodAutoscaler
metadata:
  name: normaldance-vpa
spec:
  targetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: normaldance
  updatePolicy:
    updateMode: "Auto"
  resourcePolicy:
    containerPolicies:
    - containerName: normaldance
      minAllowed:
        cpu: 500m
        memory: 1Gi
      maxAllowed:
        cpu: 2000m
        memory: 4Gi
      controlledResources: ["cpu", "memory"]
```

## üîß –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### Blue-Green —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

```bash
# –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
kubectl create namespace normaldance-blue
kubectl create namespace normaldance-green

# –®–∞–≥ 2: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≤ –∑–µ–ª–µ–Ω–æ–º –æ–∫—Ä—É–∂–µ–Ω–∏–∏
helm install normaldance-green normaldance/normaldance \
  --namespace normaldance-green \
  --set image.tag=v1.0.1 \
  --set ingress.enabled=true \
  --set ingress.hosts[0].host=api.normaldance.com

# –®–∞–≥ 3: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞
kubectl patch ingress normaldance-ingress -n normaldance-green \
  --patch '{"spec":{"rules":[{"host":"api.normaldance.com","http":{"paths":[{"path":"/","pathType":"Prefix","backend":{"service":{"name":"normaldance-service","port":{"number":3000}}}}]}}]}}'

# –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã
curl -I http://api.normaldance.com

# –®–∞–≥ 5: –£–¥–∞–ª–µ–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
helm uninstall normaldance-blue -n normaldance-blue
kubectl delete namespace normaldance-blue
```

### Canary —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

```bash
# –®–∞–≥ 1: –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ canary –≤–µ—Ä—Å–∏–∏
kubectl set image deployment/normaldance normaldance=normaldance:v1.0.1-canary --record

# –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã
kubectl rollout status deployment/normaldance

# –®–∞–≥ 3: –£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ canary
kubectl patch deployment normaldance --patch='{"spec":{"template":{"spec":{"containers":[{"name":"normaldance","env":[{"name":"TRAFFIC_PERCENTAGE","value":"10"}]}]}}}}'

# –®–∞–≥ 4: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ç—Ä–∏–∫
kubectl logs -f deployment/normaldance

# –®–∞–≥ 5: –ü–æ–ª–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ
kubectl set image deployment/normaldance normaldance=normaldance:v1.0.1 --record
```

## üö® –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞–≤–∞—Ä–∏–π

### –®–∞–≥ 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

```yaml
# Pod Disruption Budget
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: normaldance-pdb
spec:
  minAvailable: 2
  selector:
    matchLabels:
      app: normaldance
```

### –®–∞–≥ 2: –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
kubectl exec -it postgres-0 -n normaldance -- pg_dump -U normaldance normaldance > backup.sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞
kubectl exec -it postgres-0 -n normaldance -- psql -U normaldance normaldance < backup.sql
```

### –®–∞–≥ 3: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–≤–∞—Ä–∏–π

```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Sentry
npm install @sentry/node @sentry/tracing

# –í –∫–æ–¥–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
import * as Sentry from "@sentry/node";

Sentry.init({
  dsn: process.env.SENTRY_DSN,
  tracesSampleRate: 1.0,
});
```

## üìà –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –®–∞–≥ 1: –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

```yaml
# Redis –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
apiVersion: apps/v1
kind: Deployment
metadata:
  name: redis
spec:
  replicas: 1
  selector:
    matchLabels:
      app: redis
  template:
    metadata:
      labels:
        app: redis
    spec:
      containers:
      - name: redis
        image: redis:7-alpine
        ports:
        - containerPort: 6379
        resources:
          requests:
            memory: "256Mi"
            cpu: "250m"
          limits:
            memory: "512Mi"
            cpu: "500m"
```

### –®–∞–≥ 2: CDN

```yaml
# CloudFlare –∏–ª–∏ AWS CloudFront
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: normaldance-ingress
  annotations:
    kubernetes.io/ingress.class: "nginx"
    nginx.ingress.kubernetes.io/ssl-redirect: "true"
    nginx.ingress.kubernetes.io/use-regex: "true"
    nginx.ingress.kubernetes.io/rewrite-target: /
spec:
  tls:
  - hosts:
    - api.normaldance.com
    secretName: normaldance-tls
  rules:
  - host: api.normaldance.com
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: normaldance-service
            port:
              number: 3000
```

### –®–∞–≥ 3: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```sql
-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
CREATE INDEX idx_tracks_created_at ON tracks(created_at);
CREATE INDEX idx_tracks_genre ON tracks(genre);
CREATE INDEX idx_tracks_artist_id ON tracks(artist_id);
CREATE INDEX idx_users_created_at ON users(created_at);
CREATE INDEX idx_nfts_created_at ON nfts(created_at);
CREATE INDEX idx_nfts_category ON nfts(category);

-- –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏–Ω–¥–µ–∫—Å—ã
CREATE INDEX idx_analytics_plays ON analytics(play_count);
CREATE INDEX idx_analytics_date ON analytics(date);
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### –®–∞–≥ 1: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
npm test

# –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
npm run db:seed:testing

# –ü—Ä–æ–≤–µ—Ä–∫–∞ API
npm run test:integration
```

### –®–∞–≥ 2: –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ k6
npm install -g k6

# –ó–∞–ø—É—Å–∫ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
k6 run --vus 100 --duration 30s tests/load-test.js
```

### –®–∞–≥ 3: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
npm audit
npm audit fix

# –¢–µ—Å—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
npm run test:security
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [Next.js Documentation](https://nextjs.org/docs)
- [Prisma Documentation](https://www.prisma.io/docs)
- [Kubernetes Documentation](https://kubernetes.io/docs)
- [Solana Documentation](https://docs.solana.com)

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- [Docker Hub](https://hub.docker.com)
- [Helm Charts](https://hub.helm.sh)
- [Prometheus](https://prometheus.io)
- [Grafana](https://grafana.com)

### –°–æ–æ–±—â–µ—Å—Ç–≤–æ
- [GitHub Issues](https://github.com/normaldance/normaldance/issues)
- [Discord](https://discord.gg/normaldance)
- [Telegram](https://t.me/normaldance)

---

**–°–æ–∑–¥–∞–Ω–æ:** –°–µ–Ω—Ç—è–±—Ä—å 2025
**–í–µ—Ä—Å–∏—è:** v1.0.1
**–û–±–Ω–æ–≤–ª–µ–Ω–æ:** –ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: –°–µ–Ω—Ç—è–±—Ä—å 2025