# –ü–ª–∞–Ω —É–ª—É—á—à–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è

## –û–±–∑–æ—Ä

–í —ç—Ç–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ NormalDance. –≠—Ç–æ —É–ª—É—á—à–µ–Ω–∏–µ –∏–º–µ–µ—Ç —Å—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è Q2-Q3 2025 –≥–æ–¥–∞, —Ç–∞–∫ –∫–∞–∫ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –≥–∞—Ä–∞–Ω—Ç–∏—é –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ –∏ –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω—ã–µ —Ä–µ–ª–∏–∑—ã.

## –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

### –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ unit-—Ç–µ—Å—Ç–æ–≤
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- –ù–µ—Ç E2E-—Ç–µ—Å—Ç–æ–≤
- –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ CI

### –ü—Ä–æ–±–ª–µ–º—ã —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- –ù–∏–∑–∫–æ–µ —Ç–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ù–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Web3-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- –ù–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## –¶–µ–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–µ–ª–∏

- –î–æ–±–∞–≤–∏—Ç—å unit-—Ç–µ—Å—Ç—ã –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- –°–æ–∑–¥–∞—Ç—å E2E-—Ç–µ—Å—Ç—ã —Å Playwright
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ CI

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ü–µ–ª–∏

- –ü–æ–∫—Ä—ã—Ç–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π —Ç–µ—Å—Ç–∞–º–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Web3-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–ù–µ–¥–µ–ª—è 1-2)

- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Jest –¥–ª—è unit-—Ç–µ—Å—Ç–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Playwright –¥–ª—è E2E-—Ç–µ—Å—Ç–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∏–∫—Å—Ç—É—Ä –∏ –º–æ–∫–æ–≤

### –≠—Ç–∞–ø 2: Unit-—Ç–µ—Å—Ç—ã (–ù–µ–¥–µ–ª—è 3-5)

- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —É—Ç–∏–ª–∏—Ç
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ü–æ–∫—Ä—ã—Ç–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

### –≠—Ç–∞–ø 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (–ù–µ–¥–µ–ª—è 6-7)

- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API-—ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Web3-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –≠—Ç–∞–ø 4: E2E-—Ç–µ—Å—Ç—ã (–ù–µ–¥–µ–ª—è 8-9)

- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Web3-–≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∫—É–ø–∫–∏ NFT
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–µ–º–æ—Ä–∏–∞–ª–æ–≤

### –≠—Ç–∞–ø 5: CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–ù–µ–¥–µ–ª—è 10)

- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ç—á–µ—Ç–æ–≤ –æ –ø–æ–∫—Ä—ã—Ç–∏–∏
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ –ø–æ–∫—Ä—ã—Ç–∏—é
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Jest

```javascript
// jest.config.js
module.exports = {
  preset: "ts-jest",
  testEnvironment: "node",
  roots: ["<rootDir>/src"],
  testMatch: [
    "**/__tests__/**/*.+(ts|tsx|js)",
    "**/?(*.)+(spec|test).+(ts|tsx|js)",
  ],
  transform: {
    "^.+\\.(ts|tsx)$": "ts-jest",
  },
  setupFilesAfterEnv: ["<rootDir>/jest.setup.js"],
  collectCoverageFrom: [
    "src/**/*.{js,jsx,ts,tsx}",
    "!src/**/*.d.ts",
    "!src/mocks/**/*",
    "!src/types/**/*",
  ],
  coverageThreshold: {
    global: {
      branches: 80,
      functions: 80,
      lines: 80,
      statements: 80,
    },
  },
  moduleNameMapper: {
    "^@/(.*)$": "<rootDir>/src/$1",
  },
};
```

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Playwright

```javascript
// playwright.config.ts
import { defineConfig, devices } from "@playwright/test";

export default defineConfig({
  testDir: "./tests/e2e",
  fullyParallel: true,
  forbidOnly: !!process.env.CI,
  retries: process.env.CI ? 2 : 1,
  workers: process.env.CI ? 1 : undefined,
  reporter: [
    ["html"],
    ["json", { outputFile: "test-results.json" }],
    ["junit", { outputFile: "junit-results.xml" }],
  ],
  use: {
    baseURL: process.env.BASE_URL || "http://localhost:3000",
    trace: "on-first-retry",
  },
  projects: [
    {
      name: "chromium",
      use: { ...devices["Desktop Chrome"] },
    },
    {
      name: "firefox",
      use: { ...devices["Desktop Firefox"] },
    },
    {
      name: "webkit",
      use: { ...devices["Desktop Safari"] },
    },
  ],
  webServer: {
    command: process.env.CI ? "npm run build && npm run start" : "npm run dev",
    url: process.env.BASE_URL || "http://localhost:3000",
    reuseExistingServer: !process.env.CI,
  },
});
```

### Unit-—Ç–µ—Å—Ç—ã

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Ç–∏–ª–∏—Ç

```typescript
// src/lib/__tests__/utils.test.ts
import { formatTime, validateSolanaAddress } from "@/lib/utils";

describe("Utils", () => {
  describe("formatTime", () => {
    it("should format seconds to MM:SS", () => {
      expect(formatTime(65)).toBe("01:05");
      expect(formatTime(3661)).toBe("61:01");
      expect(formatTime(0)).toBe("00:00");
    });
  });

  describe("validateSolanaAddress", () => {
    it("should validate correct Solana address", () => {
      const validAddress = "4UtUBm2DywkBzXjT5WVX5149FGgJTJG7F82PMhJ7ep1o";
      expect(validateSolanaAddress(validAddress)).toBe(true);
    });

    it("should reject invalid Solana address", () => {
      const invalidAddress = "invalid_address";
      expect(validateSolanaAddress(invalidAddress)).toBe(false);
    });
  });
});
```

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤

```typescript
// src/services/__tests__/track-service.test.ts
import { TrackService } from "@/services/track-service";
import { prisma } from "@/lib/db";

// –ú–æ–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
jest.mock("@/lib/db", () => ({
  prisma: {
    track: {
      findMany: jest.fn(),
      findUnique: jest.fn(),
      create: jest.fn(),
      update: jest.fn(),
      delete: jest.fn(),
    },
  },
}));

describe("TrackService", () => {
  afterEach(() => {
    jest.clearAllMocks();
  });

  describe("getTracksByArtist", () => {
    it("should return tracks for an artist", async () => {
      const mockTracks = [
        { id: "1", title: "Track 1", artistId: "artist1" },
        { id: "2", title: "Track 2", artistId: "artist1" },
      ];

      (prisma.track.findMany as jest.Mock).mockResolvedValue(mockTracks);

      const tracks = await TrackService.getTracksByArtist("artist1");

      expect(prisma.track.findMany).toHaveBeenCalledWith({
        where: { artistId: "artist1" },
        orderBy: { createdAt: "desc" },
      });
      expect(tracks).toEqual(mockTracks);
    });
  });

  describe("createTrack", () => {
    it("should create a new track", async () => {
      const mockTrack = {
        id: "new-track",
        title: "New Track",
        artistId: "artist1",
      };
      const trackData = {
        title: "New Track",
        artistId: "artist1",
        coverImage: "image.jpg",
      };

      (prisma.track.create as jest.Mock).mockResolvedValue(mockTrack);

      const result = await TrackService.createTrack(trackData);

      expect(prisma.track.create).toHaveBeenCalledWith({
        data: trackData,
      });
      expect(result).toEqual(mockTrack);
    });
  });
});
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API-—ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

```typescript
// tests/integration/api/tracks.test.ts
import request from "supertest";
import { app } from "@/app"; // –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Next.js
import { prisma } from "@/lib/db";

describe("Tracks API", () => {
  beforeEach(async () => {
    // –û—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º —Ç–µ—Å—Ç–æ–º
    await prisma.track.deleteMany({});
    await prisma.user.deleteMany({});
  });

  describe("GET /api/tracks", () => {
    it("should return tracks", async () => {
      // –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
      const user = await prisma.user.create({
        data: {
          email: "test@example.com",
          username: "testuser",
        },
      });

      // –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ç—Ä–µ–∫–∞
      await prisma.track.create({
        data: {
          title: "Test Track",
          artistId: user.id,
          coverImage: "test-image.jpg",
          audioUrl: "test-audio.mp3",
        },
      });

      const response = await request(app).get("/api/tracks").expect(200);

      expect(response.body).toHaveLength(1);
      expect(response.body[0]).toHaveProperty("title", "Test Track");
    });
  });

  describe("POST /api/tracks", () => {
    it("should create a new track", async () => {
      const user = await prisma.user.create({
        data: {
          email: "test@example.com",
          username: "testuser",
        },
      });

      const newTrack = {
        title: "New Track",
        artistId: user.id,
        coverImage: "new-image.jpg",
        audioUrl: "new-audio.mp3",
      };

      const response = await request(app)
        .post("/api/tracks")
        .send(newTrack)
        .expect(201);

      expect(response.body).toHaveProperty("title", "New Track");
      expect(response.body).toHaveProperty("artistId", user.id);
    });
  });
});
```

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Web3-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

```typescript
// tests/integration/web3/nft.test.ts
import { NFTService } from "@/services/nft-service";
import { Connection, Keypair, Transaction } from "@solana/web3.js";
import {
  createMint,
  getOrCreateAssociatedTokenAccount,
  mintTo,
} from "@solana/spl-token";

// –ú–æ–∫ Web3-–±–∏–±–ª–∏–æ—Ç–µ–∫
jest.mock("@solana/web3.js", () => ({
  ...jest.requireActual("@solana/web3.js"),
  Connection: jest.fn(),
}));

describe("NFT Service", () => {
  let mockConnection: jest.Mocked<Connection>;
  let nftService: NFTService;

  beforeEach(() => {
    mockConnection = new (Connection as any)("http://localhost:8899");
    nftService = new NFTService(mockConnection);
  });

  describe("mintNFT", () => {
    it("should mint a new NFT", async () => {
      // –ú–æ–∫–∏ –¥–ª—è Solana –æ–ø–µ—Ä–∞—Ü–∏–π
      const mockMint = Keypair.generate();
      const mockUser = Keypair.generate();

      // –ú–æ–∫–∞–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ SPL Token
      (createMint as jest.Mock).mockResolvedValue(mockMint.publicKey);
      (getOrCreateAssociatedTokenAccount as jest.Mock).mockResolvedValue({
        address: mockUser.publicKey,
      });
      (mintTo as jest.Mock).mockResolvedValue("transaction-signature");

      const result = await nftService.mintNFT({
        name: "Test NFT",
        symbol: "TNFT",
        uri: "https://example.com/nft.json",
        recipient: mockUser.publicKey.toString(),
      });

      expect(result).toHaveProperty("signature");
      expect(result).toHaveProperty("mintAddress");
    });
  });
});
```

### E2E-—Ç–µ—Å—Ç—ã

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è –ø–æ–∫—É–ø–∫–∏ NFT

```typescript
// tests/e2e/nft-purchase.spec.ts
import { test, expect } from "@playwright/test";

test.describe("NFT Purchase Flow", () => {
  test.beforeEach(async ({ page }) => {
    await page.goto("/");
  });

  test("should allow user to purchase an NFT", async ({ page }) => {
    // –ü–æ–∏—Å–∫ –∏ –∫–ª–∏–∫ –ø–æ NFT
    await page.getByText("Digital Art Collection").click();

    // –í—ã–±–æ—Ä NFT
    await page.locator(".nft-card").first().click();

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ—Ç–∞–ª–µ–π NFT
    await expect(page.locator("h1")).toContainText("Digital Art #1");
    await expect(page.locator(".price")).toContainText("0.5 SOL");

    // –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ –ø–æ–∫—É–ø–∫–∏
    await page.getByRole("button", { name: "–ö—É–ø–∏—Ç—å –∑–∞ 0.5 SOL" }).click();

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    await expect(page.locator(".payment-modal")).toBeVisible();

    // –í—ã–±–æ—Ä –º–µ—Ç–æ–¥–∞ –æ–ø–ª–∞—Ç—ã
    await page.getByText("Solana Pay").click();

    // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ–∫—É–ø–∫–∏
    await page.getByRole("button", { name: "–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–æ–∫—É–ø–∫—É" }).click();

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
    await expect(page.locator(".success-message")).toBeVisible();
  });
});

test.describe("Web3 Wallet Integration", () => {
  test("should connect to wallet and show balance", async ({ page }) => {
    await page.goto("/profile");

    // –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞
    await page.getByRole("button", { name: "–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫–æ—à–µ–ª–µ–∫" }).click();

    // –í—ã–±–æ—Ä –∫–æ—à–µ–ª—å–∫–∞ Phantom (–≤ —Ä–µ–∞–ª—å–Ω–æ–º —Ç–µ—Å—Ç–µ –±—É–¥–µ—Ç mock)
    await page.getByText("Phantom").click();

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
    await expect(page.locator(".wallet-connected")).toBeVisible();
    await expect(page.locator(".balance")).toContainText("SOL");
  });
});
```

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

```typescript
// tests/e2e/auth.spec.ts
import { test, expect } from "@playwright/test";

test.describe("Authentication Flow", () => {
  test("should allow user to sign in with email", async ({ page }) => {
    await page.goto("/auth/signin");

    // –í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö
    await page.locator('input[name="email"]').fill("test@example.com");
    await page.locator('input[name="password"]').fill("password123");

    // –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ –≤—Ö–æ–¥–∞
    await page.getByRole("button", { name: "–í–æ–π—Ç–∏" }).click();

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
    await expect(page).toHaveURL("/");
    await expect(page.locator(".user-menu")).toBeVisible();
  });

  test("should allow user to sign up", async ({ page }) => {
    await page.goto("/auth/signup");

    // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
    await page.locator('input[name="email"]').fill("newuser@example.com");
    await page.locator('input[name="username"]').fill("newuser");
    await page.locator('input[name="password"]').fill("password123");

    // –ö–ª–∏–∫ –ø–æ –∫–Ω–æ–ø–∫–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
    await page.getByRole("button", { name: "–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è" }).click();

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
    await expect(page.locator(".success-message")).toBeVisible();
    await expect(page).toHaveURL("/profile");
  });
});
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞—â–∏—Ç—ã –æ—Ç CSRF

```typescript
// tests/security/csrf.test.ts
import request from "supertest";
import { app } from "@/app";

describe("CSRF Protection", () => {
  it("should reject requests without proper CSRF token", async () => {
    const response = await request(app)
      .post("/api/user/profile")
      .send({ username: "hacker" })
      .expect(403);

    expect(response.body).toHaveProperty(
      "error",
      "CSRF token missing or invalid"
    );
  });

  it("should accept requests with proper CSRF token", async () => {
    // –ü–æ–ª—É—á–µ–Ω–∏–µ CSRF —Ç–æ–∫–µ–Ω–∞
    const csrfResponse = await request(app).get("/api/csrf-token").expect(200);

    const csrfToken = csrfResponse.body.csrfToken;

    const response = await request(app)
      .post("/api/user/profile")
      .set("X-CSRF-Token", csrfToken)
      .send({ username: "legitimate-user" })
      .expect(20);

    expect(response.body).toHaveProperty("success", true);
  });
});
```

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞—â–∏—Ç—ã –æ—Ç XSS

```typescript
// tests/security/xss.test.ts
import request from "supertest";
import { app } from "@/app";

describe("XSS Protection", () => {
  it("should sanitize user input to prevent XSS", async () => {
    const maliciousPayload = '<script>alert("XSS")</script>';

    const response = await request(app)
      .post("/api/comments")
      .send({
        trackId: "test-track",
        content: maliciousPayload,
      })
      .expect(201);

    // –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç —Å–∫—Ä–∏–ø—Ç–æ–≤
    expect(response.body.content).not.toContain("<script>");
    expect(response.body.content).toBe('<script>alert("XSS")</script>');
  });
});
```

### CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

#### GitHub Actions –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```yaml
# .github/workflows/test.yml
name: üß™ Tests

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]

jobs:
  unit-tests:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "18"
          cache: "npm"
      - name: Install dependencies
        run: npm ci
      - name: Run unit tests
        run: npm run test:unit
      - name: Upload coverage to Codecov
        uses: codecov/codecov-action@v3
        with:
          file: ./coverage/lcov.info

  integration-tests:
    runs-on: ubuntu-latest
    services:
      postgres:
        image: postgres:13
        env:
          POSTGRES_PASSWORD: postgres
          POSTGRES_DB: testdb
        options: >-
          --health-cmd pg_isready
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
      redis:
        image: redis:6
        options: >-
          --health-cmd "redis-cli ping"
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
    steps:
      - uses: actions/checkout@v4
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "18"
          cache: "npm"
      - name: Install dependencies
        run: npm ci
      - name: Setup database
        run: |
          npm run db:migrate
          npm run db:seed:test
      - name: Run integration tests
        run: npm run test:integration
        env:
          DATABASE_URL: postgresql://postgres:postgres@localhost:5432/testdb
          REDIS_URL: redis://localhost:6379

  e2e-tests:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "18"
          cache: "npm"
      - name: Install dependencies
        run: npm ci
      - name: Install Playwright Browsers
        run: npx playwright install --with-deps
      - name: Run E2E tests
        run: npm run test:e2e
      - name: Upload test results
        if: always()
        uses: actions/upload-artifact@v3
        with:
          name: playwright-report
          path: playwright-report/
          retention-days: 30
```

## –†–∏—Å–∫–∏ –∏ –º–µ—Ä—ã –ø–æ –∏—Ö —Å–Ω–∏–∂–µ–Ω–∏—é

### –†–∏—Å–∫ 1: –î–æ–ª–≥–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤

- **–ú–µ—Ä–∞**: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
- **–ú–µ—Ä–∞**: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –º–µ–¥–ª–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

### –†–∏—Å–∫ 2: –õ–æ–∂–Ω—ã–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤

- **–ú–µ—Ä–∞**: –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è —Ç–µ—Å—Ç–æ–≤
- **–ú–µ—Ä–∞**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤

### –†–∏—Å–∫ 3: –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ç–µ—Å—Ç–æ–≤

- **–ú–µ—Ä–∞**: –ß–µ—Ç–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤
- **–ú–µ—Ä–∞**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ Page Object

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

- –ü–æ–∫—Ä—ã—Ç–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ —Ç–µ—Å—Ç–∞–º–∏
- –£—Å–ø–µ—à–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –≤ CI
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –±–∞–≥–æ–≤ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
- –ë—ã—Å—Ç—Ä–æ–µ –≤—ã—è–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º
- –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## –†–µ—Å—É—Ä—Å—ã

- 2-3 —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –Ω–∞ 10 –Ω–µ–¥–µ–ª—å
- QA-–∏–Ω–∂–µ–Ω–µ—Ä –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ—Å—Ç–æ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- DevOps-–∏–Ω–∂–µ–Ω–µ—Ä –¥–ª—è CI/CD –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## –°—Ä–æ–∫–∏

- –ù–∞—á–∞–ª–æ: 15 –∏—é–Ω—è 2025
- –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ: 25 –∞–≤–≥—É—Å—Ç–∞ 2025
- –û–±—â–µ–µ –≤—Ä–µ–º—è: 10 –Ω–µ–¥–µ–ª—å
