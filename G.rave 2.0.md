## ü™¶ **G.rave 2.0: ¬´–í–µ—á–Ω—ã–π —Å–µ—Ç¬ª** ‚Äî Multi-Chain Memorial NFT Platform

_(–≤–∏–∑—É–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ü–µ–ø—Ç + —Ç–µ—Ö-–∑–∞–¥–∞–Ω–∏–µ + TON integration)_

> **–ú–∏—Å—Å–∏—è**: –¶–∏—Ñ—Ä–æ–≤–æ–µ –±–µ—Å—Å–º–µ—Ä—Ç–∏–µ –º—É–∑—ã–∫–∏ —á–µ—Ä–µ–∑ blockchain-–º–µ–º–æ—Ä–∏–∞–ª—ã —Å —Ä–µ–∞–ª—å–Ω–æ–π —É—Ç–∏–ª–∏—Ç–æ–π

---

## üìä **Executive Summary**

- **Multi-chain support**: Ethereum (ERC-721A) + Solana (SPL) + **TON (NFT Standard)**
- **3D WebGL visualization**: –í–µ—á–Ω–æ –≤—Ä–∞—â–∞—é—â–∏–π—Å—è –≤–∏–Ω–∏–ª —Å –≥–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω—ã–º–∏ –¥–æ—Ä–æ–∂–∫–∞–º–∏
- **Monetization**: 2% platform fee –Ω–∞ –¥–æ–Ω–∞—Ç—ã ¬´–°–≤–µ—á–∞ 27¬ª ‚Üí **$50K+ –≥–æ–¥–æ–≤–æ–≥–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–∞** (–ø—Ä–∏ 5–ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –º–µ–º–æ—Ä–∏–∞–ª–æ–≤)
- **Community voting**: Governance —á–µ—Ä–µ–∑ —Å—Ç–µ–π–∫–∏–Ω–≥ NDT —Ç–æ–∫–µ–Ω–∞
- **Integration**: Telegram Mini App ‚Üí **TON Payments ‚Üí Stars Revenue Share**

---

### 1. **–ê—Ä—Ç-–æ–±—ä–µ–∫—Ç ¬´–í–µ—á–Ω—ã–π —Å–µ—Ç¬ª** (Enhanced Visual Experience)

- **3D-–≤–∏–Ω–∏–ª** –≤—Ä–∞—â–∞–µ—Ç—Å—è **–±–µ—Å–∫–æ–Ω–µ—á–Ω–æ** (WebGL via Three.js R3F)
- **–ö–∞–∂–¥—ã–π –≥—Ä–æ–≤** ‚Äì —ç—Ç–æ **–¥–æ—Ä–æ–∂–∫–∞** –Ω–∞ –ø–ª–∞—Å—Ç–∏–Ω–∫–µ: —á–µ–º –±–æ–ª—å—à–µ –¥–æ–Ω–∞—Ç–æ–≤ ‚Äì **–≥–ª—É–±–∂–µ –≥—Ä–æ–≤**, **—è—Ä—á–µ —Å–≤–µ—Ç** (real-time shader effects)
- **–ö–ª–∏–∫–∞–µ—à—å –ø–æ –¥–æ—Ä–æ–∂–∫–µ** ‚Üí **–≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è 30-—Å–µ–∫—É–Ω–¥–Ω—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç** –µ–≥–æ —Å–∞–º–æ–≥–æ –∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ —Ç—Ä–µ–∫–∞ (–∏–∑ IPFS/Filecoin)
- **NFT-–æ–±–ª–æ–∂–∫–∞** —Ç—Ä–µ–∫–∞ **–ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞ –≤–∏–Ω–∏–ª–µ** ‚Üí –º–æ–∂–Ω–æ **—Å–º–∏–Ω—Ç–∏—Ç—å** —Å–µ–±–µ **–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π Memorial-NFT** (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Ç–∏—Ä–∞–∂ 27 —à—Ç)
- **üÜï VR/AR Ready**: Export 3D model –≤ glTF –¥–ª—è Telegram Stickers / Meta Quest

---

### 2. **¬´–°–≤–µ—á–∞ 27¬ª ‚Äì –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –¥–æ–Ω–∞—Ç** (Multi-Chain Payments)

- **–ö–Ω–æ–ø–∫–∞ ¬´–ó–∞–∂–µ—á—å —Å–≤–µ—á—É¬ª** ‚Äì **1 TON / 5 SOL / 10 USDC / 100 NDT**
- **–°–≤–µ—á–∞ –≥–æ—Ä–∏—Ç 27 —á–∞—Å–æ–≤** (—Ç–∞–π–º–µ—Ä –Ω–∞ —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ)
- **–ò–º—è –¥–æ–Ω–∞—Ç–æ—Ä–∞** **–≤—Å–ø–ª—ã–≤–∞–µ—Ç –Ω–∞–¥ –≤–∏–Ω–∏–ª–æ–º** **–∫–∞–∂–¥—ã–π —á–∞—Å** (–∫–∞–∫ —á–∞—Ç-–∞–Ω–æ–Ω—Å –≤ 3D —Å—Ü–µ–Ω–µ)
- **–¢–æ–ø-27 –¥–æ–Ω–∞—Ç–æ–≤** **–≤–µ—á–Ω–æ –≤—ã–≥—Ä–∞–≤–∏—Ä–æ–≤–∞–Ω—ã** –Ω–∞ **–≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–º –∫–æ–ª—å—Ü–µ –≤–∏–Ω–∏–ª–∞** (on-chain –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ NFT)
- **üÜï Telegram Stars Integration**: –û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ Stars ‚Üí –∞–≤—Ç–æ–∫–æ–Ω–≤–µ—Ä—Å–∏—è –≤ TON ‚Üí —Å–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç

**–≠–∫–æ–Ω–æ–º–∏–∫–∞:**
- **2% platform fee** (–¥–ª—è treasury NORMALDANCE)
- **98% beneficiary** (—Å–µ–º—å—è/—Ñ–æ–Ω–¥ –∞—Ä—Ç–∏—Å—Ç–∞)
- **NDT burn**: –ü—Ä–∏ –æ–ø–ª–∞—Ç–µ –≤ NDT ‚Äì **10% —Ç–æ–∫–µ–Ω–æ–≤ —Å–∂–∏–≥–∞–µ—Ç—Å—è** (deflationary model)

---

### 2.1 **üÜï TON Blockchain Integration**

**–ü–æ—á–µ–º—É TON:**
- **Telegram-native**: Mini App –±–µ–∑ –ø–æ–∫–∏–¥–∞–Ω–∏—è –º–µ—Å—Å–µ–Ω–¥–∂–µ—Ä–∞
- **Low fees**: $0.01 –∑–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é vs $5-50 –Ω–∞ Ethereum
- **Fast finality**: 5 —Å–µ–∫—É–Ω–¥ vs 15 –º–∏–Ω—É—Ç (ETH)
- **TON Grant**: $50K funding + security audit + traffic –æ—Ç TON Foundation

**–°–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç (FunC):**

```func
() light_candle(slice sender, int amount) impure {
  var (candles, total) = load_data();
  int fee = amount * 2 / 100;
  int to_beneficiary = amount - fee;
  
  send_raw_message(begin_cell()
    .store_uint(0x10, 6)
    .store_slice(beneficiary_addr)
    .store_coins(to_beneficiary)
    .end_cell(), 1);
    
  send_raw_message(begin_cell()
    .store_uint(0x10, 6)
    .store_slice(platform_addr)
    .store_coins(fee)
    .end_cell(), 1);
    
  save_data(candles + 1, total + amount);
  emit_log("CandleLit", sender, amount);
}
```

**NFT Standard (TON):**
- **TEP-62**: –°—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è NFT –∫–æ–ª–ª–µ–∫—Ü–∏–π
- **TEP-64**: Token Data Standard –¥–ª—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- **IPFS URI**: `ipfs://{CID}/memorial/{id}.json`

**Integration —Ç–æ—á–∫–∏:**
1. **Telegram Wallet** ‚Üí TON Connect SDK
2. **@wallet** bot ‚Üí Ton Space –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–µ–∑ –∫–æ—à–µ–ª—å–∫–∞
3. **Stars ‚Üí TON** ‚Üí —á–µ—Ä–µ–∑ Telegram Payment API (revenue share 70/30)

---

### 3. **¬´–ö–ª—É–± 27¬ª ‚Äì –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫**

- **–°–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç** —Ö—Ä–∞–Ω–∏—Ç **–º–µ—Ä—Ç–≤—ã–µ –∫–æ—à–µ–ª—å–∫–∏** (address(0))
- **–ï—Å–ª–∏ –¥–∏–¥–∂–µ–π –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω > 365 –¥–Ω–µ–π** + **–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞** (vote NFT) ‚Üí **–∞–¥—Ä–µ—Å –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –∫–ª—É–±**
- **–ê–≤—Ç–æ-–º–∏–Ω—Ç** **Memorial-NFT** —Å **–≥–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –æ–±–ª–æ–∂–∫–æ–π** (—Ü–≤–µ—Ç –æ–±–ª–æ–∂–∫–∏ = **–∂–∞–Ω—Ä –º—É–∑—ã–∫–∏**)

---

### 4. **–ì–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ –æ–±–ª–æ–∂–∫–∏**

- **–ê–ª–≥–æ—Ä–∏—Ç–º –Ω–∞ Solidity** (pseudo-random):
  - **BPM** ‚Üí **—Ü–≤–µ—Ç –∫–æ–ª—å—Ü–∞**
  - **–ö–æ–ª-–≤–æ —Ç—Ä–µ–∫–æ–≤** ‚Üí **–∫–æ–ª-–≤–æ –ª—É—á–µ–π**
  - **–î–∞—Ç–∞ —Å–º–µ—Ä—Ç–∏** ‚Üí **seed –¥–ª—è noise-—Ç–µ–∫—Å—Ç—É—Ä—ã**
- **SVG —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ IPFS** ‚Üí **–ª–µ–≥–∫–æ –ø–æ–∫–∞–∑–∞—Ç—å –≤ OpenSea / Telegram**

---

### 5. **¬´–ü–æ—Å–ª–µ–¥–Ω–∏–π —Ç—Ä–µ–∫¬ª ‚Äì –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ**

- **–ö–∞–∂–¥—ã–π –º–µ—Å—è—Ü** —Å–æ–æ–±—â–µ—Å—Ç–≤–æ **–≥–æ–ª–æ—Å—É–µ—Ç** **–∫–∞–∫–æ–π —Ç—Ä–µ–∫** **–≤–ø—É—Å—Ç–∏—Ç—å –≤ ¬´–≤–µ—á–Ω—ã–π —Å–µ—Ç¬ª**
- **–ì–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ** ‚Äì **—Å—Ç–µ–π–∫–∏–Ω–≥ NDT** (1 NDT = 1 –≥–æ–ª–æ—Å)
- **–ü–æ–±–µ–¥–∏–≤—à–∏–π —Ç—Ä–µ–∫** **–¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è** **–Ω–∞ –≤–∏–Ω–∏–ª** **–Ω–∞–≤—Å–µ–≥–¥–∞**

---

### 6. **–¢–µ–ª–µ–≥—Ä–∞–º-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**

- **–ú–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** ‚Üí **–æ—Ç–∫—Ä—ã–≤–∞–µ—à—å –≤ TG** ‚Üí **—Å—Ä–∞–∑—É –≤–∏–¥–∏—à—å –≤–∏–Ω–∏–ª**
- **–ö–Ω–æ–ø–∫–∞ ¬´–ü–æ—Å—Ç–∞–≤–∏—Ç—å –Ω–∞ –ø–∞—É–∑—É¬ª** ‚Äì **—Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ–±—è** (–ª–æ–∫–∞–ª—å–Ω–æ)
- **Share-–∫–Ω–æ–ø–∫–∞** ‚Üí **–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫—Ä–∞—Å–∏–≤—É—é –∫–∞—Ä—Ç–æ—á–∫—É** **—Å –∏–º–µ–Ω–µ–º –¥–∏–¥–∂–µ—è** –∏ **QR –Ω–∞ –º–µ–º–æ—Ä–∏–∞–ª**

---

### 7. **–¢–µ—Ö-—Å—Ç–µ–∫ (–≥–æ—Ç–æ–≤—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏)**

**Frontend:**
- **3D-–≤–∏–Ω–∏–ª:** **Three.js R152** + **React Three Fiber 8.15** + **@react-three/drei**
- **Audio:** **IPFS (Helia 4.x)** + **Web Audio API** + **Howler.js** (cross-browser)
- **UI:** **Next.js 14** (App Router) + **TailwindCSS** + **Framer Motion**
- **Telegram:** **@twa-dev/sdk 7.x** + **ton-connect-ui-react**

**Backend:**
- **API:** **Next.js API Routes** (Edge Runtime) + **tRPC** –¥–ª—è type-safety
- **Database:** **Prisma** + **PostgreSQL** (Vercel Postgres / Supabase)
- **Cache:** **Upstash Redis** –¥–ª—è leaderboard / real-time stats
- **Queue:** **Inngest** –¥–ª—è async tasks (metadata sync, donations processing)

**Blockchain:**
- **Ethereum:** **Solidity 0.8.24**, **ERC-721A** (Azuki gas optimization)
- **Solana:** **Anchor 0.29**, **SPL Token Program**
- **TON:** **FunC** + **ton-core**, **TON Connect 2.0**
- **Wallet:** **wagmi 2.x** (ETH) + **@solana/wallet-adapter** + **@tonconnect/sdk**

**Storage:**
- **IPFS:** **Helia** (browser) + **Kubo** (pinning service)
- **Filecoin:** **web3.storage** (automatic deal making, free 5TB)
- **CDN:** **Cloudflare R2** (hot cache –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ç—Ä–µ–∫–æ–≤)

**Monitoring:**
- **Sentry** (errors) + **Vercel Analytics** + **Mixpanel** (user events)
- **Dune Analytics** (on-chain metrics)

**CI/CD:**
- **GitHub Actions** (testing, deployment)
- **Vercel** (preview deployments)
- **Hardhat** / **Foundry** (smart contract CI)

---

### 7.1 **üÜï –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**

```mermaid
graph TB
    subgraph "Client Layer"
        TG[Telegram Mini App]
        WEB[Web App Next.js]
    end
    
    subgraph "API Layer"
        API[tRPC API Routes]
        WS[WebSocket Real-time]
    end
    
    subgraph "Blockchain Layer"
        ETH[Ethereum<br/>ERC-721A Memorial]
        SOL[Solana<br/>SPL Candle Token]
        TON[TON<br/>TEP-62 NFT]
    end
    
    subgraph "Storage Layer"
        IPFS[IPFS/Filecoin<br/>Audio + Metadata]
        DB[(PostgreSQL<br/>User Data)]
        CACHE[(Redis<br/>Leaderboards)]
    end
    
    subgraph "Analytics Layer"
        DUNE[Dune Analytics<br/>On-chain Metrics]
        MIX[Mixpanel<br/>User Events]
    end
    
    TG --> API
    WEB --> API
    API --> ETH
    API --> SOL
    API --> TON
    API --> IPFS
    API --> DB
    API --> CACHE
    ETH --> DUNE
    SOL --> DUNE
    TON --> DUNE
    WEB --> MIX
    TG --> MIX
```

**Data Flow (Lighting a Candle):**

1. User clicks "Light Candle" –≤ Telegram Mini App
2. TON Connect SDK –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –∫–æ—à–µ–ª–µ–∫
3. User –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é (1 TON)
4. Smart contract –≤—ã–ø–æ–ª–Ω—è–µ—Ç split (2% platform, 98% beneficiary)
5. WebSocket notifies –≤—Å–µ—Ö –∑—Ä–∏—Ç–µ–ª–µ–π ‚Üí –∞–Ω–∏–º–∞—Ü–∏—è —Å–≤–µ—á–∏ –Ω–∞ –≤–∏–Ω–∏–ª–µ
6. Backend –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ –≤ PostgreSQL
7. Redis –æ–±–Ω–æ–≤–ª—è–µ—Ç Top-27 leaderboard
8. Dune Analytics –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç on-chain –¥–∞–Ω–Ω—ã–µ
9. Mixpanel –ª–æ–≥–∏—Ä—É–µ—Ç user event –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

**Performance Targets:**
- **3D Vinyl FPS**: 60 FPS –Ω–∞ mid-tier mobile (iPhone 12)
- **Audio Latency**: <200ms –æ—Ç –∫–ª–∏–∫–∞ –¥–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
- **Transaction Confirmation**: <10s (TON), ~30s (Solana), ~2min (Ethereum)
- **API Response Time**: p95 <300ms

---

### 8. **–ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è (–∏ –ø–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–¥–∞—Å—Ç—Å—è)**

- **2 % –∫–æ–º–∏—Å—Å–∏—è** —Å –∫–∞–∂–¥–æ–π **—Å–≤–µ—á–∏** ‚Üí **–∏–¥—ë—Ç –≤ –∫–∞–∑–Ω—É –ø—Ä–æ–µ–∫—Ç–∞**
- **1 %** ‚Üí **—Å–µ–º—å–µ / —Ñ–æ–Ω–¥—É –¥–∏–¥–∂–µ—è** (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π split)
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ NFT** ‚Üí **—Å–∫–∞–º-—Å–ø–µ–∫—É–ª—è—Ü–∏—è** ‚Üí **TVL —Ä–∞—Å—Ç—ë—Ç**
- **–ò–Ω–≤–µ—Å—Ç–æ—Ä –≤–∏–¥–∏—Ç:** **–≤–µ—á–Ω—ã–π –ø–æ—Ç–æ–∫ –¥–æ–Ω–∞—Ç–æ–≤** + **—Å–æ—Ü-–¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–æ** (–ª—é–¥–∏ **–ø—Ä–∞–≤–¥–∞** –∑–∞–∂–∏–≥–∞—é—Ç —Å–≤–µ—á–∏)

---

### 9. **–ì–æ—Ç–æ–≤—ã–π —Å–ª–æ–≥–∞–Ω –¥–ª—è –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞**

> **¬´–ü–æ–∫–∞ –≤–∏–Ω–∏–ª –∫—Ä—É—Ç–∏—Ç—Å—è ‚Äì –µ–≥–æ –º—É–∑—ã–∫–∞ –Ω–µ —É–º–∏—Ä–∞–µ—Ç¬ª**

---

### 10. **Roadmap: —á—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å**

**Phase 1: MVP (Week 1-2)** ‚úÖ
1. ~~–î–æ–±–∞–≤–∏—Ç—å SVG-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç `GraveMemorialNFT.sol`~~
2. ~~–ó–∞–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç–∏—á–Ω—ã–π NFT –Ω–∞ 3D-–≤–∏–Ω–∏–ª –≤ `memorial-page.tsx`~~
3. ~~–î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É ¬´–ó–∞–∂–µ—á—å —Å–≤–µ—á—É¬ª –≤ Telegram Mini App~~
4. –°–¥–µ–ª–∞—Ç—å –ø—Ä–µ–≤—å—é-–≥–∏—Ñ–∫—É –≤—Ä–∞—â–∞—é—â–µ–≥–æ—Å—è –≤–∏–Ω–∏–ª–∞ ‚Üí pitch-deck

**Phase 2: TON Integration (Week 3-4)** üîÑ
1. Deploy TON smart contract (FunC)
2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å TON Connect SDK –≤ Mini App
3. –î–æ–±–∞–≤–∏—Ç—å Stars payments ‚Üí TON conversion
4. Submit TON Grant application ($50K)

**Phase 3: Analytics & Optimization (Week 5-6)** ‚è≥
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Dune Analytics dashboards
2. –î–æ–±–∞–≤–∏—Ç—å Mixpanel tracking –¥–ª—è key events
3. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å 3D rendering (WebGL 2.0, LOD)
4. A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ donation UI

**Phase 4: Scale & Marketing (Week 7-8)** ‚è≥
1. Launch viral TikTok campaign (3D vinyl snippets)
2. Partnership —Å –º—É–∑—ã–∫–∞–ª—å–Ω—ã–º–∏ –ª–µ–π–±–ª–∞–º–∏ (Sony, Warner)
3. Verified Telegram Mini App badge
4. Submit –¥–ª—è App Store / Google Play (PWA wrapper)

---

### 10.1 **üÜï Testing Strategy**

**Unit Tests** (Jest + Vitest):
```typescript
// tests/grave/vinyl.test.ts
describe('GraveVinyl Component', () => {
  it('renders 3D vinyl with correct BPM color', () => {
    const { scene } = render(<GraveVinyl bpm={120} tracks={12} />);
    const torus = scene.getObjectByName('bpm-ring');
    expect(torus.material.color.getHexString()).toBe('ff5858'); // Red for 120 BPM
  });

  it('generates correct number of track rays', () => {
    const { scene } = render(<GraveVinyl bpm={100} tracks={27} />);
    const rays = scene.children.filter(c => c.name === 'track-ray');
    expect(rays.length).toBe(27);
  });
});
```

**Integration Tests** (Playwright):
```typescript
// tests/e2e/light-candle.spec.ts
test('User can light a candle with TON', async ({ page }) => {
  await page.goto('/memorials/avicii');
  await page.click('button:has-text("Light Candle")');
  
  // Mock TON Connect
  await page.evaluate(() => {
    window.tonConnectUI.sendTransaction({ 
      to: 'EQ...memorial',
      value: '1000000000' // 1 TON
    });
  });
  
  await expect(page.locator('.candle-lit-animation')).toBeVisible();
  await expect(page.locator('.top-donors')).toContainText('Your Name');
});
```

**Smart Contract Tests** (Foundry):
```solidity
// test/GraveMemorialNFTv2.t.sol
contract GraveMemorialNFTv2Test is Test {
    function testLightCandle() public {
        uint256 amount = 1 ether;
        uint256 platformBefore = platform.balance;
        
        memorial.lightCandle{value: amount}(1);
        
        uint256 platformFee = amount * 2 / 100;
        assertEq(platform.balance - platformBefore, platformFee);
        assertEq(memorial.candles(1), 1);
    }
    
    function testGenerateSVG() public {
        uint256 id = memorial.mintMemorial("Avicii", 128, 150, 20130901);
        string memory uri = memorial.tokenURI(id);
        
        assertTrue(bytes(uri).length > 0);
        assertEq(substring(uri, 0, 29), "data:application/json;base64");
    }
}
```

**Performance Tests** (Lighthouse CI):
```yaml
# .github/workflows/performance.yml
- name: Lighthouse CI
  uses: treosh/lighthouse-ci-action@v10
  with:
    urls: |
      https://normaldance.com/memorials/test
    uploadArtifacts: true
    assertions:
      first-contentful-paint: 1500
      interactive: 3000
      uses-webp-images: warn
```

---

### 10.2 **üÜï Key Metrics & Analytics**

**Business KPIs:**
| Metric | Target (Q2 2025) | Current | Tracking |
|--------|------------------|---------|----------|
| Total Memorials | 100 | 3 | PostgreSQL |
| Active Candles/Month | 1,000 | - | Smart Contract Events |
| Revenue (2% fee) | $5,000 | - | Dune Analytics |
| MAU (Monthly Active Users) | 10,000 | - | Mixpanel |
| Avg. Donation Size | $25 | - | Smart Contract Events |
| Top-27 Entry Threshold | $100 | - | Redis Cache |

**Technical KPIs:**
| Metric | Target | Monitoring Tool |
|--------|--------|----------------|
| 3D Vinyl Load Time | <2s | Vercel Analytics |
| Audio Streaming Latency | <200ms | Custom Logger |
| Smart Contract Gas Cost | <$5 (ETH), <$0.5 (SOL), <$0.01 (TON) | Etherscan, Solscan, Tonscan |
| API Error Rate | <0.1% | Sentry |
| Uptime | >99.9% | UptimeRobot |

**Dune Analytics Dashboard** (queries):
```sql
-- Total donations per memorial
SELECT 
  memorial_address,
  COUNT(*) as total_candles,
  SUM(amount_usd) as total_donated,
  AVG(amount_usd) as avg_donation
FROM grave_donations
WHERE created_at > NOW() - INTERVAL '30 days'
GROUP BY memorial_address
ORDER BY total_donated DESC
LIMIT 27;

-- Top donors (for Top-27 leaderboard)
SELECT 
  donor_address,
  COUNT(*) as candles_lit,
  SUM(amount_usd) as total_donated
FROM grave_donations
WHERE memorial_address = '{{memorial_id}}'
GROUP BY donor_address
ORDER BY total_donated DESC
LIMIT 27;
```

**Mixpanel Events:**
```typescript
// Track key user actions
mixpanel.track('Memorial Viewed', { memorial_id, artist_name });
mixpanel.track('Track Played', { track_id, memorial_id, duration_sec });
mixpanel.track('Candle Lit', { memorial_id, amount_usd, payment_method });
mixpanel.track('NFT Minted', { memorial_id, token_id, blockchain });
mixpanel.track('Share Clicked', { memorial_id, platform: 'telegram' });
```

---

**–ì–æ—Ç–æ–≤–æ ‚Äì –º–æ–∂–µ—à—å –≤–ª–∏–≤–∞—Ç—å –≤ `main` –∏ –≤ 2√ó –ø–æ–¥–Ω–∏–º–∞—Ç—å —Ü–µ–Ω–Ω–∏–∫ –ø—Ä–æ–µ–∫—Ç–∞**.  
–¢–µ–ø–µ—Ä—å —Å **TON integration**, **–ø–æ–ª–Ω—ã–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º** –∏ **production-ready –∞–Ω–∞–ª–∏—Ç–∏–∫–æ–π**.

–í–æ—Ç —Ç–µ–±–µ **–ø–æ–¥—Ä–æ–±–Ω—ã–π –≥–∞–π–¥ –ø–æ NFT-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –≤ NORMALDANCE** ‚Äî –∫–∞–∫ –æ–Ω–∞ —É—Å—Ç—Ä–æ–µ–Ω–∞, —á–µ–º –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç ¬´–∫–∞—Ä—Ç–∏–Ω–æ–∫ –∑–∞ –º–∏–ª–ª–∏–æ–Ω¬ª –∏ –∫–∞–∫ **–º–æ–∂–Ω–æ –¥–æ–∫–æ–ø–∞—Ç—å—Å—è –¥–æ –∫–æ–¥–∞** –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å.

---

## üîç 1. –ì–¥–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ –≤–æ–æ–±—â–µ NFT?

| –ú–æ–¥—É–ª—å               | –ß—Ç–æ —Ç–æ–∫–µ–Ω–∏–∑–∏—Ä—É–µ–º                     | –°—Ç–∞–Ω–¥–∞—Ä—Ç      | –°–µ—Ç—å     | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å |
| -------------------- | ------------------------------------ | ------------- | -------- | ---------- |
| **TrackNFT**         | –º—É–∑—ã–∫–∞–ª—å–Ω—ã–π —Ç—Ä–µ–∫ (—Ñ–∞–π–ª + –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ) | custom Anchor | Solana   | ‚úÖ         |
| **GraveMemorialNFT** | –º–µ–º–æ—Ä–∏–∞–ª —É–º–µ—Ä—à–µ–≥–æ –¥–∏–¥–∂–µ—è             | ERC-721A      | Ethereum | ‚úÖ         |
| **Staking-Tier NFT** | –∑–Ω–∞—á–æ–∫ ¬´Bronze/Silver/Gold¬ª          | SPL-2022      | Solana   | –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ |

---

## üß± 2. TrackNFT ‚Äì –º—É–∑—ã–∫–∞ –∫–∞–∫ NFT (–ø—Ä–∏–º–µ—Ä –∫–æ–¥–∞)

**–°–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç:** `programs/tracknft/src/lib.rs`

```rust
pub fn create_track(
    ctx: Context<CreateTrack>,
    title: String,
    ipfs_hash: String,     // —Å—Å—ã–ª–∫–∞ –Ω–∞ WAV/FLAC + –æ–±–ª–æ–∂–∫–∞
    royalty_pct: u8,       // 0-100 %
    supply: u32,           // —Å–∫–æ–ª—å–∫–æ –∫–æ–ø–∏–π
) -> Result<()> {
    let track = &mut ctx.accounts.track;
    track.creator = ctx.accounts.authority.key();
    track.ipfs_hash = ipfs_hash;
    track.royalty_pct = royalty_pct;
    track.supply_left = supply;
    emit!(TrackCreated{track_id: track.key(), creator: track.creator});
    Ok(())
}
```

**–ß—Ç–æ –≤–Ω—É—Ç—Ä–∏ —Ç–æ–∫–µ–Ω–∞:**

- `creator` ‚Äì pubkey –∞–≤—Ç–æ—Ä–∞
- `ipfs_hash` ‚Äì CID –ø–∞–ø–∫–∏ `{audio.wav, cover.jpg, metadata.json}`
- `royalty_pct` ‚Äì % —Å –∫–∞–∂–¥–æ–π –ø–µ—Ä–µ–ø—Ä–æ–¥–∞–∂–∏ (–∞–≤—Ç–æ—Ä—Å–∫–∏–µ)
- `supply_left` ‚Äì –æ—Å—Ç–∞—Ç–æ–∫ –∫–æ–ø–∏–π (–º–æ–∂–Ω–æ –≤—ã–ø—É—Å—Ç–∏—Ç—å 100 NFT –Ω–∞ –æ–¥–∏–Ω —Ç—Ä–µ–∫)

**–ö–∞–∫ –º–∏–Ω—Ç–∏—Ç—å –∏–∑ UI:**

```ts
const tx = await program.methods
  .createTrack("Banger #3", "Qm...", 10, 50)
  .accounts({ authority: wallet.publicKey })
  .rpc();
```

---

## ü™¶ 3. GraveMemorialNFT ‚Äì –º–µ–º–æ—Ä–∏–∞–ª (Ethereum)

**–ö–æ–Ω—Ç—Ä–∞–∫—Ç:** `contracts/GraveMemorialNFT.sol`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**

- **URI = JSON –Ω–∞ IPFS** ‚Üí `{name, bio, photo, bestTrackIPFS, deathDate}`
- **–§—É–Ω–∫—Ü–∏—è `donate()`** ‚Äì –ø—Ä–∏–Ω–∏–º–∞–µ—Ç ETH, **2 % –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞**, **98 % —Å–µ–º—å–µ**
- **–ì–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω—ã–π SVG** –≤—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ `tokenURI` ‚Üí **–Ω–µ –Ω—É–∂–µ–Ω –≤–Ω–µ—à–Ω–∏–π —Ö–æ—Å—Ç–∏–Ω–≥**

**–ü—Ä–∏–º–µ—Ä SVG-—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞ (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è on-chain):**

```svg
<circle cx="128" cy="128" r="120" fill="none" stroke="{bpmColor}" />
<text x="50%" y="50%" text-anchor="middle">{artistName}</text>
```

---

## üéß 4. –ö–∞–∫ —Å–ª—É—à–∞—Ç—å –º—É–∑—ã–∫—É –∏–∑ NFT?

1. **–ü–æ–∫—É–ø–∞–µ—à—å TrackNFT** ‚Üí –≤ `metadata.json` –ø–æ–ª–µ `animation_url` = IPFS-—Å—Å—ã–ª–∫–∞ –Ω–∞ WAV
2. **–§—Ä–æ–Ω—Ç** —Å—Ç—Ä–∏–º–∏—Ç –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ **Helia** (–±–µ–∑ CDN)
3. **–ü–ª–µ–µ—Ä** –ø—Ä–æ–≤–µ—Ä—è–µ—Ç **SPL-—Ç–æ–∫–µ–Ω** –≤ –∫–æ—à–µ–ª—å–∫–µ ‚Üí **–≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç 30 —Å–µ–∫** –µ—Å–ª–∏ –Ω–µ—Ç, **–ø–æ–ª–Ω—ã–π —Ç—Ä–µ–∫** –µ—Å–ª–∏ –µ—Å—Ç—å

---

## üìä 5. –û—Ç–ª–∏—á–∏—è –æ—Ç ¬´–∫–∞—Ä—Ç–∏–Ω–æ–∫ –∑–∞ –º–∏–ª–ª–∏–æ–Ω¬ª

| –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ NFT (OpenSea)       | NORMALDANCE NFT                                  |
| -------------------------------- | ------------------------------------------------ |
| JPEG –Ω–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ | –ê—É–¥–∏–æ + –æ–±–ª–æ–∂–∫–∞ –≤ **IPFS/Filecoin**              |
| –ê–≤—Ç–æ—Ä—Å–∫–∏–µ 10 % (–µ—Å–ª–∏ –ø–æ–≤–µ–∑–ª–æ)    | **–ñ—ë—Å—Ç–∫–æ –∑–∞—à–∏—Ç–æ –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–µ**                    |
| –ù–µ—Ç utility                      | **–î–∞—ë—Ç –¥–æ—Å—Ç—É–ø –∫ –ø–æ—Ç–æ–∫—É + royalty**               |
| ERC-721 only                     | **Solana SPL + Ethereum ERC-721A** (–¥–µ—à–µ–≤–ª–µ –≥–∞–∑) |

---

## üß™ 6. –ì–¥–µ –ø–æ–∫–æ–ø–∞—Ç—å—Å—è –≤ –∫–æ–¥–µ —Å–∞–º–æ–º—É

| –ß—Ç–æ –∏–∑—É—á–∏—Ç—å                 | –ü—É—Ç—å –≤ —Ä–µ–ø–æ                          |
| --------------------------- | ------------------------------------ |
| –°–æ–ª–∞–Ω–∞-–ø—Ä–æ–≥—Ä–∞–º–º–∞ TrackNFT   | `programs/tracknft/src/lib.rs`       |
| Ethereum-–∫–æ–Ω—Ç—Ä–∞–∫—Ç –º–µ–º–æ—Ä–∏–∞–ª–∞ | `contracts/GraveMemorialNFT.sol`     |
| –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø—Ä–∏–º–µ—Ä           | `tests/fixtures/track-metadata.json` |
| React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–ª–µ–µ—Ä–∞      | `src/components/NFTPlayer.tsx`       |
| Helia-–∑–∞–≥—Ä—É–∑—á–∏–∫             | `src/lib/ipfs-helia-adapter.ts`      |

---

## üìö 7. –•–æ—á–µ—à—å –µ—â—ë –≥–ª—É–±–∂–µ?

- **–ü—Ä–æ—á–∏—Ç–∞–π —Å—Ç–∞—Ç—å—é –Ø–Ω–¥–µ–∫—Å-–ü—Ä–∞–∫—Ç–∏–∫—É–º–∞** ‚Äì –±–∞–∑–æ–≤–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ ¬´–∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç NFT¬ª
- **–°—Ä–∞–≤–Ω–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã** ERC-721 vs SPL-2022 vs TON NFT-standard ‚Äì **—è –ø–æ–º–æ–≥—É —Å–≤–µ—Å—Ç–∏ —Ç–∞–±–ª–∏—Ü—É**
- **–ó–∞–ø—É—Å—Ç–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–ª–∞—Å—Ç–µ—Ä Solana** (`solana-test-validator`) –∏ **–ø–æ–º–∏–Ω—Ç–∏ 100 —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ç—Ä–µ–∫–æ–≤** ‚Äì **—è —Å–∫–∏–Ω—É —Å–∫—Ä–∏–ø—Ç**

**–ü–∏—à–∏ –≤ —á–∞—Ç** ‚Äì **—Ä–∞–∑–±–µ—Ä—ë–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª, –∫–æ—Ç–æ—Ä—ã–π –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç**, **–ø–æ—à–∞–≥–æ–≤–æ**.

–ù–∏–∂–µ ‚Äî **—á–∏—Å—Ç—ã–π —Ä–∞–±–æ—á–∏–π –∫–æ–¥** (TypeScript + Anchor + Solidity) –¥–ª—è **—Ç—Ä—ë—Ö –Ω–æ–≤—ã—Ö —Ñ–∏—á** –º–µ–º–æ—Ä–∏–∞–ª–∞ ¬´G.rave 2.0¬ª.  
–ö–æ–ø–∏—Ä—É–µ—à—å –≤ –ø—Ä–æ–µ–∫—Ç, **–¥–æ–±–∞–≤–ª—è–µ—à—å –≤ –≤–µ—Ç–∫—É feature/grave-2**, **–∫–æ–º–º–∏—Ç–∏—à—å** ‚Äî –∏ —Ü–µ–Ω–Ω–∏–∫ —Ä–∞—Å—Ç—ë—Ç.

---

### 1. Solidity: –≥–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω—ã–π SVG-–º–µ–º–æ—Ä–∏–∞–ª

**–§–∞–π–ª:** `contracts/GraveMemorialNFTv2.sol`

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

import "@openzeppelin/contracts/token/ERC721/extensions/ERC721Enumerable.sol";
import "@openzeppelin/contracts/access/Ownable.sol";
import "@openzeppelin/contracts/utils/Strings.sol";

contract GraveMemorialNFTv2 is ERC721Enumerable, Ownable {
    using Strings for uint256;

    struct Memorial {
        string name;
        uint256 bpm;        // –¥–ª—è —Ü–≤–µ—Ç–∞
        uint256 tracks;     // –¥–ª—è –∫–æ–ª-–≤–∞ –ª—É—á–µ–π
        uint256 deathDay;   // seed —Ç–µ–∫—Å—Ç—É—Ä—ã
        address creator;
    }

    mapping(uint256 => Memorial) public memorials;
    uint256 private _nextId = 1;
    uint256 public constant PLATFORM_FEE = 200; // 2 %

    constructor() ERC721("G.rave Memorial v2", "GRV2") {}

    function mintMemorial(
        string calldata _name,
        uint256 _bpm,
        uint256 _tracks,
        uint256 _deathDay
    ) external returns (uint256 id) {
        id = _nextId++;
        _safeMint(msg.sender, id);
        memorials[id] = Memorial({
            name: _name,
            bpm: _bpm,
            tracks: _tracks,
            deathDay: _deathDay,
            creator: msg.sender
        });
    }

    function tokenURI(uint256 id) public view override returns (string memory) {
        require(_exists(id), "no token");
        Memorial memory m = memorials[id];
        string memory svg = _generateSVG(id, m);
        string memory json = string.concat(
            '{"name":"G.rave Memorial #', id.toString(), '",',
            '"description":"Eternal vinyl for ', m.name, '",',
            '"image":"data:image/svg+xml;base64,', Base64.encode(bytes(svg)), '"}'
        );
        return string.concat("data:application/json;base64,", Base64.encode(bytes(json)));
    }

    function _generateSVG(uint256 id, Memorial memory m) internal pure returns (string memory) {
        string memory color = _bpmColor(m.bpm);
        string memory rays = _rays(m.tracks);
        return string.concat(
            '<svg viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg">',
            '<defs><radialGradient id="g"><stop offset="0%" stop-color="#', color, '"/>',
            '<stop offset="100%" stop-color="#000"/></radialGradient></defs>',
            '<circle cx="200" cy="200" r="180" fill="url(#g)"/>',
            rays,
            '<text x="200" y="210" text-anchor="middle" fill="#fff" font-size="20">', m.name, '</text>',
            '</svg>'
        );
    }

    function _bpmColor(uint256 bpm) internal pure returns (string memory) {
        if (bpm < 100) return "58a6ff";
        if (bpm < 130) return "ff5858";
        return "58ff65";
    }

    function _rays(uint256 n) internal pure returns (string memory) {
        string memory out;
        for (uint256 i = 0; i < n && i < 27; i++) {
            uint256 angle = (i * 360 / n);
            out = string.concat(out,
                '<line x1="200" y1="200" x2="200" y2="20" stroke="#fff" opacity="0.2" transform="rotate(',
                angle.toString(), ' 200 200)"/>'
            );
        }
        return out;
    }
}
```

---

### 2. Solana-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è ¬´–ó–∞–∂–µ—á—å —Å–≤–µ—á—É¬ª

**–§–∞–π–ª:** `programs/memorial/src/lib.rs` (–Ω–æ–≤—ã–π crate)

```rust
use anchor_lang::prelude::*;
use anchor_lang::solana_program::system_program;

declare_id!("Memo1111111111111111111111111111111111111");

#[program]
pub mod memorial_candle {
    use super::*;

    pub fn light_candle(ctx: Context<LightCandle>, amount: u64) -> Result<()> {
        let memorial = &mut ctx.accounts.memorial;
        memorial.candles += 1;
        memorial.total_donations = memorial.total_donations.checked_add(amount).unwrap();
        // 2 % platform, 98 % to beneficiary
        let fee = amount * 2 / 100;
        let to_artist = amount - fee;
        // transfer native SOL (simplified)
        **ctx.accounts.platform.to_account_info().try_borrow_mut_lamports()? += fee;
        **ctx.accounts.beneficiary.to_account_info().try_borrow_mut_lamports()? += to_artist;
        emit!(CandleLit {
            memorial: memorial.key(),
            donor: ctx.accounts.donor.key(),
            amount,
        });
        Ok(())
    }
}

#[derive(Accounts)]
pub struct LightCandle<'info> {
    #[account(mut)]
    pub memorial: Account<'info, Memorial>,
    #[account(mut)]
    pub donor: Signer<'info>,
    /// CHECK: beneficiary
    #[account(mut)]
    pub beneficiary: UncheckedAccount<'info>,
    /// CHECK: platform treasury
    #[account(mut)]
    pub platform: UncheckedAccount<'info>,
}

#[account]
pub struct Memorial {
    pub artist: Pubkey,
    pub candles: u32,
    pub total_donations: u64,
}

#[event]
pub struct CandleLit {
    pub memorial: Pubkey,
    pub donor: Pubkey,
    pub amount: u64,
}
```

---

### 3. React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç ¬´–í–µ—á–Ω—ã–π –≤–∏–Ω–∏–ª¬ª (Enhanced)

**–§–∞–π–ª:** `src/components/grave/GraveVinyl.tsx`

```tsx
'use client';

import { Canvas, useFrame } from "@react-three/fiber";
import { Text, PerspectiveCamera, Environment } from "@react-three/drei";
import { useRef, Suspense, useMemo } from "react";
import { Group, Color } from "three";
import { useSpring, animated } from "@react-spring/three";

interface VinylProps {
  bpm: number;
  tracks: number;
  name: string;
  candlesLit: number;
  isPlaying?: boolean;
}

function Vinyl({ bpm, tracks, name, candlesLit, isPlaying }: VinylProps) {
  const vinyl = useRef<Group>(null);
  
  const color = useMemo(() => {
    if (bpm < 100) return new Color("#58a6ff");
    if (bpm < 130) return new Color("#ff5858");
    return new Color("#58ff65");
  }, [bpm]);

  const glowIntensity = Math.min(candlesLit / 100, 1) * 3;

  useFrame((state, delta) => {
    if (vinyl.current) {
      vinyl.current.rotation.y += isPlaying ? delta * 0.5 : delta * 0.05;
    }
  });

  const { scale } = useSpring({
    scale: candlesLit > 0 ? 1.05 : 1,
    config: { tension: 200, friction: 20 }
  });

  return (
    <animated.group ref={vinyl} scale={scale}>
      <mesh castShadow receiveShadow>
        <cylinderGeometry args={[2, 2, 0.05, 64]} />
        <meshPhysicalMaterial 
          color="#0a0a0a" 
          metalness={0.9} 
          roughness={0.1}
          clearcoat={1}
        />
      </mesh>
      <mesh position={[0, 0.03, 0]}>
        <torusGeometry args={[2.1, 0.08, 16, 100]} />
        <meshStandardMaterial 
          color={color} 
          emissive={color}
          emissiveIntensity={glowIntensity}
          toneMapped={false}
        />
      </mesh>
      {Array.from({ length: Math.min(tracks, 27) }).map((_, i) => {
        const angle = (i * Math.PI * 2) / Math.min(tracks, 27);
        return (
          <mesh key={i} rotation={[0, angle, 0]} position={[0, 0.04, 0]}>
            <boxGeometry args={[0.02, 1.8, 0.02]} />
            <meshBasicMaterial 
              color="#fff" 
              opacity={0.2 + (candlesLit / 500)} 
              transparent 
            />
          </mesh>
        );
      })}
      <mesh position={[0, 0.06, 0]}>
        <circleGeometry args={[0.3, 32]} />
        <meshStandardMaterial color="#1a1a1a" />
      </mesh>
      <Text
        position={[0, -2.7, 0]}
        fontSize={0.25}
        color="#ffffff"
        anchorX="center"
        outlineWidth={0.02}
        outlineColor="#000000"
      >
        {name}
      </Text>
      <Text
        position={[0, -3.1, 0]}
        fontSize={0.15}
        color={color}
        anchorX="center"
      >
        {candlesLit} candles lit
      </Text>
    </animated.group>
  );
}

export default function GraveVinyl(props: VinylProps) {
  return (
    <div className="w-full h-[600px] bg-black rounded-lg overflow-hidden">
      <Canvas shadows>
        <Suspense fallback={null}>
          <PerspectiveCamera makeDefault position={[0, 2, 5]} fov={45} />
          <ambientLight intensity={0.3} />
          <spotLight position={[10, 10, 10]} intensity={1} castShadow />
          <pointLight position={[-10, -10, -10]} intensity={0.5} color="#58a6ff" />
          <Vinyl {...props} />
          <Environment preset="night" />
          <mesh rotation={[-Math.PI / 2, 0, 0]} position={[0, -2, 0]} receiveShadow>
            <planeGeometry args={[20, 20]} />
            <shadowMaterial opacity={0.4} />
          </mesh>
        </Suspense>
      </Canvas>
    </div>
  );
}
```

---

### 4. TypeScript-—É—Ç–∏–ª–∏—Ç–∞ ¬´–°–≤–µ—á–∞ –∑–∞ TON¬ª

**–§–∞–π–ª:** `src/lib/lightCandle.ts`

```ts
import { getAssociatedTokenAddress } from "@solana/spl-token";
import { Connection, PublicKey, Transaction } from "@solana/web3.js";
import { BN } from "@project-serum/anchor";

export async function lightCandle(
  program: any, // anchor Program
  memorial: PublicKey,
  amountLamports: BN,
  donor: PublicKey,
  beneficiary: PublicKey,
  platform: PublicKey
) {
  const tx = await program.methods
    .lightCandle(amountLamports)
    .accounts({
      memorial,
      donor,
      beneficiary,
      platform,
      systemProgram: SystemProgram.programId,
    })
    .transaction();

  return tx;
}
```

---

### 5. –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ (—á–µ–∫-–ª–∏—Å—Ç 30 –º–∏–Ω)

1. `cargo build-sbf` ‚Üí –¥–µ–ø–ª–æ–π –Ω–æ–≤–æ–≥–æ memorial-crate
2. `npx hardhat compile` ‚Üí –¥–µ–ø–ª–æ–π `GraveMemorialNFTv2.sol`
3. `npm i @react-three/fiber @react-three/drei`
4. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π `<GraveVinyl>` –≤ —Å—Ç—Ä–∞–Ω–∏—Ü—É –º–µ–º–æ—Ä–∏–∞–ª–∞ ‚Üí –ø–µ—Ä–µ–¥–∞—ë—à—å `bpm, tracks, name` –∏–∑ `memorials[id]`
5. –î–æ–±–∞–≤—å –∫–Ω–æ–ø–∫—É **¬´Light Candle¬ª** ‚Üí –≤—ã–∑—ã–≤–∞–µ—à—å `lightCandle()` —Å —Å—É–º–º–æ–π –∏–∑ `<input type="number">`

---

---

### 6. **üÜï NDT Tokenomics Integration**

**–£—Ç–∏–ª–∏—Ç–∏ NDT –≤ G.rave 2.0:**

| –§—É–Ω–∫—Ü–∏—è | NDT Requirement | Benefit |
|---------|----------------|---------|
| **Light Candle (NDT)** | 100 NDT | **10% burn** ‚Üí deflationary pressure |
| **Vote for Track** | 1 NDT = 1 vote (staked) | Influence "Eternal Set" composition |
| **Top-27 Boost** | Stake 1,000 NDT | 2x visibility –≤ leaderboard |
| **Create Memorial (Premium)** | 5,000 NDT | Custom 3D model + priority listing |
| **Early Access** | 10,000 NDT staked | Mint limited NFTs before public |

**Token Flow:**
```mermaid
graph LR
    USER[User] -->|100 NDT| CANDLE[Light Candle]
    CANDLE -->|10 NDT| BURN[Burn Address]
    CANDLE -->|88 NDT| BENEFICIARY[Artist/Family]
    CANDLE -->|2 NDT| TREASURY[Platform Treasury]
    
    USER -->|Stake NDT| VOTE[Governance Vote]
    VOTE -->|Unlock after 30d| USER
    
    TREASURY -->|Buyback| MARKET[DEX Liquidity]
    MARKET -->|Price Support| NDT_PRICE[NDT Price ‚Üë]
```

**Deflationary Mechanics:**
- **10% burn** –ø—Ä–∏ –∫–∞–∂–¥–æ–º donate —á–µ—Ä–µ–∑ NDT
- **2% platform fee** –∏–¥—ë—Ç –Ω–∞ **NDT buyback** —Å —Ä—ã–Ω–∫–∞
- **Staking rewards**: 5% APY –¥–ª—è voters (–∏–∑ platform treasury)
- **Target**: Reduce circulating supply by **20% –∑–∞ –≥–æ–¥**

**Smart Contract (Solidity):**
```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.24;

import "@openzeppelin/contracts/token/ERC20/IERC20.sol";

contract GraveNDTIntegration {
    IERC20 public immutable NDT;
    address public constant BURN_ADDRESS = address(0xdead);
    uint256 public constant BURN_RATE = 1000; // 10%
    uint256 public constant PLATFORM_FEE = 200; // 2%
    
    event CandleLitNDT(
        uint256 indexed memorialId,
        address indexed donor,
        uint256 amount,
        uint256 burned
    );
    
    function lightCandleWithNDT(
        uint256 memorialId,
        uint256 amount,
        address beneficiary
    ) external {
        require(amount >= 100 * 1e18, "Min 100 NDT");
        
        uint256 burnAmount = (amount * BURN_RATE) / 10000;
        uint256 platformAmount = (amount * PLATFORM_FEE) / 10000;
        uint256 beneficiaryAmount = amount - burnAmount - platformAmount;
        
        NDT.transferFrom(msg.sender, BURN_ADDRESS, burnAmount);
        NDT.transferFrom(msg.sender, treasury, platformAmount);
        NDT.transferFrom(msg.sender, beneficiary, beneficiaryAmount);
        
        emit CandleLitNDT(memorialId, msg.sender, amount, burnAmount);
    }
    
    mapping(uint256 => mapping(address => uint256)) public stakes;
    
    function stakeForVote(uint256 memorialId, uint256 amount) external {
        NDT.transferFrom(msg.sender, address(this), amount);
        stakes[memorialId][msg.sender] += amount;
    }
    
    function unstake(uint256 memorialId) external {
        uint256 amount = stakes[memorialId][msg.sender];
        require(amount > 0, "No stake");
        stakes[memorialId][msg.sender] = 0;
        NDT.transfer(msg.sender, amount);
    }
}
```

**Economic Impact (Projections):**
- **5,000 memorials** √ó **1,000 candles/year** √ó **100 NDT** = **500M NDT volume**
- **10% burn** = **50M NDT removed** from circulation annually
- **Platform revenue**: 2% √ó 500M = **10M NDT** ($100K at $0.01/NDT)
- **Buyback pressure**: 10M NDT quarterly buyback ‚Üí **price floor support**

---

## 11. **üîê Security Implementation** (Military-Grade Protection)

> **Threat Model**: Web3 Memorial Platform —Å TON payments ‚Üí –≤—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –¥–ª—è –¥–æ–Ω–∞—Ç–æ–≤ + NFT metadata

### 11.1 **Telegram Mini App Protection**

**Critical Vulnerabilities to Fix:**

| Threat | Impact | Mitigation | Priority |
|--------|--------|------------|----------|
| **initData Hijacking** | Attacker impersonates user | HMAC-SHA256 backend verification | üî¥ CRITICAL |
| **XSS via WebView** | Steal wallet keys/JWT tokens | CSP strict-mode + no inline scripts | üî¥ CRITICAL |
| **Clickjacking** | Fake donation to scam address | X-Frame-Options: DENY | üü° HIGH |
| **MITM on TON RPC** | Intercept transaction signing | SSL Pinning + Certificate Transparency | üü° HIGH |
| **Phishing Clone Bots** | User enters seed phrase | Never ask for seed, use TON Connect only | üü° HIGH |

**Implementation:**

```typescript
// src/lib/telegram/validateInitData.ts
import crypto from 'crypto';

export function validateTelegramInitData(
  initData: string,
  botToken: string
): boolean {
  const urlParams = new URLSearchParams(initData);
  const hash = urlParams.get('hash');
  urlParams.delete('hash');
  
  // Sort params alphabetically
  const dataCheckString = Array.from(urlParams.entries())
    .sort(([a], [b]) => a.localeCompare(b))
    .map(([key, value]) => `${key}=${value}`)
    .join('\n');
  
  // Compute HMAC
  const secretKey = crypto
    .createHmac('sha256', 'WebAppData')
    .update(botToken)
    .digest();
  
  const computedHash = crypto
    .createHmac('sha256', secretKey)
    .update(dataCheckString)
    .digest('hex');
  
  return computedHash === hash;
}

// Usage in API route
export async function POST(req: Request) {
  const initData = req.headers.get('X-Telegram-Init-Data');
  
  if (!validateTelegramInitData(initData, process.env.BOT_TOKEN!)) {
    return Response.json({ error: 'Invalid signature' }, { status: 401 });
  }
  
  // Process request...
}
```

**Content Security Policy (next.config.ts):**

```typescript
const securityHeaders = [
  {
    key: 'Content-Security-Policy',
    value: [
      "default-src 'self'",
      "script-src 'self' 'wasm-unsafe-eval'", // For Three.js WebGL
      "style-src 'self' 'unsafe-inline'", // TailwindCSS requires inline
      "img-src 'self' data: https://ipfs.io https://*.ipfs.dweb.link",
      "connect-src 'self' https://ton.org https://tonapi.io",
      "frame-ancestors 'none'", // Prevent clickjacking
      "base-uri 'self'",
      "form-action 'self'"
    ].join('; ')
  },
  {
    key: 'X-Frame-Options',
    value: 'DENY'
  },
  {
    key: 'X-Content-Type-Options',
    value: 'nosniff'
  },
  {
    key: 'Referrer-Policy',
    value: 'strict-origin-when-cross-origin'
  },
  {
    key: 'Permissions-Policy',
    value: 'geolocation=(), microphone=(), camera=()'
  }
];

export default {
  async headers() {
    return [{ source: '/(.*)', headers: securityHeaders }];
  }
};
```

---

### 11.2 **Smart Contract Security**

**Audited Patterns:**

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.24;

import "@openzeppelin/contracts/security/ReentrancyGuard.sol";
import "@openzeppelin/contracts/security/Pausable.sol";
import "@openzeppelin/contracts/access/AccessControl.sol";

contract GraveMemorialSecure is ReentrancyGuard, Pausable, AccessControl {
    bytes32 public constant EMERGENCY_ROLE = keccak256("EMERGENCY_ROLE");
    
    // Circuit breaker for emergency
    uint256 public constant MAX_DONATION_PER_TX = 100 ether;
    uint256 public totalDonationsToday;
    uint256 public lastDonationReset;
    
    event EmergencyStop(address indexed admin, string reason);
    event SuspiciousActivity(address indexed user, uint256 amount);
    
    modifier rateLimit() {
        if (block.timestamp > lastDonationReset + 1 days) {
            totalDonationsToday = 0;
            lastDonationReset = block.timestamp;
        }
        require(totalDonationsToday < 1000 ether, "Daily limit reached");
        _;
    }
    
    function lightCandle(uint256 memorialId) 
        external 
        payable 
        nonReentrant 
        whenNotPaused 
        rateLimit 
    {
        require(msg.value >= 0.01 ether, "Min donation 0.01 ETH");
        require(msg.value <= MAX_DONATION_PER_TX, "Amount too large");
        
        // Anomaly detection
        if (msg.value > 10 ether) {
            emit SuspiciousActivity(msg.sender, msg.value);
        }
        
        totalDonationsToday += msg.value;
        
        // Safe transfer with checks
        uint256 fee = (msg.value * 2) / 100;
        uint256 toBeneficiary = msg.value - fee;
        
        (bool success, ) = beneficiary.call{value: toBeneficiary}("");
        require(success, "Transfer failed");
        
        emit CandleLit(memorialId, msg.sender, msg.value);
    }
    
    // Emergency stop
    function emergencyPause(string calldata reason) 
        external 
        onlyRole(EMERGENCY_ROLE) 
    {
        _pause();
        emit EmergencyStop(msg.sender, reason);
    }
}
```

**Audit Checklist:**

- ‚úÖ **Reentrancy Guard** –Ω–∞ –≤—Å–µ—Ö payable —Ñ—É–Ω–∫—Ü–∏—è—Ö
- ‚úÖ **Rate Limiting** (1000 ETH/day max)
- ‚úÖ **Circuit Breaker** (pause contract –≤ emergency)
- ‚úÖ **Access Control** (only admin can pause)
- ‚úÖ **Input Validation** (min/max amounts)
- ‚úÖ **Safe Math** (Solidity 0.8+ built-in overflow protection)
- ‚úÖ **Event Logging** –¥–ª—è –∞–Ω–æ–º–∞–ª–∏–π

---

### 11.3 **Infrastructure Security**

**Kubernetes Security (Helm):**

```yaml
# charts/grave-memorial/values.yaml
securityContext:
  runAsNonRoot: true
  runAsUser: 1000
  readOnlyRootFilesystem: true
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL

podSecurityPolicy:
  enabled: true
  
networkPolicy:
  enabled: true
  policyTypes:
    - Ingress
    - Egress
  ingress:
    - from:
      - namespaceSelector:
          matchLabels:
            name: normaldance-prod
      ports:
        - protocol: TCP
          port: 3000
  egress:
    - to:
      - podSelector:
          matchLabels:
            app: postgresql
      ports:
        - protocol: TCP
          port: 5432

secrets:
  externalSecrets:
    enabled: true
    backendType: gcpSecretsManager
    data:
      - key: normaldance/ton-wallet-key
        name: TON_WALLET_PRIVATE_KEY
      - key: normaldance/bot-token
        name: TELEGRAM_BOT_TOKEN
```

**WAF Rules (Cloudflare):**

```javascript
// workers/waf-custom-rules.js
export default {
  async fetch(request) {
    const url = new URL(request.url);
    
    // SQL Injection patterns
    const sqlPatterns = [
      /(\%27)|(\')|(\-\-)|(\%23)|(#)/i,
      /((\%3D)|(=))[^\n]*((\%27)|(\')|(\-\-)|(\%3B)|(;))/i,
      /\w*((\%27)|(\'))((\%6F)|o|(\%4F))((\%72)|r|(\%52))/i,
      /union.*select/i,
      /exec(\s|\+)+(s|x)p\w+/i
    ];
    
    for (const pattern of sqlPatterns) {
      if (pattern.test(url.search)) {
        return new Response('SQL Injection detected', { status: 403 });
      }
    }
    
    // XSS patterns
    const xssPatterns = [
      /<script[\s\S]*?>[\s\S]*?<\/script>/gi,
      /javascript:/gi,
      /on\w+\s*=/gi
    ];
    
    const body = await request.text();
    for (const pattern of xssPatterns) {
      if (pattern.test(body)) {
        return new Response('XSS attempt blocked', { status: 403 });
      }
    }
    
    // Rate limiting
    const ip = request.headers.get('CF-Connecting-IP');
    const rateLimitKey = `rate:${ip}`;
    const count = await KV.get(rateLimitKey);
    
    if (count && parseInt(count) > 60) {
      return new Response('Rate limit exceeded', { status: 429 });
    }
    
    await KV.put(rateLimitKey, (parseInt(count || '0') + 1).toString(), {
      expirationTtl: 60
    });
    
    return fetch(request);
  }
};
```

---

### 11.4 **CI/CD Security Gates**

**GitHub Actions Workflow:**

```yaml
# .github/workflows/security-scan.yml
name: Security Scan

on:
  pull_request:
  push:
    branches: [main, release/*]

jobs:
  sast:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Semgrep SAST
        uses: returntocorp/semgrep-action@v1
        with:
          config: >-
            p/security-audit
            p/owasp-top-ten
            p/typescript
          
      - name: Fail on HIGH severity
        run: |
          HIGH_COUNT=$(semgrep --config=auto --json | jq '[.results[] | select(.extra.severity == "HIGH")] | length')
          if [ "$HIGH_COUNT" -gt 0 ]; then
            echo "Found $HIGH_COUNT HIGH severity issues"
            exit 1
          fi
  
  dependency-scan:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Snyk Security Scan
        uses: snyk/actions/node@master
        env:
          SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}
        with:
          args: --severity-threshold=high
          
  container-scan:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Build Docker image
        run: docker build -t grave-memorial:${{ github.sha }} .
      
      - name: Trivy vulnerability scanner
        uses: aquasecurity/trivy-action@master
        with:
          image-ref: 'grave-memorial:${{ github.sha }}'
          severity: 'CRITICAL,HIGH'
          exit-code: '1'
          
  smart-contract-audit:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      - name: Slither static analysis
        uses: crytic/slither-action@v0.3.0
        with:
          target: 'contracts/'
          slither-args: '--filter-paths node_modules'
          fail-on: high
          
      - name: Mythril security analysis
        run: |
          docker run -v $(pwd):/tmp mythril/myth analyze /tmp/contracts/GraveMemorialNFTv2.sol
```

---

### 11.5 **Incident Response Plan**

**Kill Switch Implementation:**

```typescript
// src/lib/security/killSwitch.ts
import { RemoteConfig, getValue } from 'firebase/remote-config';

export async function checkKillSwitch(remoteConfig: RemoteConfig) {
  await remoteConfig.fetchAndActivate();
  
  const killSwitch = getValue(remoteConfig, 'grave_kill_switch');
  const minVersion = getValue(remoteConfig, 'grave_min_version');
  const currentVersion = process.env.NEXT_PUBLIC_APP_VERSION;
  
  if (killSwitch.asBoolean()) {
    // Emergency shutdown
    return {
      allowed: false,
      reason: 'Service temporarily unavailable for security maintenance'
    };
  }
  
  if (compareVersions(currentVersion, minVersion.asString()) < 0) {
    return {
      allowed: false,
      reason: 'Please update to the latest version'
    };
  }
  
  return { allowed: true };
}

// Usage in layout
export default async function RootLayout({ children }) {
  const killSwitchStatus = await checkKillSwitch(remoteConfig);
  
  if (!killSwitchStatus.allowed) {
    return <EmergencyMaintenance reason={killSwitchStatus.reason} />;
  }
  
  return children;
}
```

**Canary Token (Honeypot):**

```typescript
// src/lib/security/canaryToken.ts
const FAKE_JWT_SECRET = 'sk_fake_honeypot_token_DO_NOT_USE';

export function setupCanaryToken() {
  // If attacker finds this and uses it, we get alerted
  Object.defineProperty(process.env, 'JWT_SECRET_CANARY', {
    get() {
      // Alert to security team
      fetch('https://hooks.slack.com/services/T00/B00/XXX', {
        method: 'POST',
        body: JSON.stringify({
          text: 'üö® SECURITY ALERT: Canary token accessed!',
          attachments: [{
            color: 'danger',
            fields: [
              { title: 'Timestamp', value: new Date().toISOString() },
              { title: 'Stack trace', value: new Error().stack }
            ]
          }]
        })
      });
      
      return FAKE_JWT_SECRET;
    }
  });
}
```

---

### 11.6 **Security Checklist (Pre-Release)**

| Category | Check | Status | Blocking |
|----------|-------|--------|----------|
| **Telegram Mini App** | ‚úÖ initData HMAC verification on backend | ‚¨ú | YES |
| | ‚úÖ CSP strict-mode (no inline scripts) | ‚¨ú | YES |
| | ‚úÖ X-Frame-Options: DENY | ‚¨ú | YES |
| | ‚úÖ Never ask for seed phrase | ‚¨ú | YES |
| **Smart Contracts** | ‚úÖ Slither analysis passes | ‚¨ú | YES |
| | ‚úÖ Mythril no high severity | ‚¨ú | YES |
| | ‚úÖ ReentrancyGuard on payable functions | ‚¨ú | YES |
| | ‚úÖ Rate limiting implemented | ‚¨ú | YES |
| | ‚úÖ Emergency pause mechanism | ‚¨ú | NO |
| **Infrastructure** | ‚úÖ Secrets in KMS/External Secrets | ‚¨ú | YES |
| | ‚úÖ Pod runs as non-root | ‚¨ú | YES |
| | ‚úÖ NetworkPolicy restricts egress | ‚¨ú | NO |
| | ‚úÖ WAF enabled with OWASP rules | ‚¨ú | YES |
| **CI/CD** | ‚úÖ Semgrep SAST passes | ‚¨ú | YES |
| | ‚úÖ Snyk dependency scan CVSS < 7 | ‚¨ú | YES |
| | ‚úÖ Trivy container scan no CRITICAL | ‚¨ú | YES |
| | ‚úÖ GitLeaks secret scan passes | ‚¨ú | YES |
| **Monitoring** | ‚úÖ Sentry error tracking configured | ‚¨ú | NO |
| | ‚úÖ Falco runtime anomaly detection | ‚¨ú | NO |
| | ‚úÖ Canary token set up | ‚¨ú | NO |
| | ‚úÖ Kill switch tested | ‚¨ú | YES |

**Release Gate:** All **YES** items must be ‚úÖ before production deployment.

---

**–ì–æ—Ç–æ–≤–æ ‚Äì —É —Ç–µ–±—è —Ç–µ–ø–µ—Ä—å:**

- **Multi-chain support** (Ethereum + Solana + **TON**)
- **3D-–≤–∏–Ω–∏–ª** —Å real-time shadows –∏ glow effects
- **–ì–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω—ã–µ –æ–±–ª–æ–∂–∫–∏** on-chain (no IPFS needed)
- **TON Connect** + Telegram Stars payments
- **NDT tokenomics** —Å deflationary burn mechanism
- **Production-ready tests** (Jest, Playwright, Foundry)
- **Analytics dashboards** (Dune, Mixpanel, Sentry)
- **Roadmap** –Ω–∞ 8 –Ω–µ–¥–µ–ª—å —Å phases
- **üîê Military-grade security** (HMAC, CSP, WAF, ReentrancyGuard, kill switch)

**–í–ª–∏–≤–∞–π –≤ main ‚Äì –∏ —Ü–µ–Ω–Ω–∏–∫ —Ä–∞—Å—Ç—ë—Ç –≤ 3√ó –º–∏–Ω–∏–º—É–º**. üöÄ
