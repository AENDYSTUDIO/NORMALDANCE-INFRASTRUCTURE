# –ü–ª–∞–Ω —Å–∏—Å—Ç–µ–º—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º

## –û–±–∑–æ—Ä

–í —ç—Ç–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –ø—Ä–æ–µ–∫—Ç–∞ NormalDance. –≠—Ç–æ —É–ª—É—á—à–µ–Ω–∏–µ –∏–º–µ–µ—Ç –Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è Q3-Q4 2025 –≥–æ–¥–∞, —Ç–∞–∫ –∫–∞–∫ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —É–¥–æ–±–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π –∏ –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—É—é –º–æ–¥–µ—Ä–∞—Ü–∏—é.

## –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

### –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

- –ë–∞–∑–æ–≤–∞—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
- –ù–µ—Ç —É–¥–æ–±–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ü—Ä–æ–±–ª–µ–º—ã —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –º–æ–¥–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –ù–µ—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É
- –°–ª–æ–∂–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

## –¶–µ–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–µ–ª–∏

- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –º–æ–¥–µ—Ä–∞—Ü–∏–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ü–µ–ª–∏

- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- –£–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ UI/UX –ø—Ä–∏–Ω—Ü–∏–ø—ã

## –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –ê–Ω–∞–ª–∏–∑ –∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ù–µ–¥–µ–ª—è 1-2)

- –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –º–∞–∫–µ—Ç–æ–≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö

### –≠—Ç–∞–ø 2: Backend —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (–ù–µ–¥–µ–ª—è 3-4)

- –°–æ–∑–¥–∞–Ω–∏–µ API –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –¥–ª—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

### –≠—Ç–∞–ø 3: Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (–ù–µ–¥–µ–ª—è 5-7)

- –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API

### –≠—Ç–∞–ø 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ù–µ–¥–µ–ª—è 8)

- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UX
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã—è–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

### –≠—Ç–∞–ø 5: –í–Ω–µ–¥—Ä–µ–Ω–∏–µ (–ù–µ–¥–µ–ª—è 9)

- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
- –û–±—É—á–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

#### –°—Ö–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏

```prisma
// schema.prisma
enum ModerationStatus {
  PENDING
  APPROVED
  REJECTED
  UNDER_REVIEW
}

enum ReportType {
  INAPPROPRIATE_CONTENT
  COPYRIGHT_VIOLATION
  SPAM
  HATE_SPEECH
  OTHER
}

model ContentReport {
  id          String            @id @default(cuid())
  reporterId  String
  reporter    User              @relation(fields: [reporterId], references: [id], fields: [id])
  contentId   String
  contentType ContentType
  reportType  ReportType
  description String?
  status      ModerationStatus  @default(PENDING)
  resolvedAt  DateTime?
  resolvedBy String?
  resolvedByUser User?          @relation("Moderator", fields: [resolvedBy], references: [id])
  createdAt   DateTime          @default(now())
  updatedAt   DateTime          @updatedAt

  @@index([reporterId])
  @@index([contentId, contentType])
  @@index([status])
  @@index([resolvedBy])
}

enum ContentType {
  TRACK
  NFT
  USER_PROFILE
 COMMENT
  PLAYLIST
}

model ModerationAction {
 id          String            @id @default(cuid())
  moderatorId String
  moderator   User              @relation(fields: [moderatorId], references: [id])
  contentId   String
  contentType ContentType
  action      ModerationActionType
  reason      String?
  metadata    Json?
  createdAt   DateTime          @default(now())

  @@index([moderatorId])
  @@index([contentId, contentType])
}

enum ModerationActionType {
  APPROVE
  REJECT
  HIDE
  DELETE
  WARN_USER
  SUSPEND_USER
}

model AdminDashboardSetting {
  id          String   @id @default(cuid())
  key         String   @unique
  value       Json
  description String?
  updatedAt   DateTime @updatedAt

  @@index([key])
}
```

### API –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

#### –ó–∞—â–∏—Ç–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

```typescript
// src/lib/admin-guard.ts
import { getServerSession } from "next-auth/next";
import { authOptions } from "@/lib/auth";
import { NextRequest } from "next/server";

export async function requireAdmin(request: NextRequest) {
  const session = await getServerSession(authOptions);

  if (!session || session.user.role !== "admin") {
    return new Response(JSON.stringify({ error: "Unauthorized" }), {
      status: 401,
      headers: { "Content-Type": "application/json" },
    });
  }

  return session;
}

// Middleware –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
export function withAdminAuth(handler: any) {
  return async (request: NextRequest, ...args: any[]) => {
    const authResult = await requireAdmin(request);

    if (authResult.status === 401) {
      return authResult;
    }

    return handler(request, ...args);
  };
}
```

#### API-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è –º–æ–¥–µ—Ä–∞—Ü–∏–∏

```typescript
// src/app/api/admin/moderation/route.ts
import { NextRequest, NextResponse } from "next/server";
import { withAdminAuth } from "@/lib/admin-guard";
import {
  ModerationStatus,
  ContentType,
  ModerationActionType,
} from "@prisma/client";

// –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é
export const GET = withAdminAuth(async (request: NextRequest) => {
  try {
    const { searchParams } = new URL(request.url);
    const status = searchParams.get("status") || "PENDING";
    const contentType = searchParams.get("contentType") as ContentType | null;
    const page = parseInt(searchParams.get("page") || "1");
    const limit = parseInt(searchParams.get("limit") || "20");

    const whereClause: any = { status };

    if (contentType) {
      whereClause.contentType = contentType;
    }

    const reports = await prisma.contentReport.findMany({
      where: whereClause,
      include: {
        reporter: {
          select: {
            id: true,
            username: true,
            email: true,
          },
        },
        resolvedByUser: {
          select: {
            id: true,
            username: true,
          },
        },
      },
      orderBy: { createdAt: "desc" },
      skip: (page - 1) * limit,
      take: limit,
    });

    const totalCount = await prisma.contentReport.count({ where: whereClause });

    return NextResponse.json({
      reports,
      pagination: {
        page,
        limit,
        total: totalCount,
        pages: Math.ceil(totalCount / limit),
      },
    });
  } catch (error) {
    console.error("Error fetching reports:", error);
    return NextResponse.json(
      { error: "Internal Server Error" },
      { status: 500 }
    );
  }
});

// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—á–µ—Ç–∞
export const POST = withAdminAuth(async (request: NextRequest) => {
  try {
    const body = await request.json();
    const { reportId, action, reason } = body;
    const session = await getServerSession(authOptions);

    if (!reportId || !action) {
      return NextResponse.json(
        { error: "Missing required fields" },
        { status: 400 }
      );
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –æ—Ç—á–µ—Ç–∞
    const updatedReport = await prisma.contentReport.update({
      where: { id: reportId },
      data: {
        status: action === "APPROVE" ? "APPROVED" : "REJECTED",
        resolvedAt: new Date(),
        resolvedBy: session?.user.id,
      },
      include: {
        reporter: true,
      },
    });

    // –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –æ –¥–µ–π—Å—Ç–≤–∏–∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞
    await prisma.moderationAction.create({
      data: {
        moderatorId: session?.user.id,
        contentId: updatedReport.contentId,
        contentType: updatedReport.contentType,
        action: action as ModerationActionType,
        reason,
        metadata: { reportId: updatedReport.id },
      },
    });

    // –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏ –¥–µ–π—Å—Ç–≤–∏—è, –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è
    await handleModerationAction(updatedReport, action, reason);

    return NextResponse.json({ report: updatedReport });
  } catch (error) {
    console.error("Error processing report:", error);
    return NextResponse.json(
      { error: "Internal Server Error" },
      { status: 500 }
    );
  }
});

// –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π –º–æ–¥–µ—Ä–∞—Ü–∏–∏
async function handleModerationAction(
  report: any,
  action: string,
  reason?: string
) {
  switch (report.contentType) {
    case "TRACK":
      if (action === "HIDE") {
        await prisma.track.update({
          where: { id: report.contentId },
          data: { status: "hidden" },
        });
      } else if (action === "DELETE") {
        await prisma.track.update({
          where: { id: report.contentId },
          data: { status: "deleted" },
        });
      }
      break;
    case "NFT":
      if (action === "HIDE") {
        await prisma.nFT.update({
          where: { id: report.contentId },
          data: { status: "hidden" },
        });
      } else if (action === "DELETE") {
        await prisma.nFT.update({
          where: { id: report.contentId },
          data: { status: "deleted" },
        });
      }
      break;
    // –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
  }
}
```

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

#### –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

```tsx
// src/app/admin/page.tsx
"use client";

import { useState, useEffect } from "react";
import { DashboardLayout } from "@/components/admin/DashboardLayout";
import { useAdminStats } from "@/hooks/useAdminStats";

const AdminDashboard = () => {
  const [stats, setStats] = useState<any>(null);
  const [loading, setLoading] = useState(true);
  const { fetchStats } = useAdminStats();

  useEffect(() => {
    const loadStats = async () => {
      try {
        const data = await fetchStats();
        setStats(data);
      } catch (error) {
        console.error("Error loading stats:", error);
      } finally {
        setLoading(false);
      }
    };

    loadStats();
  }, []);

  if (loading) {
    return (
      <DashboardLayout>
        <div className="flex justify-center items-center h-64">
          <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"></div>
        </div>
      </DashboardLayout>
    );
  }

  return (
    <DashboardLayout>
      <div className="space-y-6">
        <h1 className="text-2xl font-bold">Admin Dashboard</h1>

        {/* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */}
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
          <StatCard
            title="Total Users"
            value={stats?.totalUsers || 0}
            change={stats?.userGrowth || 0}
            icon="üë•"
          />
          <StatCard
            title="Total Tracks"
            value={stats?.totalTracks || 0}
            change={stats?.trackGrowth || 0}
            icon="üéµ"
          />
          <StatCard
            title="Total NFTs"
            value={stats?.totalNFTs || 0}
            change={stats?.nftGrowth || 0}
            icon="üñºÔ∏è"
          />
          <StatCard
            title="Pending Reports"
            value={stats?.pendingReports || 0}
            change={stats?.reportTrend || 0}
            icon="‚ö†Ô∏è"
          />
        </div>

        {/* –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è */}
        <div className="bg-white rounded-lg shadow p-6">
          <h2 className="text-lg font-semibold mb-4">Quick Actions</h2>
          <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
            <QuickAction
              title="Content Moderation"
              description="Review and manage content reports"
              href="/admin/moderation"
              icon="üõ°Ô∏è"
            />
            <QuickAction
              title="User Management"
              description="Manage user accounts and permissions"
              href="/admin/users"
              icon="üë§"
            />
            <QuickAction
              title="Content Management"
              description="Manage tracks, NFTs, and playlists"
              href="/admin/content"
              icon="üìö"
            />
          </div>
        </div>
      </div>
    </DashboardLayout>
  );
};

// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
const StatCard = ({ title, value, change, icon }: any) => (
  <div className="bg-white rounded-lg shadow p-6">
    <div className="flex items-center justify-between">
      <div>
        <p className="text-sm font-medium text-gray-600">{title}</p>
        <p className="text-2xl font-semibold">{value}</p>
      </div>
      <div className="text-2xl">{icon}</div>
    </div>
    <p
      className={`text-sm mt-2 ${
        change >= 0 ? "text-green-600" : "text-red-600"
      }`}
    >
      {change >= 0 ? "‚Üë" : "‚Üì"} {Math.abs(change)}% from last week
    </p>
  </div>
);

// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –±—ã—Å—Ç—Ä–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è
const QuickAction = ({ title, description, href, icon }: any) => (
  <a
    href={href}
    className="bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors"
  >
    <div className="flex items-start space-x-3">
      <span className="text-2xl">{icon}</span>
      <div>
        <h3 className="font-medium">{title}</h3>
        <p className="text-sm text-gray-600">{description}</p>
      </div>
    </div>
  </a>
);
```

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

```tsx
// src/app/admin/moderation/page.tsx
"use client";

import { useState, useEffect } from "react";
import { DashboardLayout } from "@/components/admin/DashboardLayout";
import { ReportCard } from "@/components/admin/ReportCard";

const ModerationPage = () => {
  const [reports, setReports] = useState<any[]>([]);
  const [loading, setLoading] = useState(true);
  const [filter, setFilter] = useState("PENDING");
  const [page, setPage] = useState(1);
  const [totalPages, setTotalPages] = useState(1);

  useEffect(() => {
    const fetchReports = async () => {
      try {
        const response = await fetch(
          `/api/admin/moderation?status=${filter}&page=${page}&limit=10`
        );
        const data = await response.json();

        setReports(data.reports);
        setTotalPages(data.pagination.pages);
      } catch (error) {
        console.error("Error fetching reports:", error);
      } finally {
        setLoading(false);
      }
    };

    fetchReports();
  }, [filter, page]);

  const handleAction = async (
    reportId: string,
    action: string,
    reason?: string
  ) => {
    try {
      const response = await fetch("/api/admin/moderation", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({ reportId, action, reason }),
      });

      if (response.ok) {
        // –û–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ –æ—Ç—á–µ—Ç–æ–≤
        const updatedReports = reports.filter(
          (report) => report.id !== reportId
        );
        setReports(updatedReports);
      }
    } catch (error) {
      console.error("Error processing report:", error);
    }
  };

  if (loading) {
    return (
      <DashboardLayout>
        <div className="flex justify-center items-center h-64">
          <div className="animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"></div>
        </div>
      </DashboardLayout>
    );
  }

  return (
    <DashboardLayout>
      <div className="space-y-6">
        <div className="flex justify-between items-center">
          <h1 className="text-2xl font-bold">Content Moderation</h1>
          <div className="flex space-x-4">
            <select
              value={filter}
              onChange={(e) => {
                setFilter(e.target.value);
                setPage(1);
              }}
              className="border border-gray-300 rounded-md px-3 py-2"
            >
              <option value="PENDING">Pending</option>
              <option value="APPROVED">Approved</option>
              <option value="REJECTED">Rejected</option>
              <option value="UNDER_REVIEW">Under Review</option>
            </select>
          </div>
        </div>

        <div className="space-y-4">
          {reports.length === 0 ? (
            <div className="text-center py-8 text-gray-500">
              No reports found
            </div>
          ) : (
            reports.map((report) => (
              <ReportCard
                key={report.id}
                report={report}
                onAction={handleAction}
              />
            ))
          )}
        </div>

        {/* –ü–∞–≥–∏–Ω–∞—Ü–∏—è */}
        {totalPages > 1 && (
          <div className="flex justify-center space-x-2">
            <button
              onClick={() => setPage((p) => Math.max(1, p - 1))}
              disabled={page === 1}
              className="px-3 py-1 border border-gray-300 rounded disabled:opacity-50"
            >
              Previous
            </button>

            <span className="px-3 py-1">
              Page {page} of {totalPages}
            </span>

            <button
              onClick={() => setPage((p) => Math.min(totalPages, p + 1))}
              disabled={page === totalPages}
              className="px-3 py-1 border border-gray-300 rounded disabled:opacity-50"
            >
              Next
            </button>
          </div>
        )}
      </div>
    </DashboardLayout>
  );
};
```

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç–æ—á–∫–∏ –æ—Ç—á–µ—Ç–∞

```tsx
// src/components/admin/ReportCard.tsx
import { useState } from 'react';

interface Report {
  id: string;
  reporter: {
    username: string;
    email: string;
  };
  contentId: string;
  contentType: string;
  reportType: string;
  description: string;
  status: string;
  createdAt: string;
}

interface ReportCardProps {
  report: Report;
  onAction: (reportId: string, action: string, reason?: string) => void;
}

export const ReportCard = ({ report, onAction }: ReportCardProps) => {
  const [showReasonModal, setShowReasonModal] = useState(false);
  const [reason, setReason] = useState('');

  const handleAction = (action: string) => {
    if (action === 'REJECT') {
      setShowReasonModal(true);
      return;
    }

    onAction(report.id, action);
  };

  const confirmAction = () => {
    onAction(report.id, 'REJECT', reason);
    setReason('');
    setShowReasonModal(false);
  };

  return (
    <div className="bg-white rounded-lg shadow p-6 border-l-4 border-purple-500">
      <div className="flex justify-between items-start">
        <div className="flex-1">
          <div className="flex items-center space-x-2 mb-2">
            <span className={`px-2 py-1 rounded-full text-xs font-medium ${
              report.status === 'PENDING' ? 'bg-yellow-100 text-yellow-800' :
              report.status === 'APPROVED' ? 'bg-green-100 text-green-800' :
              report.status === 'REJECTED' ? 'bg-red-100 text-red-800' :
              'bg-gray-100 text-gray-800'
            }`}>
              {report.status}
            </span>
            <span className="text-sm text-gray-500">
              {new Date(report.createdAt).toLocaleDateString()}
            </span>
          </div>

          <h3 className="font-medium">{report.reportType} Report</h3>
          <p className="text-sm text-gray-600 mb-2">
            Reported by: {report.reporter.username} ({report.reporter.email})
          </p>

          {report.description && (
            <p className="text-gray-700 mb-3">{report.description}</p>
          )}

          <div className="text-sm">
            <p><span className="font-medium">Content ID:</span> {report.contentId}</p>
            <p><span className="font-medium">Type:</span> {report.contentType}</p>
          </div>

        <div className="flex space-x-2 ml-4">
          <button
            onClick={() => handleAction('APPROVE')}
            className="px-3 py-1 bg-green-100 text-green-800 rounded hover:bg-green-200 text-sm"
          >
            Approve
          </button>
          <button
            onClick={() => handleAction('REJECT')}
            className="px-3 py-1 bg-red-100 text-red-800 rounded hover:bg-red-200 text-sm"
          >
            Reject
          </button>
          <button
            onClick={() => handleAction('HIDE')}
            className="px-3 py-1 bg-yellow-100 text-yellow-800 rounded hover:bg-yellow-200 text-sm"
          >
            Hide
          </button>
        </div>
      </div>

      {/* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–∏—á–∏–Ω—ã –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è */}
      {showReasonModal && (
        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
          <div className="bg-white rounded-lg p-6 w-full max-w-md">
            <h3 className="text-lg font-medium mb-4">Reason for Rejection</h3>
            <textarea
              value={reason}
              onChange={(e) => setReason(e.target.value)}
              className="w-full border border-gray-300 rounded-md p-2 mb-4"
              placeholder="Enter reason for rejection..."
              rows={4}
            />
            <div className="flex justify-end space-x-2">
              <button
                onClick={() => setShowReasonModal(false)}
                className="px-4 py-2 border border-gray-300 rounded-md"
              >
                Cancel
              </button>
              <button
                onClick={confirmAction}
                disabled={!reason.trim()}
                className="px-4 py-2 bg-red-600 text-white rounded-md disabled:opacity-50"
              >
                Confirm Rejection
              </button>
            </div>
          </div>
        </div>
      )}
    </div>
  );
};
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

#### API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

```typescript
// src/app/api/admin/users/route.ts
import { NextRequest, NextResponse } from "next/server";
import { withAdminAuth } from "@/lib/admin-guard";
import { UserRole } from "@prisma/client";

export const GET = withAdminAuth(async (request: NextRequest) => {
  try {
    const { searchParams } = new URL(request.url);
    const page = parseInt(searchParams.get("page") || "1");
    const limit = parseInt(searchParams.get("limit") || "20");
    const search = searchParams.get("search") || "";

    const whereClause: any = {};

    if (search) {
      whereClause.OR = [
        { username: { contains: search, mode: "insensitive" } },
        { email: { contains: search, mode: "insensitive" } },
      ];
    }

    const users = await prisma.user.findMany({
      where: whereClause,
      select: {
        id: true,
        username: true,
        email: true,
        role: true,
        createdAt: true,
        updatedAt: true,
        avatar: true,
        bio: true,
      },
      orderBy: { createdAt: "desc" },
      skip: (page - 1) * limit,
      take: limit,
    });

    const totalCount = await prisma.user.count({ where: whereClause });

    return NextResponse.json({
      users,
      pagination: {
        page,
        limit,
        total: totalCount,
        pages: Math.ceil(totalCount / limit),
      },
    });
  } catch (error) {
    console.error("Error fetching users:", error);
    return NextResponse.json(
      { error: "Internal Server Error" },
      { status: 500 }
    );
  }
});

export const PUT = withAdminAuth(async (request: NextRequest) => {
  try {
    const body = await request.json();
    const { userId, role, status } = body;
    const session = await getServerSession(authOptions);

    if (!userId) {
      return NextResponse.json({ error: "Missing userId" }, { status: 400 });
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    if (role) {
      await prisma.user.update({
        where: { id: userId },
        data: { role: role as UserRole },
      });
    }

    // –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –æ –¥–µ–π—Å—Ç–≤–∏–∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞
    await prisma.moderationAction.create({
      data: {
        moderatorId: session?.user.id,
        contentId: userId,
        contentType: "USER_PROFILE",
        action: "WARN_USER", // –∏–ª–∏ –¥—Ä—É–≥–æ–π —Ç–∏–ø –¥–µ–π—Å—Ç–≤–∏—è
        reason: `User role updated to ${role}`,
        metadata: { newRole: role },
      },
    });

    return NextResponse.json({ success: true });
  } catch (error) {
    console.error("Error updating user:", error);
    return NextResponse.json(
      { error: "Internal Server Error" },
      { status: 500 }
    );
  }
});
```

### –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

#### –•—É–∫–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

```typescript
// src/hooks/useAdminStats.ts
import { useState } from "react";

export const useAdminStats = () => {
  const [stats, setStats] = useState<any>(null);
  const [loading, setLoading] = useState(false);

  const fetchStats = async () => {
    setLoading(true);
    try {
      const response = await fetch("/api/admin/stats");
      const data = await response.json();
      setStats(data);
      return data;
    } catch (error) {
      console.error("Error fetching stats:", error);
      throw error;
    } finally {
      setLoading(false);
    }
  };

  return {
    stats,
    loading,
    fetchStats,
  };
};
```

#### API –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

```typescript
// src/app/api/admin/stats/route.ts
import { NextRequest, NextResponse } from "next/server";
import { withAdminAuth } from "@/lib/admin-guard";

export const GET = withAdminAuth(async (request: NextRequest) => {
  try {
    // –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±—â–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
    const [
      totalUsers,
      totalTracks,
      totalNFTs,
      pendingReports,
      newUserCount,
      newTrackCount,
      newNFTCount,
      reportTrend,
    ] = await Promise.all([
      prisma.user.count(),
      prisma.track.count(),
      prisma.nFT.count(),
      prisma.contentReport.count({ where: { status: "PENDING" } }),
      prisma.user.count({
        where: {
          createdAt: {
            gte: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000), // –∑–∞ –ø–æ—Å–ª–µ–¥–Ω—é—é –Ω–µ–¥–µ–ª—é
          },
        },
      }),
      prisma.track.count({
        where: {
          createdAt: {
            gte: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000),
          },
        },
      }),
      prisma.nFT.count({
        where: {
          createdAt: {
            gte: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000),
          },
        },
      }),
      prisma.contentReport.count({
        where: {
          createdAt: {
            gte: new Date(Date.now() - 7 * 24 * 60 * 1000),
          },
        },
      }),
    ]);

    // –†–∞—Å—Å—á–µ—Ç —Ä–æ—Å—Ç–∞ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–π —Ä–∞—Å—á–µ—Ç)
    const userGrowth = totalUsers > 0 ? (newUserCount / totalUsers) * 100 : 0;
    const trackGrowth =
      totalTracks > 0 ? (newTrackCount / totalTracks) * 100 : 0;
    const nftGrowth = totalNFTs > 0 ? (newNFTCount / totalNFTs) * 100 : 0;
    const reportTrendPercent =
      pendingReports > 0 ? (reportTrend / pendingReports) * 100 : 0;

    return NextResponse.json({
      totalUsers,
      totalTracks,
      totalNFTs,
      pendingReports,
      userGrowth: parseFloat(userGrowth.toFixed(2)),
      trackGrowth: parseFloat(trackGrowth.toFixed(2)),
      nftGrowth: parseFloat(nftGrowth.toFixed(2)),
      reportTrend: parseFloat(reportTrendPercent.toFixed(2)),
    });
  } catch (error) {
    console.error("Error fetching stats:", error);
    return NextResponse.json(
      { error: "Internal Server Error" },
      { status: 500 }
    );
  }
});
```

## –†–∏—Å–∫–∏ –∏ –º–µ—Ä—ã –ø–æ –∏—Ö —Å–Ω–∏–∂–µ–Ω–∏—é

### –†–∏—Å–∫ 1: –ù–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

- **–ú–µ—Ä–∞**: –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **–ú–µ—Ä–∞**: –†–µ–≥—É–ª—è—Ä–Ω—ã–π –∞—É–¥–∏—Ç –¥–æ—Å—Ç—É–ø–∞

### –†–∏—Å–∫ 2: –û—à–∏–±–æ—á–Ω–∞—è –º–æ–¥–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

- **–ú–µ—Ä–∞**: –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π
- **–ú–µ—Ä–∞**: –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤

### –†–∏—Å–∫ 3: –ù–∏–∑–∫–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –º–æ–¥–µ—Ä–∞—Ü–∏–∏

- **–ú–µ—Ä–∞**: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á
- **–ú–µ—Ä–∞**: –ü—Ä–∏–æ—Ä–∏—Ç–µ–∑–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

- –£–ø—Ä–æ—â–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π
- –ë–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –º–æ–¥–µ—Ä–∞—Ü–∏—è
- –£–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
- –°–Ω–∏–∂–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç—á–µ—Ç–æ–≤
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

## –†–µ—Å—É—Ä—Å—ã

- 2-3 —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –Ω–∞ 9 –Ω–µ–¥–µ–ª—å
- UI/UX-–¥–∏–∑–∞–π–Ω–µ—Ä –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- QA-–∏–Ω–∂–µ–Ω–µ—Ä –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## –°—Ä–æ–∫–∏

- –ù–∞—á–∞–ª–æ: 1 –æ–∫—Ç—è–±—Ä—è 2025
- –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ: 28 –Ω–æ—è–±—Ä—è 2025
- –û–±—â–µ–µ –≤—Ä–µ–º—è: 9 –Ω–µ–¥–µ–ª—å
