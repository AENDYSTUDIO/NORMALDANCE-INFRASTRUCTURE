# –ü–ª–∞–Ω —Å–∏—Å—Ç–µ–º—ã –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

## –û–±–∑–æ—Ä

–í —ç—Ç–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ NormalDance. –≠—Ç–æ —É–ª—É—á—à–µ–Ω–∏–µ –∏–º–µ–µ—Ç –Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è Q3-Q4 2025 –≥–æ–¥–∞, —Ç–∞–∫ –∫–∞–∫ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–∞ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã–µ —Ä—ã–Ω–∫–∏ –∏ —É–ª—É—á—à–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É.

## –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

### –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç–∏
- –í–µ—Å—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ
- –ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–æ–≤
- –ù–µ—Ç –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### –ü—Ä–æ–±–ª–µ–º—ã —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –¥–ª—è –Ω–µ–∞–Ω–≥–ª–æ—è–∑—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ù–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö —Ä—ã–Ω–∫–æ–≤
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫—É–ª—å—Ç—É—Ä–Ω–æ–π –∞–¥–∞–ø—Ç–∞—Ü–∏–∏
- –ù–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —è–∑—ã–∫–∞

## –¶–µ–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ü–µ–ª–∏

- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —è–∑—ã–∫–æ–≤
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä —è–∑—ã–∫–∞

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ü–µ–ª–∏

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —è–∑—ã–∫–æ–≤
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ RTL —è–∑—ã–∫–æ–≤

## –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: –ê–Ω–∞–ª–∏–∑ –∏ –≤—ã–±–æ—Ä —è–∑—ã–∫–æ–≤ (–ù–µ–¥–µ–ª—è 1-2)

- –ê–Ω–∞–ª–∏–∑ —Ü–µ–ª–µ–≤—ã—Ö —Ä—ã–Ω–∫–æ–≤
- –í—ã–±–æ—Ä –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã—Ö —è–∑—ã–∫–æ–≤
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
- –í—ã–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 2: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–ù–µ–¥–µ–ª—è 3-4)

- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
- –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º
- –°–æ–∑–¥–∞–Ω–∏–µ API –¥–ª—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 3: –ü–µ—Ä–µ–≤–æ–¥ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (–ù–µ–¥–µ–ª—è 5-6)

- –ü–µ—Ä–µ–≤–æ–¥ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –ü–µ—Ä–µ–≤–æ–¥ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –ö—É–ª—å—Ç—É—Ä–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è

### –≠—Ç–∞–ø 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ù–µ–¥–µ–ª—è 7-8)

- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UX
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤—ã—è–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º

### –≠—Ç–∞–ø 5: –í–Ω–µ–¥—Ä–µ–Ω–∏–µ (–ù–µ–¥–µ–ª—è 9)

- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

```
public/
‚îî‚îÄ‚îÄ locales/
    ‚îú‚îÄ‚îÄ en/
    ‚îÇ   ‚îú‚îÄ‚îÄ common.json
    ‚îÇ   ‚îú‚îÄ‚îÄ tracks.json
    ‚îÇ   ‚îú‚îÄ‚îÄ nfts.json
    ‚îÇ   ‚îú‚îÄ‚îÄ auth.json
    ‚îÇ   ‚îî‚îÄ‚îÄ dashboard.json
    ‚îú‚îÄ‚îÄ ru/
    ‚îÇ   ‚îú‚îÄ‚îÄ common.json
    ‚îÇ   ‚îú‚îÄ‚îÄ tracks.json
    ‚îÇ   ‚îú‚îÄ‚îÄ nfts.json
    ‚îÇ   ‚îú‚îÄ‚îÄ auth.json
    ‚îÇ   ‚îî‚îÄ‚îÄ dashboard.json
    ‚îú‚îÄ‚îÄ es/
    ‚îÇ   ‚îú‚îÄ‚îÄ common.json
    ‚îÇ   ‚îú‚îÄ‚îÄ tracks.json
    ‚îÇ   ‚îú‚îÄ‚îÄ nfts.json
    ‚îÇ   ‚îú‚îÄ‚îÄ auth.json
    ‚îÇ   ‚îî‚îÄ‚îÄ dashboard.json
    ‚îî‚îÄ‚îÄ fr/
        ‚îú‚îÄ‚îÄ common.json
        ‚îú‚îÄ‚îÄ tracks.json
        ‚îú‚îÄ‚îÄ nfts.json
        ‚îú‚îÄ‚îÄ auth.json
        ‚îî‚îÄ‚îÄ dashboard.json
```

#### –ë–∞–∑–æ–≤—ã–µ —Ñ–∞–π–ª—ã –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

```json
// public/locales/en/common.json
{
  "welcome": "Welcome to NormalDance",
  "home": "Home",
  "tracks": "Tracks",
  "nfts": "NFTs",
  "artists": "Artists",
  "profile": "Profile",
  "settings": "Settings",
  "search": "Search",
  "login": "Login",
  "signup": "Sign Up",
  "logout": "Logout",
  "connect_wallet": "Connect Wallet",
  "language": "Language",
  "currency": "Currency",
  "dashboard": "Dashboard",
  "admin_panel": "Admin Panel",
  "support": "Support",
  "help": "Help",
  "about": "About",
  "terms": "Terms of Service",
  "privacy": "Privacy Policy",
  "copyright": "¬© 2025 NormalDance. All rights reserved.",
  "loading": "Loading...",
  "error": "Error",
  "success": "Success",
  "cancel": "Cancel",
  "save": "Save",
  "delete": "Delete",
  "edit": "Edit",
  "view": "View",
  "share": "Share",
  "copy": "Copy",
  "copied": "Copied!",
  "close": "Close",
  "back": "Back",
  "next": "Next",
  "previous": "Previous",
  "more": "More",
  "less": "Less",
  "all": "All",
  "none": "None",
  "yes": "Yes",
  "no": "No",
  "ok": "OK",
  "confirm": "Confirm",
  "are_you_sure": "Are you sure?",
  "search_placeholder": "Search tracks, artists, NFTs...",
  "no_results": "No results found",
  "page_not_found": "Page not found",
  "something_went_wrong": "Something went wrong",
  "try_again": "Try again",
  "refresh": "Refresh",
  "offline": "You are offline",
  "online": "You are online",
  "last_updated": "Last updated",
  "powered_by": "Powered by"
}
```

```json
// public/locales/en/tracks.json
{
  "title": "Music Tracks",
  "subtitle": "Discover the latest music on NormalDance",
  "play": "Play",
  "pause": "Pause",
  "stop": "Stop",
  "volume": "Volume",
  "mute": "Mute",
  "unmute": "Unmute",
  "shuffle": "Shuffle",
  "repeat": "Repeat",
  "like": "Like",
  "unlike": "Unlike",
  "share_track": "Share Track",
  "download": "Download",
  "buy_nft": "Buy NFT",
  "add_to_playlist": "Add to Playlist",
  "create_playlist": "Create Playlist",
  "playlist_name": "Playlist Name",
  "add_to_queue": "Add to Queue",
  "remove_from_queue": "Remove from Queue",
  "track_info": "Track Info",
  "artist": "Artist",
  "album": "Album",
  "genre": "Genre",
  "duration": "Duration",
  "release_date": "Release Date",
  "bpm": "BPM",
  "key": "Key",
  "popularity": "Popularity",
  "plays": "Plays",
  "likes": "Likes",
  "comments": "Comments",
  "lyrics": "Lyrics",
  "view_lyrics": "View Lyrics",
  "no_lyrics": "No lyrics available",
  "related_tracks": "Related Tracks",
  "trending_now": "Trending Now",
  "new_releases": "New Releases",
  "top_tracks": "Top Tracks",
  "your_library": "Your Library",
  "recently_played": "Recently Played",
  "most_played": "Most Played",
  "create_album": "Create Album",
  "upload_track": "Upload Track",
  "upload": "Upload",
  "select_file": "Select File",
  "drag_drop": "Drag & drop or click to select",
  "max_file_size": "Max file size: 100MB",
  "supported_formats": "Supported formats: MP3, WAV, FLAC",
  "track_details": "Track Details",
  "title_placeholder": "Enter track title",
  "description": "Description",
  "description_placeholder": "Describe your track...",
  "cover_image": "Cover Image",
  "upload_cover": "Upload Cover",
  "price": "Price",
  "price_placeholder": "Enter price in SOL",
  "is_nft": "Mint as NFT",
  "publish": "Publish",
  "save_draft": "Save Draft",
  "publish_success": "Track published successfully!",
  "publish_error": "Error publishing track",
  "uploading": "Uploading...",
  "processing": "Processing...",
  "upload_success": "Upload completed successfully!",
  "upload_error": "Upload failed"
}
```

### –°–∏—Å—Ç–µ–º–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

#### –•—É–∫ –¥–ª—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

```typescript
// src/hooks/useTranslation.ts
import { useState, useEffect } from "react";

interface Translations {
  [key: string]: any;
}

const DEFAULT_LOCALE = "en";
const SUPPORTED_LOCALES = ["en", "ru", "es", "fr"];

export const useTranslation = (namespace: string = "common") => {
  const [locale, setLocale] = useState<string>(DEFAULT_LOCALE);
  const [translations, setTranslations] = useState<Translations>({});
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const initializeTranslations = async () => {
      try {
        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        const userLocale = detectUserLocale();
        setLocale(userLocale);

        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
        const translations = await loadTranslations(userLocale, namespace);
        setTranslations(translations);
      } catch (error) {
        console.error("Error loading translations:", error);
        // –ó–∞–≥—Ä—É–∑–∫–∞ fallback –ø–µ—Ä–µ–≤–æ–¥–æ–≤
        const fallbackTranslations = await loadTranslations(
          DEFAULT_LOCALE,
          namespace
        );
        setTranslations(fallbackTranslations);
      } finally {
        setLoading(false);
      }
    };

    initializeTranslations();
  }, [namespace]);

  const detectUserLocale = (): string => {
    // –ü–æ–ø—ã—Ç–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —è–∑—ã–∫ –∏–∑:
    // 1. URL –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
    // 2. localStorage
    // 3. –Ø–∑—ã–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞
    // 4. Default —è–∑—ã–∫–∞

    if (typeof window !== "undefined") {
      const urlParams = new URLSearchParams(window.location.search);
      const urlLocale = urlParams.get("locale");

      if (urlLocale && SUPPORTED_LOCALES.includes(urlLocale)) {
        return urlLocale;
      }

      const storedLocale = localStorage.getItem("locale");
      if (storedLocale && SUPPORTED_LOCALES.includes(storedLocale)) {
        return storedLocale;
      }

      const browserLocale = window.navigator.language.split("-")[0];
      if (SUPPORTED_LOCALES.includes(browserLocale)) {
        return browserLocale;
      }
    }

    return DEFAULT_LOCALE;
  };

  const loadTranslations = async (
    locale: string,
    namespace: string
  ): Promise<Translations> => {
    try {
      // –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç
      const module = await import(
        `@/public/locales/${locale}/${namespace}.json`
      );
      return module.default || {};
    } catch (error) {
      console.error(
        `Error loading translations for ${locale}/${namespace}:`,
        error
      );
      // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç, —á—Ç–æ–±—ã –Ω–µ –ª–æ–º–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
      return {};
    }
  };

  const t = (key: string, params?: Record<string, any>): string => {
    let translation = getNestedTranslation(translations, key);

    if (!translation) {
      // –ü–æ–ø—ã—Ç–∫–∞ –Ω–∞–π—Ç–∏ –ø–µ—Ä–µ–≤–æ–¥ –≤ fallback —è–∑—ã–∫–µ
      const fallbackTranslations = loadFallbackTranslations(namespace);
      translation = getNestedTranslation(fallbackTranslations, key);
    }

    if (!translation) {
      // –í–æ–∑–≤—Ä–∞—Ç –∫–ª—é—á–∞, –µ—Å–ª–∏ –ø–µ—Ä–µ–≤–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω
      return key;
    }

    // –ó–∞–º–µ–Ω–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –ø–µ—Ä–µ–≤–æ–¥–µ
    if (params) {
      Object.keys(params).forEach((param) => {
        translation = translation.replace(`{{${param}}}`, params[param]);
      });
    }

    return translation;
  };

  const getNestedTranslation = (
    obj: Translations,
    path: string
  ): string | undefined => {
    return path.split(".").reduce((current, key) => {
      return current && current[key] !== undefined ? current[key] : undefined;
    }, obj) as string | undefined;
  };

  const loadFallbackTranslations = (namespace: string): Translations => {
    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏: –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ fallback –ø–µ—Ä–µ–≤–æ–¥–æ–≤
    try {
      const module = require(`@/public/locales/${DEFAULT_LOCALE}/${namespace}.json`);
      return module.default || {};
    } catch (error) {
      return {};
    }
  };

  const changeLocale = async (newLocale: string) => {
    if (!SUPPORTED_LOCALES.includes(newLocale)) {
      console.warn(`Locale ${newLocale} is not supported`);
      return;
    }

    setLoading(true);

    try {
      const newTranslations = await loadTranslations(newLocale, namespace);
      setTranslations(newTranslations);
      setLocale(newLocale);

      // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —è–∑—ã–∫–∞ –≤ localStorage
      if (typeof window !== "undefined") {
        localStorage.setItem("locale", newLocale);
      }
    } catch (error) {
      console.error("Error changing locale:", error);
    } finally {
      setLoading(false);
    }
  };

  return {
    t,
    locale,
    changeLocale,
    loading,
    supportedLocales: SUPPORTED_LOCALES,
  };
};

// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
export const TranslationProvider = ({
  children,
  initialLocale = DEFAULT_LOCALE,
}) => {
  // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏: –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏
  return children;
};
```

### Middleware –¥–ª—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

#### Middleware –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —è–∑—ã–∫–∞

```typescript
// src/middleware/localization-middleware.ts
import { NextRequest, NextResponse } from "next/server";
import { SUPPORTED_LOCALES } from "@/lib/constants";

export function localizationMiddleware(request: NextRequest) {
  // –ü–æ–ª—É—á–µ–Ω–∏–µ —è–∑—ã–∫–∞ –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ Accept-Language –∏–ª–∏ –∏–∑ –ø–æ–¥–¥–æ–º–µ–Ω–∞
  const urlLocale = request.nextUrl.pathname.split("/")[1];

  if (SUPPORTED_LOCALES.includes(urlLocale)) {
    // –Ø–∑—ã–∫ —É–∂–µ –≤ URL, –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º
    return NextResponse.next();
  }

  // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  const userLocale = getUserLocale(request);

  // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ URL —Å —è–∑—ã–∫–æ–º
  if (request.nextUrl.pathname !== "/404") {
    const localizedUrl = new URL(
      `/${userLocale}${request.nextUrl.pathname}`,
      request.url
    );
    localizedUrl.search = request.nextUrl.search;

    return NextResponse.redirect(localizedUrl);
  }

  return NextResponse.next();
}

function getUserLocale(request: NextRequest): string {
  // 1. –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–∏—Ç—å —è–∑—ã–∫ –∏–∑ cookie
  const localeCookie = request.cookies.get("NEXT_LOCALE");
  if (localeCookie && SUPPORTED_LOCALES.includes(localeCookie.value)) {
    return localeCookie.value;
  }

  // 2. –ü–æ–ø—ã—Ç–∫–∞ –ø–æ–ª—É—á–∏—Ç—å —è–∑—ã–∫ –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ Accept-Language
  const acceptLanguage = request.headers.get("accept-language");
  if (acceptLanguage) {
    const languages = acceptLanguage
      .split(",")
      .map((lang) => lang.split(";")[0].trim())
      .map((lang) => lang.split("-")[0]); // –ü–æ–ª—É—á–∞–µ–º —Ç–æ–ª—å–∫–æ –∫–æ–¥ —è–∑—ã–∫–∞

    for (const lang of languages) {
      if (SUPPORTED_LOCALES.includes(lang)) {
        return lang;
      }
    }
  }

  // 3. –Ø–∑—ã–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  return "en";
}
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —è–∑—ã–∫–∞

```tsx
// src/components/LanguageSwitcher.tsx
"use client";

import { useState, useEffect } from "react";
import { useTranslation } from "@/hooks/useTranslation";

const LanguageSwitcher = () => {
  const { locale, changeLocale, supportedLocales } = useTranslation();
  const [isOpen, setIsOpen] = useState(false);

  const languageNames: Record<string, string> = {
    en: "English",
    ru: "–†—É—Å—Å–∫–∏–π",
    es: "Espa√±ol",
    fr: "Fran√ßais",
  };

  const languageFlags: Record<string, string> = {
    en: "üá∫üá∏",
    ru: "üá∑üá∫",
    es: "üá™üá∏",
    fr: "üá´üá∑",
  };

  return (
    <div className="relative">
      <button
        onClick={() => setIsOpen(!isOpen)}
        className="flex items-center space-x-2 px-3 py-2 rounded-md hover:bg-gray-100 transition-colors"
      >
        <span>{languageFlags[locale]}</span>
        <span className="hidden md:inline">{languageNames[locale]}</span>
        <svg
          className={`w-4 h-4 ml-1 transition-transform ${
            isOpen ? "rotate-180" : ""
          }`}
          fill="none"
          stroke="currentColor"
          viewBox="0 24 24"
        >
          <path
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeWidth={2}
            d="M19 9l-7 7-7-7"
          />
        </svg>
      </button>

      {isOpen && (
        <div className="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 border border-gray-200">
          {supportedLocales.map((lang) => (
            <button
              key={lang}
              onClick={() => {
                changeLocale(lang);
                setIsOpen(false);
              }}
              className={`flex items-center space-x-3 w-full text-left px-4 py-2 hover:bg-gray-100 ${
                locale === lang
                  ? "bg-purple-50 text-purple-700"
                  : "text-gray-700"
              }`}
            >
              <span>{languageFlags[lang]}</span>
              <span>{languageNames[lang]}</span>
              {locale === lang && (
                <svg
                  className="w-4 h-4 ml-auto"
                  fill="currentColor"
                  viewBox="0 0 20 20"
                >
                  <path
                    fillRule="evenodd"
                    d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                    clipRule="evenodd"
                  />
                </svg>
              )}
            </button>
          ))}
        </div>
      )}
    </div>
  );
};

export default LanguageSwitcher;
```

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º

```tsx
// src/components/LocalizedText.tsx
import { useTranslation } from "@/hooks/useTranslation";

interface LocalizedTextProps {
  i18nKey: string;
  ns?: string;
  values?: Record<string, any>;
  children?: React.ReactNode;
}

const LocalizedText = ({
  i18nKey,
  ns = "common",
  values,
  children,
}: LocalizedTextProps) => {
  const { t } = useTranslation(ns);
  const translated = t(i18nKey, values);

  return <span>{translated}</span>;
};

export default LocalizedText;
```

### API –¥–ª—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏

#### API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤

```typescript
// src/app/api/translations/route.ts
import { NextRequest, NextResponse } from "next/server";

export async function GET(request: NextRequest) {
  try {
    const { searchParams } = new URL(request.url);
    const locale = searchParams.get("locale") || "en";
    const namespace = searchParams.get("namespace") || "common";

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —è–∑—ã–∫–æ–≤
    const SUPPORTED_LOCALES = ["en", "ru", "es", "fr"];
    if (!SUPPORTED_LOCALES.includes(locale)) {
      return NextResponse.json(
        { error: "Unsupported locale" },
        { status: 400 }
      );
    }

    // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
    try {
      const translationsModule = await import(
        `@/public/locales/${locale}/${namespace}.json`
      );
      const translations = translationsModule.default;

      return NextResponse.json({
        locale,
        namespace,
        translations,
      });
    } catch (error) {
      console.error("Error loading translations:", error);
      return NextResponse.json(
        { error: "Translations not found" },
        { status: 404 }
      );
    }
  } catch (error) {
    console.error("Error in translations API:", error);
    return NextResponse.json(
      { error: "Internal Server Error" },
      { status: 500 }
    );
  }
}

// API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —è–∑—ã–∫–æ–≤
export async function OPTIONS(request: NextRequest) {
  return NextResponse.json({
    supportedLocales: ["en", "ru", "es", "fr"],
    defaultLocale: "en",
  });
}
```

### –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

#### –°–µ—Ä–≤–∏—Å –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

```typescript
// src/lib/content-localization-service.ts
import { prisma } from "@/lib/db";

export class ContentLocalizationService {
  // –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π –∏ –æ–ø–∏—Å–∞–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç–∞
  static async getLocalizedTrack(trackId: string, locale: string = "en") {
    const track = await prisma.track.findUnique({
      where: { id: trackId },
      include: {
        artist: true,
        translations: {
          where: { locale },
        },
      },
    });

    if (!track) return null;

    // –ï—Å–ª–∏ –µ—Å—Ç—å –ø–µ—Ä–µ–≤–æ–¥ –¥–ª—è —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞, –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ
    const translation = track.translations[0];
    if (translation) {
      return {
        ...track,
        title: translation.title || track.title,
        description: translation.description || track.description,
      };
    }

    // –ò–Ω–∞—á–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç
    return track;
  }

  // –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è NFT
  static async getLocalizedNFT(nftId: string, locale: string = "en") {
    const nft = await prisma.nFT.findUnique({
      where: { id: nftId },
      include: {
        translations: {
          where: { locale },
        },
      },
    });

    if (!nft) return null;

    const translation = nft.translations[0];
    if (translation) {
      return {
        ...nft,
        name: translation.name || nft.name,
        description: translation.description || nft.description,
      };
    }

    return nft;
  }

  // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
  static async saveTranslation(
    resourceId: string,
    resourceType: "track" | "nft" | "user",
    locale: string,
    translations: { [key: string]: string }
  ) {
    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏: –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
    await prisma.translation.upsert({
      where: {
        resourceId_locale_resourceType: {
          resourceId,
          locale,
          resourceType,
        },
      },
      update: {
        ...translations,
        updatedAt: new Date(),
      },
      create: {
        resourceId,
        resourceType,
        locale,
        ...translations,
      },
    });
  }

  // –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –¥–ª—è —Ä–µ—Å—É—Ä—Å–∞
  static async getAvailableTranslations(
    resourceId: string,
    resourceType: "track" | "nft" | "user"
  ) {
    const translations = await prisma.translation.findMany({
      where: { resourceId, resourceType },
    });

    return translations.map((t) => t.locale);
  }
}
```

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ RTL —è–∑—ã–∫–æ–≤

#### –£—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞

```typescript
// src/lib/rtl-utils.ts
const RTL_LANGUAGES = [
  "ar",
  "he",
  "fa",
  "ur",
  "ku",
  "dv",
  "ha",
  "ps",
  "sd",
  "ug",
  "yi",
];

export function isRTL(locale: string): boolean {
  const languageCode = locale.split("-")[0];
  return RTL_LANGUAGES.includes(languageCode);
}

export function getDirection(locale: string): "ltr" | "rtl" {
  return isRTL(locale) ? "rtl" : "ltr";
}

// –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
export function applyDirectionToDocument(locale: string) {
  if (typeof document !== "undefined") {
    document.dir = getDirection(locale);
  }
}
```

## –†–∏—Å–∫–∏ –∏ –º–µ—Ä—ã –ø–æ –∏—Ö —Å–Ω–∏–∂–µ–Ω–∏—é

### –†–∏—Å–∫ 1: –ù–∏–∑–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

- **–ú–µ—Ä–∞**: –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–∏
- **–ú–µ—Ä–∞**: –ö—É–ª—å—Ç—É—Ä–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è

### –†–∏—Å–∫ 2: –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é

- **–ú–µ—Ä–∞**: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤
- **–ú–µ—Ä–∞**: –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

### –†–∏—Å–∫ 3: –ü—Ä–æ–±–ª–µ–º—ã —Å RTL —è–∑—ã–∫–∞–º–∏

- **–ú–µ—Ä–∞**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ RTL —è–∑—ã–∫–∞—Ö
- **–ú–µ—Ä–∞**: –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞

- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö —è–∑—ã–∫–æ–≤
- –ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã
- –£–¥–æ–±–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ RTL —è–∑—ã–∫–æ–≤
- –£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## –†–µ—Å—É—Ä—Å—ã

- 1-2 —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –Ω–∞ 9 –Ω–µ–¥–µ–ª—å
- –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–∏ –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö —è–∑—ã–∫–æ–≤
- –¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫–∏ –¥–ª—è –º–µ–∂–¥—É–Ω–∞—Ä–æ–¥–Ω—ã—Ö —Ä—ã–Ω–∫–æ–≤

## –°—Ä–æ–∫–∏

- –ù–∞—á–∞–ª–æ: 15 –Ω–æ—è–±—Ä—è 2025
- –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ: 10 —è–Ω–≤–∞—Ä—è 2026
- –û–±—â–µ–µ –≤—Ä–µ–º—è: 9 –Ω–µ–¥–µ–ª—å
